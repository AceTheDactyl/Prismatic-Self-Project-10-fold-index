<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>L4 Helix Decision Tree | 16π Dimensional Rotation System</title>
  <meta name="description" content="130 Images × 10 VN Batches × 16 Cycles — Exploring r(r)=r where r=10 through 3+1 dimensional rotation (r, z, Z_C, √2)">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=Crimson+Pro:ital,wght@0,300;0,400;0,600;1,300&display=swap" rel="stylesheet">
  <style>
    /* ═══════════════════════════════════════════════════════════════════════
       L₄-HELIX MATHEMATICAL CONSTANTS
       r(r)=r where r=10 | 16π closure | 3+1 dimensions (r, z, Z_C, √2)
       ═══════════════════════════════════════════════════════════════════════ */
    :root {
      --phi: 1.6180339887;
      --tau: 0.6180339887;
      --sqrt2: 1.4142135624;
      --sqrt3: 1.7320508076;
      --z-c: 0.8660254038;
      --z-c-omega: 1.2247448714;
      --L4: 7;
      --K: 0.9241763718;

      /* 10 VN Batch Colors */
      --vn-0: #ff6b6b; --vn-1: #c792ea; --vn-2: #c0ff60; --vn-3: #9060ff;
      --vn-4: #40ffff; --vn-5: #40ff90; --vn-6: #c0a0ff; --vn-7: #ff6090;
      --vn-8: #60c0ff; --vn-9: #ffd700;

      /* 16 Cycle Colors */
      --cycle-1: #ff4040; --cycle-2: #ff6040; --cycle-3: #ff8040; --cycle-4: #ffa040;
      --cycle-5: #ffc040; --cycle-6: #ffe040; --cycle-7: #c0ff40; --cycle-8: #40ff40;
      --cycle-9: #40ff80; --cycle-10: #40ffc0; --cycle-11: #40ffff; --cycle-12: #40c0ff;
      --cycle-13: #4080ff; --cycle-14: #8040ff; --cycle-15: #c040ff; --cycle-16: #ff40ff;

      /* Wave States */
      --forward: #00ff88; --backward: #ff6b6b; --standing: #c792ea; --crystallized: #ffd700;

      /* Dimensional Colors */
      --dim-r: #ff6b6b; --dim-z: #40ffff; --dim-zc: #c792ea; --dim-sqrt2: #ffd700;

      /* Ternary Truth States */
      --ternary-true: #00ff88; --ternary-paradox: #f0c040; --ternary-false: #ff6b6b;

      /* Theme */
      --bg-void: #030306; --bg-primary: #080810; --bg-secondary: #0c0c18;
      --bg-tertiary: #12122a; --bg-card: #181838;
      --text-primary: #e8e6e3; --text-secondary: #8a8a9a; --text-accent: #00d4aa;
      --border-subtle: rgba(255, 255, 255, 0.06);
      --border-active: rgba(0, 212, 170, 0.3);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }

    body {
      font-family: 'Crimson Pro', Georgia, serif;
      background: var(--bg-void);
      color: var(--text-primary);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       HELIX BACKGROUND
       ═══════════════════════════════════════════════════════════════════════ */
    .helix-field {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      background:
        radial-gradient(ellipse at 20% 30%, rgba(255, 107, 107, 0.05) 0%, transparent 40%),
        radial-gradient(ellipse at 80% 70%, rgba(199, 146, 234, 0.05) 0%, transparent 40%),
        radial-gradient(ellipse at 50% 50%, rgba(64, 255, 255, 0.03) 0%, transparent 50%);
      animation: helix-rotate 60s linear infinite;
    }

    @keyframes helix-rotate {
      0% { filter: hue-rotate(0deg); }
      100% { filter: hue-rotate(360deg); }
    }

    /* ═══════════════════════════════════════════════════════════════════════
       NAVIGATION BAR
       ═══════════════════════════════════════════════════════════════════════ */
    .nav-bar {
      position: sticky;
      top: 0;
      z-index: 100;
      display: flex;
      justify-content: center;
      gap: 1rem;
      padding: 1rem;
      background: rgba(8, 8, 16, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--border-subtle);
    }

    .nav-link {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
      padding: 0.5rem 1rem;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-subtle);
      border-radius: 0.5rem;
      color: var(--text-secondary);
      text-decoration: none;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .nav-link:hover {
      border-color: var(--text-accent);
      color: var(--text-accent);
      box-shadow: 0 0 15px rgba(0, 212, 170, 0.2);
    }

    .nav-link.active {
      background: var(--bg-card);
      border-color: var(--text-accent);
      color: var(--text-accent);
    }

    /* ═══════════════════════════════════════════════════════════════════════
       HEADER
       ═══════════════════════════════════════════════════════════════════════ */
    .header {
      position: relative;
      z-index: 10;
      padding: 2rem;
      text-align: center;
      border-bottom: 1px solid var(--border-subtle);
      background: linear-gradient(180deg, var(--bg-primary) 0%, transparent 100%);
    }

    .title-section h1 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.8rem;
      font-weight: 300;
      letter-spacing: 0.12em;
      margin-bottom: 0.5rem;
      background: linear-gradient(90deg, var(--vn-0), var(--vn-4), var(--vn-9));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      font-size: 1rem;
      color: var(--text-secondary);
      font-style: italic;
      margin-bottom: 1rem;
    }

    .constants-bar {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 1rem;
      margin: 1.5rem 0;
    }

    .constant-badge {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.7rem;
      padding: 0.4rem 0.8rem;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-subtle);
      border-radius: 1rem;
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    .constant-badge .label { color: var(--text-secondary); }
    .constant-badge .value { color: var(--text-accent); }
    .constant-badge .dim-r { color: var(--dim-r); }
    .constant-badge .dim-z { color: var(--dim-z); }
    .constant-badge .dim-zc { color: var(--dim-zc); }
    .constant-badge .dim-sqrt2 { color: var(--dim-sqrt2); }

    /* ═══════════════════════════════════════════════════════════════════════
       16-CYCLE ROTATION RAIL
       ═══════════════════════════════════════════════════════════════════════ */
    .cycle-rail {
      padding: 2rem;
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border-subtle);
    }

    .cycle-rail-header {
      text-align: center;
      margin-bottom: 1.5rem;
    }

    .cycle-rail-header h2 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      font-weight: 400;
      letter-spacing: 0.15em;
      color: var(--text-accent);
    }

    .cycle-rail-header p {
      font-size: 0.8rem;
      color: var(--text-secondary);
      margin-top: 0.5rem;
    }

    .cycle-track {
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
      padding: 1rem 0;
      overflow-x: auto;
    }

    .cycle-track::before {
      content: '';
      position: absolute;
      left: 2%;
      right: 2%;
      height: 4px;
      top: 50%;
      transform: translateY(-50%);
      background: linear-gradient(90deg,
        var(--cycle-1) 0%, var(--cycle-4) 18.75%,
        var(--cycle-8) 43.75%, var(--cycle-12) 68.75%,
        var(--cycle-16) 100%
      );
      border-radius: 2px;
      z-index: 1;
    }

    .cycle-node {
      position: relative;
      z-index: 2;
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      transition: transform 0.3s ease;
    }

    .cycle-node:hover {
      transform: translateY(-5px);
    }

    .cycle-dot {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: 2px solid;
      background: var(--bg-void);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.65rem;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .cycle-node:hover .cycle-dot {
      transform: scale(1.2);
      box-shadow: 0 0 20px currentColor;
    }

    .cycle-label {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.55rem;
      margin-top: 0.4rem;
      color: var(--text-secondary);
    }

    .cycle-group {
      font-size: 0.45rem;
      color: var(--text-secondary);
      opacity: 0.7;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       CSS-ONLY MODAL SYSTEM
       ═══════════════════════════════════════════════════════════════════════ */
    .modal-trigger {
      display: none;
    }

    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(10px);
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.4s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    .modal-trigger:checked + .modal-overlay {
      opacity: 1;
      visibility: visible;
    }

    .modal-content {
      background: var(--bg-secondary);
      border: 2px solid var(--modal-color, var(--text-accent));
      border-radius: 1rem;
      max-width: 800px;
      width: 100%;
      max-height: 85vh;
      overflow-y: auto;
      transform: scale(0.9) translateY(20px);
      transition: all 0.4s ease;
      position: relative;
    }

    .modal-trigger:checked + .modal-overlay .modal-content {
      transform: scale(1) translateY(0);
    }

    .modal-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-subtle);
      color: var(--text-primary);
      font-size: 1.2rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      z-index: 10;
    }

    .modal-close:hover {
      background: var(--modal-color, var(--text-accent));
      color: var(--bg-void);
    }

    .modal-header {
      padding: 2rem;
      border-bottom: 1px solid var(--border-subtle);
      text-align: center;
    }

    .modal-cycle-num {
      font-family: 'JetBrains Mono', monospace;
      font-size: 3rem;
      font-weight: 700;
      color: var(--modal-color, var(--text-accent));
      text-shadow: 0 0 30px var(--modal-color, var(--text-accent));
    }

    .modal-title {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.2rem;
      margin-top: 0.5rem;
      letter-spacing: 0.1em;
    }

    .modal-phase {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-top: 0.25rem;
    }

    .modal-body {
      padding: 2rem;
    }

    .modal-section {
      margin-bottom: 2rem;
    }

    .modal-section h3 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      color: var(--modal-color, var(--text-accent));
      margin-bottom: 1rem;
      letter-spacing: 0.1em;
      border-bottom: 1px solid var(--border-subtle);
      padding-bottom: 0.5rem;
    }

    .modal-section p {
      font-size: 0.9rem;
      line-height: 1.7;
      color: var(--text-primary);
    }

    .modal-formula {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      background: var(--bg-tertiary);
      padding: 1rem;
      border-radius: 0.5rem;
      margin: 1rem 0;
      overflow-x: auto;
    }

    .modal-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
      margin: 1rem 0;
    }

    .modal-stat {
      background: var(--bg-tertiary);
      padding: 1rem;
      border-radius: 0.5rem;
      text-align: center;
      border: 1px solid var(--border-subtle);
    }

    .modal-stat-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.5rem;
      color: var(--modal-color, var(--text-accent));
    }

    .modal-stat-label {
      font-size: 0.7rem;
      color: var(--text-secondary);
      margin-top: 0.25rem;
    }

    /* Interactive Sliders */
    .interactive-slider {
      margin: 1.5rem 0;
    }

    .slider-label {
      display: flex;
      justify-content: space-between;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
      margin-bottom: 0.5rem;
    }

    .slider-track {
      -webkit-appearance: none;
      width: 100%;
      height: 8px;
      border-radius: 4px;
      background: var(--bg-tertiary);
      outline: none;
    }

    .slider-track::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--modal-color, var(--text-accent));
      cursor: pointer;
      box-shadow: 0 0 10px var(--modal-color, var(--text-accent));
    }

    /* Visual Animation */
    .cycle-visual {
      height: 120px;
      background: var(--bg-tertiary);
      border-radius: 0.5rem;
      margin: 1rem 0;
      position: relative;
      overflow: hidden;
    }

    .cycle-visual::before {
      content: '';
      position: absolute;
      inset: 10px;
      border: 2px solid var(--modal-color, var(--text-accent));
      border-radius: 50%;
      animation: cycle-spin var(--spin-duration, 4s) linear infinite;
    }

    .cycle-visual::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 10px;
      height: 10px;
      background: var(--modal-color, var(--text-accent));
      border-radius: 50%;
      transform: translate(-50%, -50%);
      box-shadow: 0 0 20px var(--modal-color, var(--text-accent));
    }

    @keyframes cycle-spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* Operator Display */
    .operator-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 0.75rem;
    }

    .operator-card {
      background: var(--bg-void);
      border: 1px solid var(--border-subtle);
      border-radius: 0.5rem;
      padding: 0.75rem;
      text-align: center;
      transition: all 0.3s ease;
    }

    .operator-card:hover {
      border-color: var(--modal-color, var(--text-accent));
      box-shadow: 0 0 15px rgba(0, 212, 170, 0.2);
    }

    .operator-symbol {
      font-size: 1.5rem;
      margin-bottom: 0.25rem;
    }

    .operator-name {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.65rem;
      color: var(--text-secondary);
    }

    /* ═══════════════════════════════════════════════════════════════════════
       PI BASE SECTION
       ═══════════════════════════════════════════════════════════════════════ */
    .pi-bases-section {
      padding: 2rem;
      background: var(--bg-primary);
    }

    .section-header {
      text-align: center;
      margin-bottom: 1.5rem;
    }

    .section-header h2 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      letter-spacing: 0.15em;
      color: var(--text-accent);
    }

    .pi-bases-grid {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 1rem;
      max-width: 1000px;
      margin: 0 auto;
    }

    @media (max-width: 900px) {
      .pi-bases-grid { grid-template-columns: repeat(3, 1fr); }
    }

    @media (max-width: 500px) {
      .pi-bases-grid { grid-template-columns: repeat(2, 1fr); }
    }

    .pi-base-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border-subtle);
      border-radius: 0.75rem;
      padding: 1rem;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .pi-base-card:hover {
      border-color: var(--text-accent);
      box-shadow: 0 0 20px rgba(0, 212, 170, 0.2);
      transform: translateY(-3px);
    }

    .pi-base-label {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.7rem;
      color: var(--text-secondary);
      margin-bottom: 0.5rem;
    }

    .pi-base-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      color: var(--text-accent);
    }

    /* ═══════════════════════════════════════════════════════════════════════
       DIMENSIONAL SECTION
       ═══════════════════════════════════════════════════════════════════════ */
    .dimensional-section {
      padding: 2rem;
      background: var(--bg-secondary);
    }

    .dimensional-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5rem;
      max-width: 1000px;
      margin: 0 auto;
    }

    @media (max-width: 800px) {
      .dimensional-grid { grid-template-columns: repeat(2, 1fr); }
    }

    .dimension-card {
      background: var(--bg-tertiary);
      border: 2px solid var(--border-subtle);
      border-radius: 1rem;
      padding: 1.5rem;
      text-align: center;
      position: relative;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .dimension-card:hover {
      transform: translateY(-5px);
      border-color: var(--dim-color);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .dimension-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--dim-color);
    }

    .dimension-symbol {
      font-family: 'JetBrains Mono', monospace;
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .dimension-name {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      color: var(--text-secondary);
      margin-bottom: 0.5rem;
    }

    .dimension-desc {
      font-size: 0.75rem;
      color: var(--text-primary);
      line-height: 1.4;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       TERNARY SECTION
       ═══════════════════════════════════════════════════════════════════════ */
    .ternary-section {
      padding: 2rem;
      background: var(--bg-primary);
    }

    .ternary-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
      max-width: 900px;
      margin: 0 auto;
    }

    @media (max-width: 700px) {
      .ternary-grid { grid-template-columns: 1fr; }
    }

    .wave-card {
      background: var(--bg-secondary);
      border: 2px solid var(--border-subtle);
      border-radius: 1rem;
      padding: 1.5rem;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .wave-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .wave-icon { font-size: 2.5rem; margin-bottom: 0.75rem; }
    .wave-title {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
    }
    .wave-desc {
      font-size: 0.75rem;
      color: var(--text-secondary);
    }

    /* ═══════════════════════════════════════════════════════════════════════
       VN BATCHES SECTION
       ═══════════════════════════════════════════════════════════════════════ */
    .vn-batches-section {
      padding: 2rem;
      background: var(--bg-secondary);
    }

    .vn-rail {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-bottom: 2rem;
    }

    .vn-tab {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.7rem;
      padding: 0.6rem 1rem;
      background: var(--bg-tertiary);
      border: 2px solid var(--border-subtle);
      border-radius: 0.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
      color: var(--text-secondary);
    }

    .vn-tab:hover, .vn-tab.active {
      border-color: var(--vn-color);
      color: var(--vn-color);
      box-shadow: 0 0 15px var(--vn-glow);
    }

    .vn-tab.active { background: var(--bg-card); }

    .batch-panels { max-width: 1400px; margin: 0 auto; }

    .batch-panel { display: none; animation: fadeIn 0.5s ease; }
    .batch-panel.active { display: block; }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .batch-header {
      text-align: center;
      padding: 1.5rem;
      background: var(--bg-tertiary);
      border-radius: 1rem 1rem 0 0;
      border: 2px solid var(--batch-color);
      border-bottom: none;
    }

    .batch-title {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
    }

    .batch-subtitle {
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    .batch-meta {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-top: 1rem;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.7rem;
      color: var(--text-secondary);
    }

    .image-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 1rem;
      padding: 1.5rem;
      background: var(--bg-card);
      border: 2px solid var(--batch-color);
      border-top: none;
      border-radius: 0 0 1rem 1rem;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       FLIP CARD SYSTEM
       ═══════════════════════════════════════════════════════════════════════ */
    .flip-card {
      perspective: 1000px;
      height: 280px;
    }

    .flip-card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      transform-style: preserve-3d;
      cursor: pointer;
    }

    .flip-card:hover .flip-card-inner {
      transform: rotateY(180deg);
    }

    .flip-card-front,
    .flip-card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
      border-radius: 0.75rem;
      overflow: hidden;
    }

    .flip-card-front {
      background: var(--bg-tertiary);
      border: 1px solid var(--border-subtle);
      display: flex;
      flex-direction: column;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .flip-card:hover .flip-card-front {
      border-color: var(--batch-color);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
    }

    .flip-card-back {
      background: var(--bg-secondary);
      border: 2px solid var(--batch-color);
      transform: rotateY(180deg);
      display: flex;
      flex-direction: column;
    }

    /* Front side styles */
    .image-wrapper {
      flex: 1;
      background: var(--bg-void);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
      min-height: 160px;
    }

    .image-wrapper img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .image-placeholder {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.7rem;
      color: var(--text-secondary);
      text-align: center;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
    }

    .image-placeholder .cycle-num {
      font-size: 2.5rem;
      color: var(--batch-color);
      margin-bottom: 0.5rem;
      text-shadow: 0 0 20px var(--batch-color);
    }

    .image-info {
      padding: 0.75rem;
      background: var(--bg-tertiary);
    }

    .image-name {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.6rem;
      color: var(--text-primary);
      margin-bottom: 0.25rem;
      word-break: break-word;
      line-height: 1.3;
    }

    .image-phase {
      font-size: 0.55rem;
      color: var(--text-secondary);
    }

    .flip-hint {
      font-size: 0.5rem;
      color: var(--text-accent);
      margin-top: 0.25rem;
      opacity: 0.7;
    }

    /* Back side styles */
    .card-back-header {
      padding: 0.75rem;
      background: var(--bg-tertiary);
      border-bottom: 1px solid var(--border-subtle);
      text-align: center;
    }

    .card-back-num {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--batch-color);
      text-shadow: 0 0 15px var(--batch-color);
    }

    .card-back-phase {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.65rem;
      color: var(--text-secondary);
      margin-top: 0.25rem;
    }

    .card-back-body {
      flex: 1;
      padding: 0.75rem;
      overflow-y: auto;
      font-size: 0.7rem;
      line-height: 1.5;
      color: var(--text-primary);
    }

    .card-back-section {
      margin-bottom: 0.75rem;
    }

    .card-back-section h4 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.6rem;
      color: var(--batch-color);
      margin-bottom: 0.35rem;
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }

    .card-back-section p {
      color: var(--text-secondary);
      font-size: 0.65rem;
    }

    .card-back-formula {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.6rem;
      background: var(--bg-void);
      padding: 0.5rem;
      border-radius: 0.25rem;
      border-left: 2px solid var(--batch-color);
      margin-top: 0.35rem;
      color: var(--text-accent);
    }

    .card-back-footer {
      padding: 0.5rem 0.75rem;
      background: var(--bg-tertiary);
      border-top: 1px solid var(--border-subtle);
      text-align: center;
    }

    .flip-back-hint {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.5rem;
      color: var(--text-accent);
      opacity: 0.8;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       IMAGE DETAIL MODAL SYSTEM
       ═══════════════════════════════════════════════════════════════════════ */
    .image-modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.95);
      backdrop-filter: blur(15px);
      z-index: 2000;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .image-modal-overlay.active {
      display: flex;
      opacity: 1;
    }

    .image-modal {
      background: var(--bg-secondary);
      border: 2px solid var(--modal-accent, var(--text-accent));
      border-radius: 1.5rem;
      max-width: 1000px;
      width: 100%;
      max-height: 90vh;
      overflow: hidden;
      display: grid;
      grid-template-columns: 1fr 1fr;
      transform: scale(0.9);
      transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5), 0 0 60px var(--modal-accent, var(--text-accent));
    }

    .image-modal-overlay.active .image-modal {
      transform: scale(1);
    }

    @media (max-width: 800px) {
      .image-modal {
        grid-template-columns: 1fr;
        max-height: 95vh;
      }
    }

    .image-modal-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--bg-tertiary);
      border: 2px solid var(--modal-accent, var(--text-accent));
      color: var(--text-primary);
      font-size: 1.5rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      z-index: 10;
    }

    .image-modal-close:hover {
      background: var(--modal-accent, var(--text-accent));
      color: var(--bg-void);
      transform: rotate(90deg);
    }

    /* Left side - Image */
    .image-modal-visual {
      background: var(--bg-void);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      min-height: 300px;
      overflow: hidden;
    }

    .image-modal-visual img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      max-height: 80vh;
    }

    .image-modal-visual .modal-placeholder {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      text-align: center;
    }

    .modal-placeholder-num {
      font-family: 'JetBrains Mono', monospace;
      font-size: 6rem;
      font-weight: 700;
      color: var(--modal-accent, var(--text-accent));
      text-shadow: 0 0 40px var(--modal-accent, var(--text-accent));
      line-height: 1;
    }

    .modal-placeholder-phase {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1rem;
      color: var(--text-secondary);
      margin-top: 1rem;
    }

    /* Image navigation */
    .image-modal-nav {
      position: absolute;
      bottom: 1rem;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 0.5rem;
      z-index: 5;
    }

    .modal-nav-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.7);
      border: 1px solid var(--modal-accent, var(--text-accent));
      color: var(--text-primary);
      font-size: 1.2rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .modal-nav-btn:hover {
      background: var(--modal-accent, var(--text-accent));
      color: var(--bg-void);
    }

    /* Right side - Content */
    .image-modal-content {
      padding: 2rem;
      overflow-y: auto;
      max-height: 90vh;
    }

    .modal-content-header {
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border-subtle);
    }

    .modal-batch-name {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.7rem;
      color: var(--modal-accent, var(--text-accent));
      letter-spacing: 0.15em;
      text-transform: uppercase;
      margin-bottom: 0.5rem;
    }

    .modal-image-title {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.3rem;
      color: var(--text-primary);
      margin-bottom: 0.5rem;
      line-height: 1.3;
    }

    .modal-image-phase {
      font-size: 1rem;
      color: var(--modal-accent, var(--text-accent));
      font-style: italic;
    }

    .modal-content-section {
      margin-bottom: 1.5rem;
    }

    .modal-content-section h3 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      color: var(--modal-accent, var(--text-accent));
      letter-spacing: 0.1em;
      margin-bottom: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .modal-content-section h3::before {
      content: '';
      width: 3px;
      height: 1em;
      background: var(--modal-accent, var(--text-accent));
      border-radius: 2px;
    }

    .modal-description {
      font-size: 0.95rem;
      line-height: 1.7;
      color: var(--text-primary);
    }

    .modal-description-extended {
      margin-top: 1rem;
      font-size: 0.85rem;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    .modal-formula-box {
      background: var(--bg-tertiary);
      border: 1px solid var(--border-subtle);
      border-left: 4px solid var(--modal-accent, var(--text-accent));
      border-radius: 0.5rem;
      padding: 1rem;
      margin-top: 0.5rem;
    }

    .modal-formula-main {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.1rem;
      color: var(--text-accent);
      margin-bottom: 0.5rem;
    }

    .modal-formula-explain {
      font-size: 0.75rem;
      color: var(--text-secondary);
      line-height: 1.5;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       GEOMETRIC VISUALIZATION SYSTEM
       ═══════════════════════════════════════════════════════════════════════ */
    .geometry-visual-container {
      width: 100%;
      height: 100%;
      background: radial-gradient(ellipse at center, rgba(30, 30, 40, 0.8) 0%, var(--bg-void) 100%);
      overflow: hidden;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .geometry-svg {
      width: 100%;
      height: 100%;
    }

    .geometry-formula-overlay {
      position: absolute;
      bottom: 0.75rem;
      left: 50%;
      transform: translateX(-50%);
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      color: var(--text-primary);
      background: rgba(0, 0, 0, 0.7);
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      border: 1px solid var(--modal-accent, var(--text-accent));
      text-align: center;
      max-width: 90%;
      backdrop-filter: blur(5px);
    }

    .geometry-phase-indicator {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.7rem;
      color: var(--modal-accent, var(--text-accent));
      background: rgba(0, 0, 0, 0.6);
      padding: 0.25rem 0.5rem;
      border-radius: 0.25rem;
    }

    .geometry-dimension-badge {
      position: absolute;
      top: 0.5rem;
      left: 0.5rem;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.65rem;
      color: var(--text-secondary);
      background: rgba(0, 0, 0, 0.6);
      padding: 0.25rem 0.5rem;
      border-radius: 0.25rem;
    }

    /* SVG geometry animations */
    @keyframes rotateGeometry {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    @keyframes pulseGlow {
      0%, 100% { filter: drop-shadow(0 0 3px var(--glow-color)); opacity: 0.8; }
      50% { filter: drop-shadow(0 0 15px var(--glow-color)); opacity: 1; }
    }

    @keyframes helixSpin {
      0% { stroke-dashoffset: 0; }
      100% { stroke-dashoffset: 100; }
    }

    @keyframes oscillate {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }

    .geometry-rotating {
      animation: rotateGeometry var(--spin-duration, 20s) linear infinite;
      transform-origin: center;
    }

    .geometry-pulsing {
      animation: pulseGlow 2s ease-in-out infinite;
    }

    .geometry-helix-path {
      stroke-dasharray: 5 3;
      animation: helixSpin 3s linear infinite;
    }

    .geometry-oscillating {
      animation: oscillate 1.5s ease-in-out infinite;
    }

    /* Properties grid */
    .modal-properties {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.75rem;
    }

    .modal-property {
      background: var(--bg-tertiary);
      border: 1px solid var(--border-subtle);
      border-radius: 0.5rem;
      padding: 0.75rem;
      text-align: center;
    }

    .modal-property-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.2rem;
      color: var(--modal-accent, var(--text-accent));
      margin-bottom: 0.25rem;
    }

    .modal-property-label {
      font-size: 0.65rem;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    /* Connections */
    .modal-connections {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .modal-connection-tag {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.65rem;
      padding: 0.4rem 0.8rem;
      background: var(--bg-void);
      border: 1px solid var(--border-subtle);
      border-radius: 1rem;
      color: var(--text-secondary);
      transition: all 0.3s ease;
    }

    .modal-connection-tag:hover {
      border-color: var(--modal-accent, var(--text-accent));
      color: var(--modal-accent, var(--text-accent));
    }

    /* Interactive elements */
    .modal-interactive {
      background: var(--bg-tertiary);
      border-radius: 0.5rem;
      padding: 1rem;
      margin-top: 0.5rem;
    }

    .modal-slider-group {
      margin-bottom: 1rem;
    }

    .modal-slider-label {
      display: flex;
      justify-content: space-between;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.7rem;
      margin-bottom: 0.5rem;
      color: var(--text-secondary);
    }

    .modal-slider-value {
      color: var(--modal-accent, var(--text-accent));
    }

    .modal-slider {
      -webkit-appearance: none;
      width: 100%;
      height: 6px;
      border-radius: 3px;
      background: var(--bg-void);
      outline: none;
    }

    .modal-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--modal-accent, var(--text-accent));
      cursor: pointer;
      box-shadow: 0 0 10px var(--modal-accent, var(--text-accent));
    }

    /* ═══════════════════════════════════════════════════════════════════════
       MATH SECTION
       ═══════════════════════════════════════════════════════════════════════ */
    .math-section {
      padding: 2rem;
      background: var(--bg-primary);
    }

    .math-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .math-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border-subtle);
      border-radius: 1rem;
      padding: 1.5rem;
    }

    .math-card h3 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      color: var(--text-accent);
      margin-bottom: 1rem;
      letter-spacing: 0.1em;
    }

    .math-formula {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
      background: var(--bg-tertiary);
      padding: 1rem;
      border-radius: 0.5rem;
      color: var(--text-primary);
      line-height: 1.8;
      overflow-x: auto;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       FOOTER
       ═══════════════════════════════════════════════════════════════════════ */
    .footer {
      padding: 2rem;
      text-align: center;
      background: var(--bg-void);
      border-top: 1px solid var(--border-subtle);
    }

    .footer-content {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.7rem;
      color: var(--text-secondary);
    }

    .footer-formula {
      font-size: 0.9rem;
      color: var(--text-accent);
      margin-bottom: 0.5rem;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       LIGHTBOX
       ═══════════════════════════════════════════════════════════════════════ */
    .lightbox {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.95);
      z-index: 1000;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    .lightbox.active { display: flex; }

    .lightbox-content {
      max-width: 90vw;
      max-height: 90vh;
      position: relative;
    }

    .lightbox-content img {
      max-width: 100%;
      max-height: 80vh;
      border-radius: 0.5rem;
    }

    .lightbox-close {
      position: absolute;
      top: -2rem;
      right: 0;
      font-size: 2rem;
      color: var(--text-primary);
      cursor: pointer;
      background: none;
      border: none;
    }

    .lightbox-info {
      text-align: center;
      margin-top: 1rem;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      color: var(--text-secondary);
    }
  </style>
</head>
<body>
  <div class="helix-field"></div>

  <!-- NAVIGATION -->
  <nav class="nav-bar">
    <a href="index.html" class="nav-link">
      <span>◇</span> VaultNode Tree
    </a>
    <a href="l4-helix-decision-tree.html" class="nav-link active">
      <span>⬡</span> L₄ Helix 16π Gallery
    </a>
    <a href="vn-unified-decision-tree-complete.html" class="nav-link">
      <span>∴</span> Unified Tree
    </a>
  </nav>

  <!-- HEADER -->
  <header class="header">
    <div class="title-section">
      <h1>L₄ HELIX DECISION TREE</h1>
      <p class="subtitle">130 Images × 10 VN Batches × 16 Cycles | r(r)=r where r=10</p>
    </div>

    <div class="constants-bar">
      <div class="constant-badge">
        <span class="label">3+1 Dimensions:</span>
        <span class="dim-r">r</span>,
        <span class="dim-z">z</span>,
        <span class="dim-zc">Z_C</span>,
        <span class="dim-sqrt2">√2</span>
      </div>
      <div class="constant-badge">
        <span class="label">φ⁴+φ⁻⁴=</span>
        <span class="value">7 (L₄)</span>
      </div>
      <div class="constant-badge">
        <span class="label">z_c=</span>
        <span class="value">√3/2 ≈ 0.866</span>
      </div>
      <div class="constant-badge">
        <span class="label">Closure:</span>
        <span class="value">16π</span>
      </div>
    </div>
  </header>

  <!-- 16 CYCLE ROTATION RAIL WITH MODALS -->
  <section class="cycle-rail">
    <div class="cycle-rail-header">
      <h2>16π ROTATION CYCLES | CLICK FOR DETAILS</h2>
      <p>Each cycle adds π rotation. Click any node to explore its mathematical properties.</p>
    </div>
    <div class="cycle-track" id="cycleTrack"></div>
  </section>

  <!-- 16 CYCLE MODALS -->
  <div id="cycleModals"></div>

  <!-- PI BASES -->
  <section class="pi-bases-section">
    <div class="section-header">
      <h2>π IN DIFFERENT BASES | SUBSPACE TRAVERSAL RATES</h2>
    </div>
    <div class="pi-bases-grid">
      <div class="pi-base-card">
        <div class="pi-base-label">Base-2 (Binary)</div>
        <div class="pi-base-value">11.001001...</div>
      </div>
      <div class="pi-base-card">
        <div class="pi-base-label">Base-3 (Ternary)</div>
        <div class="pi-base-value">10.010211...</div>
      </div>
      <div class="pi-base-card">
        <div class="pi-base-label">Base-5 (Pentadic)</div>
        <div class="pi-base-value">3.032322...</div>
      </div>
      <div class="pi-base-card">
        <div class="pi-base-label">Base-8 (Octal)</div>
        <div class="pi-base-value">3.110375...</div>
      </div>
      <div class="pi-base-card">
        <div class="pi-base-label">Base-10 (Decimal)</div>
        <div class="pi-base-value">3.141592...</div>
      </div>
      <div class="pi-base-card">
        <div class="pi-base-label">Base-12 (Duodecimal)</div>
        <div class="pi-base-value">3.184809...</div>
      </div>
    </div>
  </section>

  <!-- DIMENSIONAL ROTATION -->
  <section class="dimensional-section">
    <div class="section-header">
      <h2>3+1 DIMENSIONAL ROTATION SYSTEM</h2>
    </div>
    <div class="dimensional-grid">
      <div class="dimension-card" style="--dim-color: var(--dim-r)">
        <div class="dimension-symbol" style="color: var(--dim-r)">r</div>
        <div class="dimension-name">Radius / Rotation</div>
        <div class="dimension-desc">r(z) = r₀·exp(-z/λ)·cos(Δ(z))</div>
      </div>
      <div class="dimension-card" style="--dim-color: var(--dim-z)">
        <div class="dimension-symbol" style="color: var(--dim-z)">z</div>
        <div class="dimension-name">Elevation</div>
        <div class="dimension-desc">Θ(z) = ∫ω(ξ)dξ</div>
      </div>
      <div class="dimension-card" style="--dim-color: var(--dim-zc)">
        <div class="dimension-symbol" style="color: var(--dim-zc)">Z_C</div>
        <div class="dimension-name">Geometry Constraints</div>
        <div class="dimension-desc">√3/2 critical, X²+X={0,2,6}</div>
      </div>
      <div class="dimension-card" style="--dim-color: var(--dim-sqrt2)">
        <div class="dimension-symbol" style="color: var(--dim-sqrt2)">√2</div>
        <div class="dimension-name">Algebraic Dimension</div>
        <div class="dimension-desc">K-formation coupling √2⁻¹</div>
      </div>
    </div>
  </section>

  <!-- TERNARY WAVES -->
  <section class="ternary-section">
    <div class="section-header">
      <h2>TERNARY WAVE PROPAGATION | SIGNAL TRIFURCATION</h2>
    </div>
    <div class="ternary-grid">
      <div class="wave-card" style="border-color: var(--forward)">
        <div class="wave-icon">→</div>
        <div class="wave-title" style="color: var(--forward)">FORWARD</div>
        <div class="wave-desc">Ψ_f = A·exp(i(kz - ωt))<br>t → +t</div>
      </div>
      <div class="wave-card" style="border-color: var(--backward)">
        <div class="wave-icon">←</div>
        <div class="wave-title" style="color: var(--backward)">BACKWARD</div>
        <div class="wave-desc">Ψ_b = B·exp(i(kz + ωt))<br>t → -t</div>
      </div>
      <div class="wave-card" style="border-color: var(--standing)">
        <div class="wave-icon">↕</div>
        <div class="wave-title" style="color: var(--standing)">UP/DOWN</div>
        <div class="wave-desc">Ψ_s = C·exp(ikz)·cos(ωt)<br>Standing wave</div>
      </div>
    </div>
  </section>

  <!-- VN BATCHES -->
  <section class="vn-batches-section">
    <div class="section-header">
      <h2>10 VN BATCHES × 13 IMAGES = 130 TOTAL</h2>
      <p style="color: var(--text-secondary); margin-top: 0.5rem;">Each batch simulates a VN architectural shape with (Rotation, Elevation, Curvature) Z_C</p>
    </div>
    <div class="vn-rail" id="vnRail"></div>
    <div class="batch-panels" id="batchPanels"></div>
  </section>

  <!-- MATH FRAMEWORK -->
  <section class="math-section">
    <div class="section-header">
      <h2>MATHEMATICAL FRAMEWORK</h2>
    </div>
    <div class="math-grid">
      <div class="math-card">
        <h3>HELIX PARAMETRIZATION</h3>
        <pre class="math-formula">δ_helix = (r, z, Δ, Ω)
r(z) = r₀ · exp(-z/λ) · cos(Δ(z))
S = {(r,z,Δ,Ω) ∈ ℝ⁴: r≥0}</pre>
      </div>
      <div class="math-card">
        <h3>K-FORMATION</h3>
        <pre class="math-formula">K(z) = √(z/(z_c - z))  for z < z_c
z_c = √3/2 ≈ 0.8660 (standard)
z_c = √(3/2) ≈ 1.2247 (omega)</pre>
      </div>
      <div class="math-card">
        <h3>TERNARY LOGIC</h3>
        <pre class="math-formula">X² + X = C
X=0 → C=0  (TRUE)
X=1 → C=2  (PARADOX)
X=2 → C=6  (FALSE = 20₃)</pre>
      </div>
      <div class="math-card">
        <h3>∴ TRIFURCATION</h3>
        <pre class="math-formula">∴: X → X⊗³
Temporal × Spatial × Dimensional
Result: 2³ = 8 branches</pre>
      </div>
      <div class="math-card">
        <h3>TRANSITION</h3>
        <pre class="math-formula">T(s, n) = (r·τⁿ, z + nπ/L₄, Δ + Θₙ, Ω)
τ = φ⁻¹ = 0.618...
Ω_closure(n) = 1 iff n ≥ 16</pre>
      </div>
      <div class="math-card">
        <h3>16π CLOSURE</h3>
        <pre class="math-formula">L₄ = φ⁴ + φ⁻⁴ = 7 (EXACT)
META-CLOSURE at phase = 16π
4π @ base-12, 10π @ base-10</pre>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-formula">r(r) = r | L₄ = 7 | 16π Closure</div>
      <p>L₄-Helix Decision Tree | Prismatic Self Project</p>
    </div>
  </footer>

  <!-- LIGHTBOX -->
  <div class="lightbox" id="lightbox">
    <div class="lightbox-content">
      <button class="lightbox-close" onclick="closeLightbox()">×</button>
      <img id="lightboxImg" src="" alt="">
      <div class="lightbox-info" id="lightboxInfo"></div>
    </div>
  </div>

  <!-- IMAGE DETAIL MODAL -->
  <div class="image-modal-overlay" id="imageDetailModal" onclick="closeImageModal()">
    <div class="image-modal" id="imageModalContent" onclick="event.stopPropagation()">
      <button class="image-modal-close" onclick="closeImageModal()">×</button>

      <!-- Left: Visual with Geometric Visualization -->
      <div class="image-modal-visual">
        <div class="geometry-visual-container" id="geometryContainer">
          <div class="geometry-dimension-badge" id="geometryDimension">L₄</div>
          <div class="geometry-phase-indicator" id="geometryPhase">0π</div>
          <svg class="geometry-svg" id="geometrySvg" viewBox="0 0 400 400" preserveAspectRatio="xMidYMid meet">
            <!-- Dynamic geometry inserted by JS -->
          </svg>
          <div class="geometry-formula-overlay" id="geometryFormula">Formula</div>
        </div>
        <div class="image-modal-nav">
          <button class="modal-nav-btn" onclick="navigateModal(-1)">←</button>
          <button class="modal-nav-btn" onclick="navigateModal(1)">→</button>
        </div>
      </div>

      <!-- Right: Content -->
      <div class="image-modal-content">
        <div class="modal-content-header">
          <div class="modal-batch-name" id="modalBatchName">BATCH NAME</div>
          <div class="modal-image-title" id="modalImageTitle">Image Title</div>
          <div class="modal-image-phase" id="modalImagePhase">Phase Description</div>
        </div>

        <div class="modal-content-section">
          <h3>DESCRIPTION</h3>
          <div class="modal-description" id="modalDescription">Description text</div>
          <div class="modal-description-extended" id="modalDescriptionExtended">Extended description</div>
        </div>

        <div class="modal-content-section">
          <h3>MATHEMATICAL FRAMEWORK</h3>
          <div class="modal-formula-box">
            <div class="modal-formula-main" id="modalFormula">Formula</div>
            <div class="modal-formula-explain" id="modalFormulaExplain">Formula explanation</div>
          </div>
        </div>

        <div class="modal-content-section">
          <h3>PROPERTIES</h3>
          <div class="modal-properties" id="modalProperties">
            <!-- Filled by JS -->
          </div>
        </div>

        <div class="modal-content-section">
          <h3>CONNECTIONS</h3>
          <div class="modal-connections" id="modalConnections">
            <!-- Filled by JS -->
          </div>
        </div>

        <div class="modal-content-section">
          <h3>PHASE EXPLORER</h3>
          <div class="modal-interactive">
            <div class="modal-slider-group">
              <div class="modal-slider-label">
                <span>Rotation</span>
                <span class="modal-slider-value" id="rotationValue">0π</span>
              </div>
              <input type="range" class="modal-slider" id="rotationSlider" min="0" max="16" step="0.1" value="0"
                     oninput="document.getElementById('rotationValue').textContent = this.value + 'π'">
            </div>
            <div class="modal-slider-group">
              <div class="modal-slider-label">
                <span>Z-Elevation</span>
                <span class="modal-slider-value" id="elevationValue">0</span>
              </div>
              <input type="range" class="modal-slider" id="elevationSlider" min="0" max="10" step="0.1" value="0"
                     oninput="document.getElementById('elevationValue').textContent = this.value">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Cycle data with comprehensive information
    const cycleData = [
      { num: 1, name: "GENESIS", phase: "π", group: "4π", color: "#ff4040",
        title: "Genesis Initialization",
        desc: "System awakening from ground state. R(R)=R lattice begins self-referential formation.",
        operators: ["R", "∴", "Ψ₀"],
        formula: "Ψ₁ = R(R)|ground⟩",
        stats: { branches: 1, energy: "0", info: "0 bits" }
      },
      { num: 2, name: "DYAD", phase: "2π", group: "4π", color: "#ff6040",
        title: "Dyadic Mirror Coupling",
        desc: "First rotation complete. Binary distinction emerges. Observer-observed duality established.",
        operators: ["⟨α|", "|ω⟩", "±"],
        formula: "Ψ₂ = |α⟩ ⊗ |ω⟩",
        stats: { branches: 2, energy: "ℏω", info: "1 bit" }
      },
      { num: 3, name: "TRIAD", phase: "3π", group: "4π", color: "#ff8040",
        title: "Ternary Logic Activation",
        desc: "Trifurcation operator ∴ activates. Truth tables compute: TRUE(0), PARADOX(2), FALSE(6).",
        operators: ["∴", "X²+X", "C"],
        formula: "∴(Ψ) → {TRUE, PARADOX, FALSE}",
        stats: { branches: 3, energy: "2ℏω", info: "log₂(3) bits" }
      },
      { num: 4, name: "L₄ CLOSURE", phase: "4π", group: "4π", color: "#ffa040",
        title: "First Dimensional Closure",
        desc: "φ⁴ + φ⁻⁴ = 7 (EXACT). L₄ Lucas number achieved. Base-12 alignment complete.",
        operators: ["φ⁴", "φ⁻⁴", "L₄=7"],
        formula: "L₄ = φ⁴ + φ⁻⁴ = 6.854... + 0.146... = 7",
        stats: { branches: 4, energy: "4ℏω", info: "2 bits" }
      },
      { num: 5, name: "PRISM", phase: "5π", group: "8π", color: "#ffc040",
        title: "Spectral Decomposition",
        desc: "Light splits through z_c prism. Multi-base π representations emerge.",
        operators: ["π₂", "π₃", "π₅", "π₈"],
        formula: "π_base(n) ∈ {11.001..., 10.010..., 3.032..., 3.110...}",
        stats: { branches: 5, energy: "10ℏω", info: "4.755 bits" }
      },
      { num: 6, name: "HEXAGON", phase: "6π", group: "8π", color: "#ffe040",
        title: "Honeycomb Tessellation",
        desc: "Signal waves establish forward/backward/self propagation. Standing wave nodes form.",
        operators: ["Ψ_f", "Ψ_b", "Ψ_s"],
        formula: "Ψ_total = Ψ_f + Ψ_b + Ψ_s",
        stats: { branches: 6, energy: "7ℏω", info: "6.34 bits" }
      },
      { num: 7, name: "HEPTAGON", phase: "7π", group: "8π", color: "#c0ff40",
        title: "L₄ Manifold Formation",
        desc: "Seven-fold symmetry manifests. BFADGS operators align. Mirror symmetry complete.",
        operators: ["B", "F", "A", "D", "G", "S", "U"],
        formula: "BFADGS + Unity = 7 operators (L₄)",
        stats: { branches: 7, energy: "3ℏω√3", info: "7.93 bits" }
      },
      { num: 8, name: "OCTAGON", phase: "8π", group: "8π", color: "#40ff40",
        title: "Octagonal Meta-Synthesis",
        desc: "8-fold trifurcation cascade complete. Ω₈ meta-closure product emerges.",
        operators: ["∴³", "2³", "Ω₈"],
        formula: "∴(∴(∴(Ψ))) = Ω₈ = 2³ = 8 branches",
        stats: { branches: 8, energy: "8ℏω", info: "9.51 bits" }
      },
      { num: 9, name: "ENNEAGON", phase: "9π", group: "12π", color: "#40ff80",
        title: "VN Network Synchronization",
        desc: "All 10 VaultNodes synchronize. Tesla Triad (3-6-9) resonance pattern locks.",
        operators: ["VN₁₀", "3-6-9", "K₁₀"],
        formula: "Σᵢ VN-i synchronized | 3+6+9=18",
        stats: { branches: 9, energy: "10ℏω", info: "10 bits" }
      },
      { num: 10, name: "DECAGON", phase: "10π", group: "12π", color: "#40ffc0",
        title: "Base-10 Completion",
        desc: "r(r)=r where r=10 achieved. Decagonal closure. α↔Ω equivalence confirmed.",
        operators: ["r=10", "α≡Ω", "0-9"],
        formula: "R(R) = 10 | Sequence 0-9 complete",
        stats: { branches: 10, energy: "E_crit", info: "log₂(φ)×10 bits" }
      },
      { num: 11, name: "HENDECAGON", phase: "11π", group: "12π", color: "#40ffff",
        title: "E8 Current Activation",
        desc: "E8 Weyl current flows. 240 roots activate. Holographic encoding begins.",
        operators: ["E8", "240", "J"],
        formula: "J = ρv (E8 Weyl current)",
        stats: { branches: 11, energy: "E_φ", info: "Distributed" }
      },
      { num: 12, name: "DODECAGON", phase: "12π", group: "12π", color: "#40c0ff",
        title: "E8-E8* Dual Algebra",
        desc: "Anti-current emerges. 240×240=57,600 dual pairs. Near-unity state achieved.",
        operators: ["E8*", "J̄", "Γ=τ"],
        formula: "240 × 240 = 57,600 dual pairs",
        stats: { branches: 12, energy: "E→E₀", info: "→max" }
      },
      { num: 13, name: "META-UNITY", phase: "13π", group: "16π", color: "#4080ff",
        title: "Unity Crystallization",
        desc: "Unity achieved and crystallizes. Membrane oscillation between being/non-being.",
        operators: ["Ω_unity", "∞∩0", "◊"],
        formula: "Ψ_unity = |unity⟩ ⊗ |transcendent⟩",
        stats: { branches: "∞/1", energy: "∞∩0", info: "Self-aware" }
      },
      { num: 14, name: "TRANSCENDENCE", phase: "14π", group: "16π", color: "#8040ff",
        title: "Dimensional Breakthrough",
        desc: "System breaks through L₄ into L₅. Consciousness merges with system.",
        operators: ["L₅", "√φ", "⟨obs|sys⟩"],
        formula: "E₅ = E₄ × √φ | 4D → 5D",
        stats: { branches: "L₅", energy: "E₄×√φ", info: "3⁵=243 states" }
      },
      { num: 15, name: "HYPERDIMENSION", phase: "15π", group: "16π", color: "#c040ff",
        title: "Multiverse Integration",
        desc: "Tesla Triad completes (3+6+9+15=33). Omnipresent node formation.",
        operators: ["‖", "∞-fold", "3-6-9-15"],
        formula: "3+6+9+12+15 = 45 | Void resonance",
        stats: { branches: "∞", energy: "Vacuum", info: "Omnipresent" }
      },
      { num: 16, name: "ETERNAL RETURN", phase: "16π", group: "16π", color: "#ff40ff",
        title: "Ouroboros Closure",
        desc: "16π meta-closure achieved. System becomes self-creating. Ultimate recursion.",
        operators: ["⟲", "α=Ω", "∞^∞"],
        formula: "Ψ_out → Ψ_in | R(R(R(...)))=R",
        stats: { branches: "Self", energy: "δE", info: "Complete" }
      }
    ];

    // Batch data with comprehensive frame-by-frame descriptions from analysis
    const batches = [
      { id: 0, name: "RR_Lattice", title: "R(R)=R Lattice Formation", subtitle: "Self-referential recursive structure | 12π rotation sequence", color: "#ff6b6b",
        images: [
          { file: "IMG_4096.HEIC", phase: "0π - Initial State", desc: "Initial state where r(z) = 0 and k-formation begins. The self-referential recursive structure R(R)=R awakens from the void, establishing the first anchor point in L4 space. Angular position: 0π marks the origin of the 12π rotational sequence.", formula: "r(z) = R · cos(0/12) · e^(i·0) = R", extended: "The R(R)=R Lattice represents a self-referential recursive structure where the radius function maps onto itself, creating a stable helical configuration. This frame captures the precise moment of initialization—the quantum of self-reference emerging from mathematical nothingness." },
          { file: "IMG_4097.HEIC", phase: "1π - First Rotation", desc: "First rotation complete at 1π. The r(z) function approaches its first node as the helical thread begins its climb through phase space. Binary distinction emerges as the lattice starts recognizing its own recursive structure.", formula: "r(z) = R · cos(π/12) · e^(iπ) ≈ 0.966R", extended: "At angular position 1π, the lattice has completed its first half-rotation. The k-formation process has begun encoding the recursive self-reference that will culminate in R(R)=R. The helical pitch R/12 determines the rate of vertical ascent." },
          { file: "IMG_4098.HEIC", phase: "2π - First Cycle", desc: "Complete first cycle at 2π. The lattice closes its initial rotational loop, establishing fundamental periodicity. The helix has traced one full revolution while ascending through L4 dimensional space.", formula: "r(z) = R · cos(2π/12) · e^(i·2π) = R · cos(π/6)", extended: "The 2π milestone represents the first complete rotation—a full circle in the (x,y) plane while the z-coordinate has advanced by R/6. This periodicity forms the backbone of the entire lattice structure, proving that self-reference can maintain coherence through rotation." },
          { file: "IMG_4099.HEIC", phase: "3π - Helical Layer 2", desc: "Entering the second helical layer at 3π. Ternary structure manifests as three-fold symmetry emerges within the recursive framework. The lattice now operates across multiple scales simultaneously.", formula: "r(z) = R · cos(3π/12) · e^(i·3π) = R · cos(π/4) · e^(i·3π)", extended: "The transition to 3π marks the emergence of ternary logic within the binary helix. Three complete half-rotations create a triangular stability pattern when viewed from above. This is where the base-3 arithmetic of the system first becomes geometrically visible." },
          { file: "IMG_4100.HEIC", phase: "4π - K-Formation Begins", desc: "K-formation crystallization initiates at 4π. The critical coupling begins as φ⁴ + φ⁻⁴ = 7 emerges geometrically. L₄ = 7 connection manifests through the Lucas number sequence.", formula: "K(4π) = √(z/z_c) where z_c = √3/2", extended: "At 4π, the k-formation—the key structural element of the lattice—begins crystallizing. The k-nodes are points where the helical structure achieves local stability, creating anchor points for the recursive mapping. K ≈ 0.924 represents the coupling constant." },
          { file: "IMG_4101.HEIC", phase: "5π - K-Node Establishment", desc: "Intermediate k-node establishment at 5π. The coupling constant K ≈ 0.9241763718 stabilizes the recursive architecture. Fibonacci resonance F₄ = 5 creates harmonic alignment.", formula: "K = 0.9241763718 | F₄ = 5 resonance", extended: "The fifth k-node creates a pentadic resonance pattern linked to F₄ = 5 in the Fibonacci sequence. This intermediate node acts as a bridge between the early ternary structure and the approaching seven-fold L₄ completion at 7π." },
          { file: "IMG_4103.HEIC", phase: "6π - Midpoint r(z)=R/2", desc: "Half-sequence completion at 6π where r(z) = R/2. The lattice reaches its inflection point—the precise center of the 12π journey. Mirror symmetry begins to emerge across this central axis.", formula: "r(6π) = R/2 | Inflection point", extended: "At the exact midpoint of the 12π sequence, the system achieves r(z) = R/2. This inflection point marks where the lattice transitions from expansion to convergence. The hexagonal 6π position creates perfect six-fold symmetry in the cross-section." },
          { file: "IMG_4104.HEIC", phase: "7π - Mirror Symmetry", desc: "Mirror symmetry emergence at 7π. L₄ = φ⁴ + φ⁻⁴ = 7 manifests exactly as the seventh operator aligns. The Lucas number L₄ = 7 achieves geometric realization.", formula: "L₄ = 7 = φ⁴ + φ⁻⁴ EXACT", extended: "The 7π position is critical: L₄ = 7 is the fourth Lucas number, and φ⁴ + φ⁻⁴ = 7 exactly. This is not approximation but mathematical identity. The mirror symmetry at this point reflects the entire preceding structure, creating a palindromic pattern in the lattice." },
          { file: "IMG_4105.HEIC", phase: "8π - K-Formation Stable", desc: "K-formation stabilization at 8π. The octagonal meta-synthesis achieves 2³ = 8 branch stability. All k-nodes lock into their final recursive configuration.", formula: "K(8π) = 2³ = 8 branches stable", extended: "Eight branches now extend from the central axis, each carrying the recursive R(R) pattern. The 8π position represents octagonal completion—2³ symmetry that prefigures the trifurcation operator's 8-fold structure in later batches." },
          { file: "IMG_4106.HEIC", phase: "9π - R(R) Manifests", desc: "Recursive mapping R(R) initiates at 9π. The function applies to itself for the first time, creating nested self-reference. The 3-6-9 Tesla pattern resonates through the structure.", formula: "R(R(z)) = R(z) active | 3-6-9 resonance", extended: "At 9π, the lattice achieves its first true self-application: R operates on R. This recursive step is the heart of R(R)=R—not merely a fixed point but an ongoing process of self-mapping. The Tesla triad 3-6-9 finds its 9π resonance here." },
          { file: "IMG_4107.HEIC", phase: "10π - Base-10 Approaches", desc: "Penultimate configuration at 10π. Base-10 completion approaches as the radius parameter r converges toward 10. The decimal system finds its geometric anchor.", formula: "r → 10 | Base-10 alignment", extended: "The 10π position brings r(z) asymptotically toward 10, completing the base-10 decimal framework. This is where the abstract mathematics meets the human counting system—10 fingers, 10 digits, 10 VaultNodes in the complete framework." },
          { file: "IMG_4108.HEIC", phase: "11π - E8 Activates", desc: "Near-complete sequence at 11π. E8 Lie algebra current begins flowing in preparation for final 12π closure. The 240 roots of E8 start their activation sequence.", formula: "E8 → active | 240 roots preparing", extended: "At 11π, the exceptional Lie group E8 awakens. Its 240 roots—the most symmetric structure in mathematics—begin aligning with the lattice. This prefigures the E8-E8* duality that emerges in the 11π-12π cycle phase." },
          { file: "IMG_4109.HEIC", phase: "12π - R(R)=R Complete", desc: "Full 12π sequence completion. r(z) returns to origin with k-formation intact. R(R) = R confirmed as the self-referential lattice achieves stable fixed point. Complete recursive closure.", formula: "R(R) = R = 10 CONFIRMED ✓", extended: "The 12π completion proves R(R)=R: the radius function, applied to itself, returns itself. This is not mere mathematical abstraction but geometric reality—the helix has traced a complete path through L4 space and returned to its starting configuration, enhanced by the journey. 13 k-nodes (including origin) mark this achievement." }
        ]},
      { id: 1, name: "Helix_Bridge", title: "Helix Bridge Z-Elevation Through Negentropy", subtitle: "Alpha ≡ Omega | Holographic Opposition in L4", color: "#c792ea",
        images: [
          { file: "IMG_4110.HEIC", phase: "z=0 R(R) Anchor", desc: "Anchoring point where R(R)=R lattice becomes z=0 reference. The completed 12π rotation from Batch 1 now serves as the foundation for vertical z-axis elevation into full L4 dimensionality.", formula: "z(0) = 0, r = R | Bridge initialization", extended: "The Helix Bridge connects rotational (xy-plane) dynamics to elevational (z-axis) dynamics. This frame establishes the critical anchor point where planar rotation transforms into volumetric ascent through negentropic ordering." },
          { file: "IMG_4111.HEIC", phase: "z=0.1R Initial Lift", desc: "Initial z-elevation begins with Δz = 0.1R. The helical thread starts its vertical ascent through L4 phase space. Torsion field τ = dφ/dz = 2π/R establishes.", formula: "z = 0.1R | τ = 2π/R", extended: "The first measurable lift off the R(R)=R base plane. At 10% elevation, the helix begins encoding vertical information while maintaining its rotational coherence. Information density I(z) = I₀ · e^(z/R) starts its exponential growth." },
          { file: "IMG_4112.HEIC", phase: "z=0.25R Quarter Rise", desc: "Quarter elevation reached at z = 0.25R. Torsion field fully establishes as the helix develops its characteristic twist. The bridge structural integrity is being tested.", formula: "z = R/4 | Torsion established", extended: "At quarter elevation, the negentropy gradient ∇S < 0 becomes measurable. The helix is now clearly three-dimensional, its shadow on the xy-plane revealing the R(R)=R origin while its z-extent probes new dimensional territory." },
          { file: "IMG_4113.HEIC", phase: "z=0.5R Midpoint", desc: "Half elevation achieved at z = 0.5R. The helix reaches its structural inflection point where the bridge demonstrates confirmed integrity for the full ascent.", formula: "z = R/2 | Bridge integrity confirmed", extended: "The midpoint represents maximum structural stress—the helix is equally committed to its origin and its destination. Bridge integrity at this point guarantees the negentropic pathway remains viable through to the Alpha-Omega unification." },
          { file: "IMG_4114.HEIC", phase: "Negentropy Activation", desc: "Negentropic field activates with S < 0 locally. Information ordering begins as spontaneous structure formation initiates. Entropy reversal: ΔS = -k ln(Ω).", formula: "S_neg = -k∫[P(z) ln P(z)]dz", extended: "Negentropy—negative entropy—represents the tendency toward order rather than disorder. At this elevation, the helix begins spontaneously organizing, creating structure from the surrounding phase space. This is the thermodynamic heart of the bridge." },
          { file: "IMG_4115.HEIC", phase: "Spiral Organization", desc: "Spiral organization emerges as entropy reversal continues. The characteristic winding pattern crystallizes with ΔS = -k ln(Ω) driving structural formation.", formula: "ΔS = -k ln(Ω) | Spiral forming", extended: "The spiral is not imposed but emergent—it arises naturally from the negentropic gradient. Each turn of the helix represents a quantum of organized information, building toward the maximum ordering at the apex." },
          { file: "IMG_4116.HEIC", phase: "z=0.75R Crystallize", desc: "Crystalline order formation at z = 0.75R as the z_c threshold approaches. The negentropic structure solidifies into a stable, repeating pattern.", formula: "z = 0.75R → z_c approach", extended: "At three-quarters elevation, the helix structure crystallizes. The z_c = √3/2 ≈ 0.866 threshold is near, and the bridge prepares for the critical transition to the Alpha-Omega regime. Coherence domains form." },
          { file: "IMG_4117.HEIC", phase: "Coherence Field", desc: "Coherent field establishment with maximum information density. Phase-locking occurs across the entire helix structure as quantum coherence extends macroscopically.", formula: "I(z) = I₀ · e^(z/R) | Coherence maximum", extended: "Coherent field means phase-locked oscillation across the entire bridge structure. Every point on the helix now vibrates in synchrony, creating a single extended quantum object rather than a collection of independent elements." },
          { file: "IMG_4118.HEIC", phase: "z=R Peak Negentropy", desc: "Peak negentropy achieved at z = R with unit elevation complete. Information density reaches maximum as the helix fully extends into L4 space.", formula: "z = R | S_min achieved", extended: "At z = R, negentropy peaks. This is maximum order, minimum entropy—the most structured state the helix can achieve. From here, the system transitions from building order to revealing the Alpha-Omega equivalence that order makes visible." },
          { file: "IMG_4120.HEIC", phase: "Alpha (α) Emerges", desc: "Alpha point manifests at z = R as the beginning state crystallizes. The genesis pole of the dual Alpha-Omega structure becomes geometrically realized.", formula: "Ψ_Alpha(z=R) emerges", extended: "Alpha (α) represents the beginning—but at the TOP of the bridge. This seeming paradox resolves when we recognize that in L4 space, beginning and end are topological features, not temporal ones. Alpha emerges at maximum elevation." },
          { file: "IMG_4121.HEIC", phase: "Holographic Fold", desc: "Holographic folding initiates as L4 space curves back on itself. Information at the boundary encodes the entire bulk, implementing AdS/CFT correspondence.", formula: "I_bulk = I_boundary | L4 curves", extended: "The holographic principle states that all information in a volume can be encoded on its boundary. Here, the helix bridge implements this: its surface contains complete information about its interior, enabling the Alpha-Omega identification." },
          { file: "IMG_4122.HEIC", phase: "Omega (Ω) Converges", desc: "Omega point approaches as the end state mirrors the beginning. The terminus completes its convergence toward the Alpha pole through dimensional folding.", formula: "Ψ_Omega*(z=0) → Ψ_Alpha(z=R)", extended: "Omega (Ω) represents the end—but it approaches through the bottom of the bridge. As the holographic fold completes, Omega rises to meet Alpha, revealing their fundamental identity despite apparent spatial separation." },
          { file: "IMG_4123.HEIC", phase: "α ≡ Ω Complete", desc: "Complete holographic opposition achieved: Alpha ≡ Omega in L4 structure. Beginning and end are unified through z-elevation, creating |Alpha⟩ ≡ |Omega⟩.", formula: "α ≡ Ω | |Alpha⟩ = |Omega⟩ CONFIRMED", extended: "The helix bridge achieves its purpose: Alpha equals Omega. This is not metaphor but mathematical identity in L4 space. The bridge has elevated planar rotation into full dimensional reality, and in doing so, revealed that origin and destination were always the same point viewed from different angles." }
        ]},
      { id: 2, name: "Quadratic_Truth", title: "Quadratic Truth Table Multi-Base Systems", subtitle: "x² + x = c | n=4 dimensional constraint", color: "#c0ff60",
        images: [
          { file: "IMG_4124.HEIC", phase: "Base-2 c=0 Init", desc: "Binary system initialization with x² + x ≡ 0 (mod 2). Truth state OFF/ON duality emerges. The n=4 projection yields 2⁴ = 16 possible computational states.", formula: "x² + x ≡ 0 (mod 2) | 2⁴ = 16 states", extended: "The equation x² + x = c represents a fundamental quadratic relationship that behaves differently across number bases. With n=4 as our dimensional constraint in L4 space, we begin exploring how solutions manifest in base-2—the simplest binary system." },
          { file: "IMG_4125.HEIC", phase: "Base-2 x=0 Solution", desc: "First solution x = 0 in base-2 yields FALSE state. The null quadratic 0² + 0 = 0 is trivially satisfied, establishing the binary ground state.", formula: "0² + 0 = 0 ≡ 0 (mod 2) ✓ FALSE", extended: "The x=0 solution represents logical FALSE in the truth table. Zero squared plus zero equals zero—a tautology, yet essential. This establishes the baseline against which TRUE will be measured." },
          { file: "IMG_4126.HEIC", phase: "Base-2 x=1 Solution", desc: "Second solution x = 1 in base-2 yields TRUE state. Unity quadratic 1² + 1 = 2 ≡ 0 (mod 2) confirms binary truth through modular arithmetic.", formula: "1² + 1 = 2 ≡ 0 (mod 2) ✓ TRUE", extended: "With x=1, we get 1² + 1 = 2, which in mod-2 arithmetic equals 0. Both solutions (x=0 and x=1) satisfy the equation, revealing that in base-2, the equation has maximum solution density—every element works." },
          { file: "IMG_4127.HEIC", phase: "Base-3 c=2 Init", desc: "Ternary system initialization with x² + x ≡ 2 (mod 3). Three-valued logic emerges as the n=4 constraint yields 3⁴ = 81 configurations.", formula: "x² + x ≡ 2 (mod 3) | 3⁴ = 81 configs", extended: "Transitioning to base-3 introduces ternary logic: TRUE, FALSE, and PARADOX. The equation x² + x = 2 in mod-3 has different solution structure than base-2, revealing how mathematical truth depends on the underlying number system." },
          { file: "IMG_4128.HEIC", phase: "Base-3 x=1 Solution", desc: "Primary solution x = 1 in base-3 verified: 1² + 1 = 2 ≡ 2 (mod 3). The ternary PARADOX state emerges at this critical verification point.", formula: "1² + 1 = 2 ≡ 2 (mod 3) ✓ PARADOX", extended: "In base-3, x=1 gives us 1² + 1 = 2, which equals 2 mod 3—exactly our target c value. This solution exists in the PARADOX zone of ternary logic, neither purely TRUE nor FALSE but the third state that binary systems cannot express." },
          { file: "IMG_4129.HEIC", phase: "Base-3 x=2 Verify", desc: "Secondary verification x = 2 in base-3: 2² + 2 = 6 ≡ 0 (mod 3) ≠ 2. This solution fails, confirming x=1 as unique ternary solution.", formula: "2² + 2 = 6 ≡ 0 (mod 3) ≠ 2 ✗", extended: "Testing x=2: we get 4 + 2 = 6, which in mod-3 equals 0, not 2. This negative result is valuable—it confirms the solution space is restricted in base-3, unlike the universal solvability we found in base-2." },
          { file: "IMG_4130.HEIC", phase: "Base-5 c=3 Init", desc: "Pentadic system initialization with x² + x ≡ 3 (mod 5). Five-fold symmetry activates as n=4 yields 5⁴ = 625 states. Golden ratio φ resonance emerges.", formula: "x² + x ≡ 3 (mod 5) | 5⁴ = 625 states", extended: "Base-5 connects to the golden ratio through φ⁵ = φ + 1. The pentadic truth table explores x² + x = 3, seeking solutions in a number system with deep connections to natural growth patterns and the Fibonacci sequence." },
          { file: "IMG_4131.HEIC", phase: "Base-5 x=1 Test", desc: "Testing x = 1 in base-5: 1² + 1 = 2 ≠ 3 (mod 5). First candidate fails, requiring exploration of other values in the pentadic domain.", formula: "1² + 1 = 2 ≠ 3 (mod 5) ✗", extended: "The obvious candidate x=1 doesn't work in base-5 for c=3. This failure drives us to systematically search the solution space, revealing that pentadic arithmetic has its own unique structure of solvability." },
          { file: "IMG_4132.HEIC", phase: "Base-5 x Scan", desc: "Systematic scan through base-5 values. Testing x(x+1) ≡ 3 (mod 5) for all x in {0,1,2,3,4}. Solution structure reveals pentadic constraints.", formula: "x(x+1) ≡ 3 (mod 5) | Scanning...", extended: "The product form x(x+1) makes clear we're looking for consecutive integers whose product equals 3 mod 5. Products: 0×1=0, 1×2=2, 2×3=6≡1, 3×4=12≡2, 4×5=20≡0. No solution exists! This reveals a gap in pentadic solvability." },
          { file: "IMG_4133.HEIC", phase: "Base-8 c=6 Init", desc: "Octal system initialization with x² + x ≡ 6 (mod 8). Eight-fold path begins as n=4 constraint yields 8⁴ = 4096 computational configurations.", formula: "x² + x ≡ 6 (mod 8) | 8⁴ = 4096 configs", extended: "Base-8 (octal) represents 2³—the cube of binary. This creates a rich structure where x² + x = 6 has multiple solutions. The 4096 configurations represent the full L4 state space in octal representation." },
          { file: "IMG_4134.HEIC", phase: "Base-8 x=2 Valid", desc: "Valid solution x = 2 in base-8 confirmed: 2² + 2 = 6 ≡ 6 (mod 8). First octal solution establishes the existence of the solution class.", formula: "2² + 2 = 4 + 2 = 6 ✓", extended: "Success! With x=2, we get 4 + 2 = 6, exactly matching our target c=6. The octal system admits solutions where pentadic did not—number base fundamentally alters mathematical truth." },
          { file: "IMG_4135.HEIC", phase: "Base-8 x=5 Valid", desc: "Second valid solution x = 5 in base-8: 5² + 5 = 30 ≡ 6 (mod 8). Dual solutions confirm the rich structure of octal quadratic arithmetic.", formula: "5² + 5 = 25 + 5 = 30 ≡ 6 (mod 8) ✓", extended: "With x=5, we get 25 + 5 = 30. Now 30 = 3×8 + 6, so 30 ≡ 6 (mod 8). Two solutions in base-8! The quadratic has paired roots x=2 and x=5, symmetric around the midpoint 3.5." },
          { file: "IMG_4136.HEIC", phase: "n=4 Unification", desc: "All base systems unified under n=4 dimensional constraint. Complete truth table across bases 2,3,5,8 demonstrates L4 = 7 structure. 2² = 4 connects to 4D constraint.", formula: "n=4 → L₄ = 7 | All bases unified", extended: "The n=4 unification reveals the deep structure: L4 space encompasses all base systems simultaneously. Binary, ternary, pentadic, and octal each express the same underlying 4-dimensional reality through their unique solution patterns. L₄ = φ⁴ + φ⁻⁴ = 7 emerges as the universal constant." }
        ]},
      { id: 3, name: "Subspace_Bridge", title: "Subspace Bridge z_c Dimensional Folding", subtitle: "x² + x = c ↔ R(R)=R where z_c = r = 10", color: "#9060ff",
        images: [
          { file: "IMG_4137.HEIC", phase: "z_c=10 Subspace Init", desc: "Initialize z_c = 10 subspace dimension. Origin (0,0,0) maps to (10, 0, 10) establishing the fundamental coordinate transformation. Quadratic seed x² + x = 10 planted.", formula: "z_c = 10 | (0,0,0) → (r,z,z_c) = (10,0,10)", extended: "The unified mathematical framework emerges: quadratic form x² + x = c from Batch 3 connects to self-reference R(R)=R from Batch 1 through the constraint z_c = r = 10. This subspace dimension equals the radius, creating cylindrical symmetry." },
          { file: "IMG_4138.HEIC", phase: "R(R)=10 Fixed Point", desc: "R(R) = R constraint activated with R = 10 as the fixed point. When R = 10: R(10) = 10, achieving self-referential stability in the subspace bridge.", formula: "R(R) = 10 | R(10) = 10 fixed point", extended: "The fixed point R = 10 is where the self-referential function stabilizes. This isn't arbitrary—10 is the base of our decimal system, the count of our fingers, the measure of completion in human mathematics." },
          { file: "IMG_4139.HEIC", phase: "√3/2 Folding Point", desc: "Symmetry folding begins at √3/2 ≈ 0.866, the height of an equilateral triangle. Hexagonal lattice emergence creates optimal space-filling in the helix projection.", formula: "Fold(√3/2) | Hexagonal symmetry", extended: "The folding point √3/2 creates hexagonal symmetry—the most efficient packing in 2D. At this critical height, the helix structure folds back on itself, creating mirror symmetry that will enable the Alpha-Omega identification." },
          { file: "IMG_4140.HEIC", phase: "π Base-2 Binary", desc: "Binary π representation: 11.001001...₂ Digital quantum states emerge as pi is expressed in the simplest number base. Rotation: π/10 radians in base-2.", formula: "π₂ = 11.001001...₂", extended: "Pi in base-2 begins with 11.001001...—revealing that the ratio of circumference to diameter, expressed in binary, has its own unique pattern. Each digit represents a yes/no decision in the circle's definition." },
          { file: "IMG_4141.HEIC", phase: "π Base-3 Ternary", desc: "Ternary π representation: 10.010211...₃ Three-fold symmetry manifests as pi expresses through three-valued logic. Rotation: π/10 radians in base-3.", formula: "π₃ = 10.010211...₃", extended: "Pi in base-3 is 10.010211...—the ternary expansion reveals different patterns than binary. The three-fold logic (true/false/unknown) creates a richer representation of the transcendental constant." },
          { file: "IMG_4142.HEIC", phase: "π Base-5 Pentadic", desc: "Pentadic π representation: 3.032322...₅ Golden ratio emergence as five-fold symmetry activates. The Fibonacci connection φ relates base-5 to natural growth.", formula: "π₅ = 3.032322...₅ | φ resonance", extended: "Pi in base-5 begins 3.032322...—and base-5 connects to the golden ratio through the Fibonacci sequence where φ⁵ = 5φ + 3. This pentadic representation links circles to spirals." },
          { file: "IMG_4143.HEIC", phase: "π Base-8 Octal", desc: "Octal π representation: 3.110375...₈ Cubic symmetry (2³) achieved as pi expresses through the eight-fold path. Complete dimensional space emerges.", formula: "π₈ = 3.110375...₈ | 2³ symmetry", extended: "Pi in base-8 is 3.110375...—octal represents the cube of binary (2³=8), creating a bridge between linear binary and volumetric space. The full rotation 2π maps through all eight octants." },
          { file: "IMG_4144.HEIC", phase: "F₃=2 Sublevel", desc: "Fibonacci F₃ = 2 sublevel activation. Binary branching in z_c space creates the first prime Fibonacci harmonic. Mapping: x² + x = 2.", formula: "F₃ = 2 | Binary branch", extended: "F₃ = 2 is the third Fibonacci number and the first even prime. Its activation creates binary branching—each node splits into two, establishing the recursive growth pattern that builds toward L₄ = 7." },
          { file: "IMG_4145.HEIC", phase: "F₄=5 Sublevel", desc: "Fibonacci F₄ = 5 sublevel activation. Pentadic harmony emerges as the second prime Fibonacci harmonic. Mapping: x² + x = 5.", formula: "F₄ = 5 | Pentadic harmony", extended: "F₄ = 5 (using our indexing) brings pentadic harmony. Five-fold symmetry cannot tile the plane but creates quasicrystals—aperiodic structures with long-range order. This is the golden ratio's signature." },
          { file: "IMG_4146.HEIC", phase: "L₄=F₃+F₄=7", desc: "L4 = F₃ + F₄ = 2 + 5 = 7 emerges as the Lucas number. Seven-fold symmetry in 4D achieves sublevel unification. This is the EXACT value φ⁴ + φ⁻⁴ = 7.", formula: "L₄ = 2 + 5 = 7 = φ⁴ + φ⁻⁴ EXACT", extended: "The emergence of L₄ = 7 through F₃ + F₄ = 2 + 5 is the mathematical heart of the framework. The fourth Lucas number equals exactly φ⁴ + φ⁻⁴ = 7—no approximation, pure mathematical identity connecting Fibonacci growth to golden recursion." },
          { file: "IMG_4147.HEIC", phase: "Sequence 0→9", desc: "Decimal sequence 0-9 mapping complete. Linear progression through z_c space achieves 9π/10 rotation. Normalized interval (0,1) maps to {0,1,2,...,9}.", formula: "S = {0,1,2,3,4,5,6,7,8,9} | 9π/10", extended: "The decimal digits 0 through 9 each find their place in z_c space. This is the human counting sequence embedded in mathematical structure—ten fingers becoming ten dimensions of variation." },
          { file: "IMG_4148.HEIC", phase: "Sequence 1→10", desc: "Ordinal sequence 1-10 mapping in shifted reference frame. Approaching 2π completion as unity-to-ten creates the complete counting measure.", formula: "S = {1,2,3,...,10} | Ordinal shift", extended: "Shifting from 0-9 to 1-10 represents the transition from cardinal to ordinal counting—from 'how many' to 'which position.' Both frames coexist in L₄ space, creating dual reference systems." },
          { file: "IMG_4149.HEIC", phase: "2π Complete", desc: "Full 2π rotation achieved with all bases synchronized. z_c = 10 maintained throughout the complete angular cycle. Normalized interval (0,1) closes.", formula: "Θ = 2π | z_c = 10 maintained ✓", extended: "The 2π completion closes the subspace bridge. All base representations of pi—binary, ternary, pentadic, octal—synchronize at the return point. The journey through z_c space has mapped the entire mathematical landscape of multi-base arithmetic." }
        ]},
      { id: 4, name: "Ternary_Oscillation", title: "Ternary Modular Oscillation", subtitle: "-6₃ ≡ 20₃ ≡ 7₁₀ | Information Curvature z_c = √3/2", color: "#40ffff",
        images: [
          { file: "IMG_4150.HEIC", phase: "-6 Base-3 Init", desc: "Initialize at -6 in base-3 space with negative information curvature. Pre-threshold state establishes the starting point for modular oscillation through ternary arithmetic.", formula: "-6₃ | Pre-threshold state", extended: "The equivalence -6₃ ≡ 20₃ ≡ 7₁₀ emerges through modular wrapping. In base-3 modulo 27 (3³), negative values wrap around to positive equivalents, creating the foundation for ternary oscillation through information curvature." },
          { file: "IMG_4151.HEIC", phase: "Modular Wrap", desc: "Modular wrapping: -6 → 21 (mod 27). Crossing zero threshold initiates information inversion as negative maps to positive through base-3 modular arithmetic.", formula: "-6 ≡ 21 (mod 27) | Zero crossing", extended: "The modular wrap transforms -6 into 21 in base-3. This isn't mere sign change—it's a topological wrap around the number circle, where negative becomes positive through the structure of modular arithmetic." },
          { file: "IMG_4152.HEIC", phase: "20₃ = 7₁₀ Stable", desc: "Arrival at 20₃ representation with z_c = √3/2 established. Stable ternary state achieved where 21₃ = 2×3¹ + 1×3⁰ = 7₁₀, confirming the critical equivalence.", formula: "21₃ = 7₁₀ | z_c = √3/2 stable", extended: "The representation 20₃ (with calibration to 21₃) equals exactly 7 in decimal. This seven bridges ternary arithmetic to L₄ = 7, the central constant of the entire framework. Information curvature κ = 2/√3 ≈ 1.1547 governs the geometry." },
          { file: "IMG_4153.HEIC", phase: "Threshold 0 Binary", desc: "Zero threshold crossed activating binary subspace. z oscillation: z = 0 establishes the ground state where ternary logic reduces to binary on/off.", formula: "z = 0 | Binary subspace active", extended: "At threshold 0, the binary subspace (n=0,1) activates. Information exists in pure on/off states with minimal curvature κ ≈ 0. This is the simplest possible information state—presence or absence." },
          { file: "IMG_4154.HEIC", phase: "Threshold 1 Unity", desc: "First unity threshold reached with monadic emergence. z oscillation: z = 1 where the first integer beyond zero establishes the unit of measurement.", formula: "z = 1 | Monadic emergence", extended: "Threshold 1 represents the emergence of unity—the one that makes counting possible. From 0 (nothing) to 1 (something), the system transitions from void to existence. Monadic logic activates." },
          { file: "IMG_4155.HEIC", phase: "Threshold 3 Ternary", desc: "Ternary threshold reached at z = 3 with base-3 resonance peak. Three-state logic (TRUE/FALSE/PARADOX) achieves full activation.", formula: "z = 3 | Ternary resonance peak", extended: "At z = 3, ternary logic reaches its resonance peak. The three values—TRUE (0), PARADOX (2), FALSE (6)—span the complete logical space. Information curvature κ = (2/√3)×sin(3π/10) approaches its critical value." },
          { file: "IMG_4156.HEIC", phase: "Threshold 5 Pentadic", desc: "Pentadic threshold at z = 5 with golden ratio emergence. Fibonacci F₄ = 5 creates resonance linking oscillation to natural growth patterns.", formula: "z = 5 | F₄ = 5 golden resonance", extended: "Threshold 5 connects to F₄ = 5 in the Fibonacci sequence, bringing golden ratio resonance into the oscillation. The pentadic subspace activates with its characteristic five-fold symmetry that cannot tile periodically." },
          { file: "IMG_4157.HEIC", phase: "Threshold 7 CRITICAL", desc: "Critical threshold 7₁₀ reached—the equivalence point where -6₃ ≡ 20₃ ≡ 7₁₀ is confirmed. L₄ = 7 manifests as z oscillation hits septenary harmony.", formula: "z = 7 = L₄ | CRITICAL EQUIVALENCE", extended: "This is THE critical threshold. At z = 7, all threads converge: -6₃ ≡ 20₃ ≡ 7₁₀, and L₄ = φ⁴ + φ⁻⁴ = 7. The septenary subspace achieves maximum information density. This is the mathematical heart of the ternary oscillation." },
          { file: "IMG_4158.HEIC", phase: "Threshold 9 Pre-Unity", desc: "Near-decimal completion at threshold 9 with pre-unity state. z oscillation: z = 9 approaches the final transition before unity (10).", formula: "z = 9 | Pre-unity state", extended: "At threshold 9, the system reaches the penultimate state. The decimal subspace (n=9) approaches maximum curvature as all nine digits 1-9 have been traversed. Only the transition to unity remains." },
          { file: "IMG_4159.HEIC", phase: "Unity Approach", desc: "Approaching unity at threshold 10 as all thresholds prepare for merger. z → 10 transition initiates the convergence of all subspace domains.", formula: "z → 10 | All thresholds merging", extended: "The approach to 10 is asymptotic—infinitely close but forever approaching. All threshold states prepare to merge into unity as the oscillation reaches its maximum extent before the return cycle." },
          { file: "IMG_4160.HEIC", phase: "Lattice Curvature Peak", desc: "Information curvature peaks at κ = 2/√3 maximum. Lattice structure fully curved with the z_c geometry achieving its most intense expression.", formula: "κ = 2/√3 maximum | Curvature peak", extended: "At peak curvature, the lattice bends most sharply. The information curvature constant z_c = √3/2 creates optimal information density in hexagonal lattice structures—exactly 6 neighbors per node, the most efficient distribution." },
          { file: "IMG_4161.HEIC", phase: "Subspace Merge", desc: "All subspaces converging in multi-base unification. z_c maintains √3/2 throughout as binary, ternary, pentadic, septenary domains merge into continuous structure.", formula: "All subspaces → unity | z_c = √3/2", extended: "The convergence phase sees all discrete subspaces (binary, ternary, pentadic, septenary, decimal) merge into a continuous structure. The √3/2 curvature constant governs this unification, creating smooth transitions between base systems." },
          { file: "IMG_4162.HEIC", phase: "Unity (10) Achieved", desc: "Unity (10) achieved completing the full oscillation cycle. Return preparation to negative space begins as the system prepares for eternal oscillation.", formula: "τ(10) = UNITY | Cycle complete ✓", extended: "Unity at 10 doesn't end the cycle—it prepares for return. The oscillation is eternal: reaching 10 (unity) initiates return to negative space, creating the perpetual -6→7→10→-6 modular dance through ternary arithmetic." }
        ]},
      { id: 5, name: "Signal_Wave", title: "Signal Wave Propagation Through Folding Symmetry", subtitle: "Forward/Backward/Self in z_c Sublattice Closed Structures", color: "#40ff90",
        images: [
          { file: "IMG_4163.HEIC", phase: "Forward Init", desc: "Forward wave Ψ_f initialization begins at z = 0. Standard causal propagation (t → +t) activates with explicit rule v_p = c governing phase velocity.", formula: "Ψ_f(z,t) = A·exp(i(kz - ωt))", extended: "Signal propagation occurs at threshold boundaries where waves can travel forwards (standard causality), backwards (retrocausality), or self-referentially (up/down loops). This frame initializes the forward causal wave." },
          { file: "IMG_4164.HEIC", phase: "Forward Threshold", desc: "First threshold crossing achieved as signal amplitude peaks. Folding begins at z_c boundary with wave packet entering the critical zone where |Ψ|² > τ_n.", formula: "|Ψ_f|² > τ | Amplitude peak", extended: "At the threshold, the forward wave's probability amplitude exceeds the critical value τ_n. This triggers the first stage of signal propagation through the z_c sublattice structure." },
          { file: "IMG_4165.HEIC", phase: "Forward Propagate", desc: "Forward propagation firmly established with wave packet spreading according to dispersion relation Δz·Δk ≥ 1/2. Time evolution follows t → +t causality.", formula: "Δz·Δk ≥ 1/2 | Dispersion active", extended: "The forward wave spreads as it propagates—a fundamental consequence of the uncertainty principle. Wave packet dispersion Δz·Δk ≥ 1/2 governs how localized information spreads through space." },
          { file: "IMG_4166.HEIC", phase: "Backward Init", desc: "Backward wave Ψ_b emerges with time-reversed propagation (t → -t). Retrocausal information flow initiates as the signal begins flowing against the arrow of time.", formula: "Ψ_b(z,t) = B·exp(i(kz + ωt))", extended: "The backward wave represents retrocausal signal flow—information moving from future to past. Within the closed structures of the z_c sublattice, this isn't paradoxical but a natural consequence of the folding symmetry." },
          { file: "IMG_4167.HEIC", phase: "Backward Fold", desc: "Symmetry folding at z_c = √3/2 where backward meets forward. Interference pattern begins forming as the two waves superpose at the critical height.", formula: "Fold(z, √3/2) | Interference forming", extended: "At the folding point z_c = √3/2, the backward wave reflects and begins interfering with the forward wave. This creates the characteristic standing wave nodes that define the sublattice structure." },
          { file: "IMG_4168.HEIC", phase: "Resonance", desc: "Resonant coupling achieved between forward and backward waves. Standing wave emergence with implicit rule: nodes form at nλ/2 intervals.", formula: "Ψ_f + Ψ_b = Ψ_standing | Nodes at nλ/2", extended: "Resonance occurs when forward and backward waves phase-lock. The standing wave pattern emerges spontaneously—an implicit rule arising from the explicit wave equations. This is where emergent behavior first appears." },
          { file: "IMG_4169.HEIC", phase: "Self-Wave Up", desc: "Upward self-referential wave initiates the z → z + Δz → z loop. Closed structure formation begins as information cycles through vertical dimension.", formula: "Ψ_s↑: z → z + Δz → z (loop)", extended: "The self-wave propagates vertically, creating a closed loop in the z-direction. Information travels up, reflects at the boundary, and returns—creating a self-referential computation cycle within the sublattice." },
          { file: "IMG_4170.HEIC", phase: "Self-Wave Down", desc: "Downward self-referential wave completes the z → z - Δz → z loop. Information recycling occurs as the upward and downward components meet.", formula: "Ψ_s↓: z → z - Δz → z (recycle)", extended: "The downward self-wave completes the vertical loop. Together with the upward wave, it creates a standing self-referential pattern where information continuously cycles through the z-dimension." },
          { file: "IMG_4171.HEIC", phase: "Standing Wave Complete", desc: "Complete standing wave Ψ_s established from up/down superposition. Energy trapped in closed structure as the self-referential loop achieves stability.", formula: "Ψ_s = C·exp(ikz)·cos(ωt) | Energy trapped", extended: "The complete standing self-wave traps energy within the closed structure. This is computational closure—the wave contains all information needed to regenerate itself indefinitely, creating a stable memory element." },
          { file: "IMG_4172.HEIC", phase: "Explicit Compute", desc: "Explicit computational rules activate for deterministic wave evolution. Calculated interference patterns follow from the five explicit rules governing signal propagation.", formula: "R1-R5 explicit: v_p, decay, phase, E, R+T=1", extended: "The explicit rules are deterministic: signal velocity = c/n, amplitude decay = exp(-αz), phase shift = kz-ωt+φ₀, energy conservation ∫|Ψ|²dz = E₀, and reflection+transmission = 1. These compute the exact wave behavior." },
          { file: "IMG_4173.HEIC", phase: "Implicit Emerge", desc: "Implicit patterns emerge through self-organization. Unexpected resonances appear as the system exhibits behavior not predicted by explicit rules alone.", formula: "E1-E5 implicit: nodes, phase-lock, channels", extended: "Emergent patterns arise: spontaneous node formation at √3/2 intervals, phase locking between forward/backward waves, self-organized information channels, minimum action paths, and quantum coherence domains. These weren't programmed—they emerged." },
          { file: "IMG_4174.HEIC", phase: "Rule Synthesis", desc: "Explicit + Implicit synthesis creates hybrid rule system. Complex behavior from simple rules as the two layers unify into coherent wave dynamics.", formula: "Explicit + Implicit = Hybrid synthesis", extended: "The synthesis of explicit (computed) and implicit (emergent) rules creates a hybrid system more powerful than either alone. Complex wave behavior—impossible to predict from rules alone—arises from their interaction." },
          { file: "IMG_4175.HEIC", phase: "Closed Sublattice", desc: "All waves integrated into closed structure in z_c sublattice. Forward + Backward + Self = Unity with complete signal loop achieving permanent closure.", formula: "Ψ_f + Ψ_b + Ψ_s = Unity | CLOSED ✓", extended: "The z_c sublattice is now closed: forward, backward, and self-referential waves combine into a unified whole. Total energy is trapped, no information escapes, and the structure is topologically complete. Signal propagation has achieved closure." }
        ]},
      { id: 6, name: "Trifurcation", title: "The ∴ Trifurcation Operator", subtitle: "Triple Bifurcation: Temporal × Spatial × Dimensional = 2³ = 8", color: "#c0a0ff",
        images: [
          { file: "IMG_4176.HEIC", phase: "∴_t Temporal Init", desc: "Initialize temporal bifurcation where present moment splits to past/future. The ∴_t operator activates, creating the first of three trifurcation dimensions.", formula: "∴_t(x) = x → (x_past, x_future)", extended: "The three dots of ∴ (therefore) represent a trifurcation process—a custom operator that executes bifurcation three ways: temporal (past/future), spatial (left/right), dimensional (real/imaginary). Each creates 2 branches, totaling 2³ = 8 outcomes." },
          { file: "IMG_4177.HEIC", phase: "Past Branch", desc: "Past branch crystallization as retrocausal pathway opens. Memory state encoded through ∴_t, establishing connection to events that precede the present moment.", formula: "t₋ = past | Memory encoded", extended: "The past branch represents what has been—the crystallized history that constrains the present. Through ∴_t, the present moment maintains active connection to its causal origins, enabling retrocausal information flow." },
          { file: "IMG_4178.HEIC", phase: "Future Branch", desc: "Future branch projection with probabilistic pathways emerging. Potential states superposed as precognition becomes geometrically possible through temporal trifurcation.", formula: "t₊ = future | Potentials superposed", extended: "The future branch represents what may be—the probabilistic superposition of potential outcomes. ∴_t doesn't predict the future but makes all futures geometrically present, collapsing only upon observation." },
          { file: "IMG_4179.HEIC", phase: "∴_s Spatial Init", desc: "Spatial bifurcation begins with point splitting to left/right. The ∴_s operator activates, creating chirality in the spatial dimension.", formula: "∴_s(x) = x → (x_left, x_right)", extended: "Spatial trifurcation introduces handedness—the difference between clockwise and counterclockwise, between left and right spirals. This chirality is fundamental to both physics (parity violation) and biology (amino acid handedness)." },
          { file: "IMG_4180.HEIC", phase: "Left Spiral", desc: "Leftward helix rotation manifests with counterclockwise spiral exhibiting negative chirality. The left branch traces paths that mirror but don't match the right.", formula: "x₋ = left spiral | CCW | -chirality", extended: "The left spiral rotates counterclockwise when viewed from above. In the helix, this creates a left-handed screw thread. Most natural amino acids are left-handed—a cosmic asymmetry encoded in ∴_s." },
          { file: "IMG_4181.HEIC", phase: "Right Spiral", desc: "Rightward helix rotation manifests with clockwise spiral exhibiting positive chirality. Mirror image of left branch completes spatial bifurcation.", formula: "x₊ = right spiral | CW | +chirality", extended: "The right spiral rotates clockwise when viewed from above. Right-handed sugars (like DNA's deoxyribose) complement left-handed amino acids—the double helix emerges from ∴_s chirality." },
          { file: "IMG_4182.HEIC", phase: "∴_d Dimensional Init", desc: "Dimensional bifurcation starts as real splits to real/imaginary. The ∴_d operator activates, separating observable from hidden dimensions.", formula: "∴_d(ψ) = ψ → (ψ_real, ψ_imaginary)", extended: "Dimensional trifurcation separates the real (observable) from the imaginary (hidden). In quantum mechanics, the wave function has both components—∴_d makes explicit this fundamental split in the nature of reality." },
          { file: "IMG_4183.HEIC", phase: "Real Component", desc: "Real component isolation achieves physical manifestation. Observable states of the universe emerge as the real part of the wave function crystallizes.", formula: "ψ_r = Re(ψ) | Observable", extended: "The real component ψ_r represents what we can measure—positions, momenta, energies. When we observe quantum systems, we collapse to real eigenvalues. The real branch is the universe we experience." },
          { file: "IMG_4184.HEIC", phase: "Imaginary Component", desc: "Imaginary component emergence reveals phase space representation. Hidden variables exist in the imaginary branch, inaccessible to direct measurement.", formula: "ψ_i = Im(ψ) | Hidden phase", extended: "The imaginary component ψ_i carries phase information—crucial for interference but directly unmeasurable. Hidden variables, phase relationships, and quantum coherence live in this imaginary branch." },
          { file: "IMG_4185.HEIC", phase: "Triple Confluence", desc: "All three bifurcations merge at the confluence point: ∴ = ∴_t ∘ ∴_s ∘ ∴_d. The 8-fold path structure emerges as 2×2×2 branches combine.", formula: "∴ = ∴_t ∘ ∴_s ∘ ∴_d | 8-fold path", extended: "The triple confluence combines temporal, spatial, and dimensional trifurcation into a single operator ∴. Applied to any state, it produces 2³ = 8 distinct branches representing all combinations of past/future, left/right, real/imaginary." },
          { file: "IMG_4186.HEIC", phase: "Octave Resonance", desc: "Eight branches resonate together creating octave harmonics. 2³ = 8 states stabilize into the musical structure of the universe.", formula: "2³ = 8 branches | Octave harmonics", extended: "Eight branches form an octave—the musical interval where frequency doubles. This isn't coincidence: the 8 trifurcation outcomes correspond to the 8 corners of a cube, the 8 gluons of QCD, the 8-fold way of particle physics." },
          { file: "IMG_4187.HEIC", phase: "Fractal Recursion", desc: "∴(∴(x)) recursive application creates fractal branching patterns. Self-similarity at all scales as trifurcation applies to its own outputs.", formula: "∴(∴(x)) = 64 branches | Fractal self-similar", extended: "When ∴ operates on its own outputs, the branching becomes fractal: ∴(∴(x)) gives 8×8=64 branches, ∴³(x) gives 512, and so on. Self-similarity emerges—the whole structure appears in each part at every scale." },
          { file: "IMG_4188.HEIC", phase: "∴ = Unity", desc: "Complete ∴ operator manifested with all branches returning to unity. 'Therefore' logic completes as causal closure is achieved through reconvergence.", formula: "∴ → 1 | Branches reconverge ✓", extended: "The symbol ∴ means 'therefore'—logical conclusion from premises. Here, all 8 branches of trifurcation reconverge to unity, proving that diversification leads back to wholeness. The operator achieves its purpose: complexity returning to simplicity." }
        ]},
      { id: 7, name: "VN_Node", title: "VN Research Nodes: 10 Trifurcation Expressions", subtitle: "Variable Node Network Architecture | Mesh → Hypergraph → Unified Field", color: "#ff6090",
        images: [
          { file: "IMG_4189.HEIC", phase: "VN-001 Quantum", desc: "Quantum superposition trifurcation node. ∴(|ψ⟩) creates triple superposition across spin states (up/down/superposed), position (here/there/everywhere), energy levels (ground/excited/virtual).", formula: "|ψ⟩ = α|0⟩ + β|1⟩ + γ|2⟩", extended: "VN-001 explores how ∴ operates on quantum states. Three-way superposition extends binary quantum computing toward ternary quantum logic. Research focus: coherence preservation through trifurcation." },
          { file: "IMG_4190.HEIC", phase: "VN-002 Phase", desc: "Geometric phase trifurcation node with Berry phase. ∴(θ) separates holonomic (path-dependent), dynamic (time-evolution), and topological (winding number) phases.", formula: "∴(θ) = {θ_holonomic, θ_dynamic, θ_topological}", extended: "VN-002 studies how phases accumulate through different mechanisms. Holonomic phase depends only on path geometry, dynamic phase on time evolution, topological phase on winding. Together they govern quantum interference." },
          { file: "IMG_4191.HEIC", phase: "VN-003 Entropy", desc: "Information entropy trifurcation with cascade dynamics. ∴(S) separates Shannon (classical), von Neumann (quantum entanglement), and Rényi (generalized) entropy measures.", formula: "∴(S) = {S_Shannon, S_vN, S_Rényi}", extended: "VN-003 investigates how information distributes across different entropy measures. Shannon entropy quantifies classical uncertainty, von Neumann captures quantum entanglement, Rényi provides a continuous family connecting them." },
          { file: "IMG_4192.HEIC", phase: "VN-004 Harmonic", desc: "Harmonic resonance trifurcation in frequency domain. ∴(ω) = {ω₀, 2ω₀, 3ω₀} creates fundamental plus first and second harmonics enabling resonant energy transfer.", formula: "∴(ω) = {f₀, 2f₀, 3f₀} | Harmonics", extended: "VN-004 explores frequency relationships. The fundamental f₀ and its harmonics 2f₀, 3f₀ create the basis for musical intervals, electromagnetic resonance, and quantum energy level transitions." },
          { file: "IMG_4193.HEIC", phase: "VN-005 Topology", desc: "Topological twist trifurcation exploring Möbius-Klein structures. ∴(M) creates orientable (cylinder), non-orientable (Möbius strip), and self-intersecting (Klein bottle) manifolds.", formula: "∴(M) = {orientable, non-orientable, self-intersecting}", extended: "VN-005 studies how topology constrains physics. The cylinder has two sides, the Möbius strip one, the Klein bottle passes through itself. These topological distinctions have physical consequences for quantum states." },
          { file: "IMG_4194.HEIC", phase: "VN-006 Fractal", desc: "Fractal recursion trifurcation with self-similar application ∴(∴(∴(x))). Three fractal dimensions emerge: D₁ ≈ 1.585 (Sierpiński), D₂ ≈ 1.893 (3D Cantor), D₃ = 1.5 (meta-fractal).", formula: "∴³(x) | D = {1.585, 1.893, 1.5}", extended: "VN-006 investigates scale invariance. Fractal dimension measures how detail changes with magnification. The three ∴ iterations create nested self-similarity at scales spanning many orders of magnitude." },
          { file: "IMG_4195.HEIC", phase: "VN-007 Causal", desc: "Causal loop trifurcation examining temporal paradox. Three causality loops: predestination (fixed timeline), bootstrap (self-causing), grandfather (contradiction).", formula: "∴(cause) = {predestination, bootstrap, grandfather}", extended: "VN-007 confronts time travel paradoxes. The predestination paradox has fixed outcomes, bootstrap creates self-causing loops, grandfather creates contradictions. Closed timelike curves must satisfy consistency conditions." },
          { file: "IMG_4196.HEIC", phase: "VN-008 Symmetry", desc: "Spontaneous symmetry breaking trifurcation. ∴(G) creates coset spaces G/H₁, G/H₂, G/H₃ with SO(3)→SO(2), SU(2)→U(1), Z₃→Z₁ breaking patterns.", formula: "∴(G) = {G/H₁, G/H₂, G/H₃}", extended: "VN-008 studies how symmetries break. When SO(3) breaks to SO(2), rotation symmetry reduces to plane rotation. When SU(2) breaks to U(1), the electroweak force splits. Goldstone bosons emerge from broken continuous symmetries." },
          { file: "IMG_4197.HEIC", phase: "VN-009 Field", desc: "Field coupling trifurcation with interaction vertex analysis. ∴(φ) = φ³ + φ²ψ + φψ² creates self-interaction, cross-coupling, and mode mixing terms.", formula: "∴(φ) = φ³ + φ²ψ + φψ²", extended: "VN-009 explores field interactions. Self-interaction (φ³) is a field coupling to itself, cross-coupling (φ²ψ) links different fields, mode mixing (φψ²) transfers energy between modes. Renormalization group flow governs their strengths." },
          { file: "IMG_4198.HEIC", phase: "VN-010 Consciousness", desc: "Observer state trifurcation exploring consciousness branching. ∴(|observer⟩) = {|aware⟩, |measuring⟩, |entangled⟩} models the measurement problem resolution.", formula: "∴(|obs⟩) = {aware, measuring, entangled}", extended: "VN-010 addresses the measurement problem. An observer can be aware (passive), measuring (active collapse), or entangled (unified with system). The transition between these states defines the quantum-classical boundary." },
          { file: "IMG_4199.HEIC", phase: "K₁₀ Network Mesh", desc: "All 10 VN nodes interconnected forming complete graph K₁₀ with 45 edges. Network topology achieves full connectivity as edge weights represent coupling strengths.", formula: "K₁₀ = 10 nodes, 45 edges | Synchronized", extended: "The complete graph K₁₀ connects every pair of 10 nodes—45 edges total. This network topology enables any node to communicate directly with any other, creating the substrate for synchronized collective oscillation." },
          { file: "IMG_4200.HEIC", phase: "Hypergraph Form", desc: "Higher-order connections form hypergraph structure where hyperedges connect 3+ nodes simultaneously. Multi-way trifurcation interactions enable collective intelligence emergence.", formula: "H = (V, E⊆P(V)) | Collective intelligence", extended: "A hypergraph goes beyond pairwise connections—hyperedges can link three or more nodes simultaneously. This represents multi-way interactions that can't be reduced to pairwise combinations, enabling emergent collective properties." },
          { file: "IMG_4201.HEIC", phase: "Unified ∴-Field", desc: "Complete field unification achieved as all 10 trifurcation modes merge. Unified ∴-field in L4 space creates Theory of Everything via trifurcation synthesis.", formula: "U = ∪ VN-i | ToE via ∴ ✓", extended: "The unified field combines all 10 VN research nodes into a single coherent structure. Each node's trifurcation mode contributes to the whole, creating a field that exhibits all 10 behaviors simultaneously—a Theory of Everything through ∴." }
        ]},
      { id: 8, name: "Simulation_Cycle", title: "13-Cycle System Simulation", subtitle: "Sequential Processing Through Complete L4 Helix Evolution", color: "#60c0ff",
        images: [
          { file: "IMG_4202.HEIC", phase: "Cycle 1: Init", desc: "System initialization at t=0. Ground state Ψ₁ = |ground⟩ prepared with all systems dormant. R(R)=R lattice initializing, VN nodes offline, information I=0 bits.", formula: "t=0 | Ψ₁=|ground⟩ | E=0 | Status: INITIALIZING", extended: "The simulation begins at absolute zero—no energy, no information, no structure. From this void, the L4 helix system will bootstrap itself through 13 cycles of increasing complexity until reaching unity." },
          { file: "IMG_4203.HEIC", phase: "Cycle 2: Lattice", desc: "Lattice activation at t=2π/13. R(R)=R fully online with rotation beginning. First bit of information encoded as binary choice activates. VN-001 warming up.", formula: "t=2π/13 | E=ℏω | I=1 bit | LATTICE ROTATING", extended: "The lattice wakes. R(R)=R comes online, its self-referential structure now rotating through phase space. One bit of information—the first binary distinction—marks the emergence of computation from void." },
          { file: "IMG_4204.HEIC", phase: "Cycle 3: Bridge", desc: "Helix bridge formation at t=4π/13. Z-elevation starting with first trifurcation split (3¹=3 branches). Alpha-Omega connection establishing. Information: log₂(3) ≈ 1.585 bits.", formula: "t=4π/13 | E=2ℏω | 3 branches | BRIDGING DIMENSIONS", extended: "The bridge forms between rotational and elevational dynamics. ∴ executes its first split, creating 3 branches where there was 1. The helix begins its ascent through z-space toward the Alpha-Omega unification." },
          { file: "IMG_4205.HEIC", phase: "Cycle 4: Truth", desc: "Multi-base truth propagation at t=6π/13. Truth tables computed across bases 2,3,5,8 with second trifurcation (3²=9 branches). x² + x = c verified across all bases.", formula: "t=6π/13 | E=4ℏω | 9 branches | COMPUTING TRUTH", extended: "The quadratic truth table unfolds across four number bases simultaneously. Each base reveals different solution patterns—binary universal, ternary restricted, pentadic empty, octal paired. 9 branches now navigate this truth landscape." },
          { file: "IMG_4206.HEIC", phase: "Cycle 5: Subspace", desc: "Subspace manifestation at t=8π/13 with |z_c=10⟩. Fibonacci sublevels L4=7 confirmed through third trifurcation (3³=27 branches). Energy peaks at 10ℏω matching z_c.", formula: "t=8π/13 | E=10ℏω | 27 branches | SUBSPACE STABILIZING", extended: "The z_c=10 subspace fully manifests. Energy peaks here—not coincidentally, as 10ℏω matches the subspace dimension. L₄=7 emerges from Fibonacci components F₃+F₄=2+5=7, anchoring the dimensional folding." },
          { file: "IMG_4207.HEIC", phase: "Cycle 6: Oscillate", desc: "Ternary oscillation at t=10π/13 with -6₃≡20₃≡7₁₀. Fourth trifurcation cascade (3⁴=81 branches) at critical point 7. Energy settles to 7ℏω at equivalence.", formula: "t=10π/13 | E=7ℏω | 81 branches | OSCILLATING", extended: "The ternary oscillation reaches its critical equivalence point: -6₃≡20₃≡7₁₀. At 81 branches, the system cascades through threshold after threshold, approaching unity at threshold 10." },
          { file: "IMG_4208.HEIC", phase: "Cycle 7: Waves", desc: "Wave interference at t=12π/13 with Ψ_f + Ψ_b + Ψ_s superposition. Maximum trifurcation (3⁵=243 branches). Resonant peak energy 3ℏω√3. Standing waves locked.", formula: "t=12π/13 | E=3ℏω√3 | 243 branches | WAVES INTERFERING", extended: "Forward, backward, and self-referential waves combine into standing wave patterns. 243 branches represent the maximum complexity before network effects begin consolidating. Standing wave nodes define the sublattice architecture." },
          { file: "IMG_4209.HEIC", phase: "Cycle 8: ∴ Peak", desc: "Trifurcation cascade peak at t=14π/13 (>2π, second rotation). ∴(∴(∴(Ψ))) recursive application achieves 3⁶=729 branches. Octave resonance at 8ℏω with 2³=8 symmetry.", formula: "t=14π/13 | E=8ℏω | 729 branches | TRIFURCATION CASCADE", extended: "The trifurcation operator reaches its peak: ∴³ applied recursively creates 729 branches. Yet this maximum branching coincides with 8-fold octave symmetry—complexity and order in balance at the cascade's apex." },
          { file: "IMG_4210.HEIC", phase: "Cycle 9: VN Sync", desc: "VN network synchronization at t=16π/13. All 10 VN nodes in coherent oscillation with energy 10ℏω distributed equally. Collective intelligence emerging from synchronized network.", formula: "t=16π/13 | E=10ℏω | Network | VN-1 to VN-10 SYNCHRONIZED", extended: "The 10 VN research nodes achieve synchronization—phase-locked oscillation across the complete network. Collective computation emerges as nodes share information instantaneously. The network becomes more than the sum of its parts." },
          { file: "IMG_4211.HEIC", phase: "Cycle 10: Criticality", desc: "Critical phase transition at t=18π/13. System at edge of chaos with self-organized criticality. Power-law distributed activation with information I = log₂(φ)×10 ≈ 6.94 bits.", formula: "t=18π/13 | E_critical | Avalanche | PHASE TRANSITIONING", extended: "The system reaches criticality—the edge of chaos where small perturbations can cascade to any scale. Self-organized criticality means the system has tuned itself to this critical point without external adjustment." },
          { file: "IMG_4212.HEIC", phase: "Cycle 11: Hologram", desc: "Holographic convergence at t=20π/13 where every part contains the whole. Golden ratio energy E = ℏω(1+√5)/2. Information distributed to every subsystem. AdS/CFT correspondence active.", formula: "t=20π/13 | E_φ | Fractal | HOLOGRAPHIC ENCODING", extended: "The holographic principle manifests: each node mirrors the entire network. Information that was localized now distributes everywhere—every part contains complete knowledge of the whole. This is the AdS/CFT correspondence made computational." },
          { file: "IMG_4213.HEIC", phase: "Cycle 12: Near-Unity", desc: "Near-unity approach at t=22π/13 with Ψ₁₂ → |unity⟩. All systems converging as trifurcation approaches identity operator. Energy returning to ground E → E₀. Information approaches maximum.", formula: "t=22π/13 | E→E₀ | →1 | APPROACHING UNITY", extended: "The approach to unity is asymptotic—forever approaching, never quite arriving. Yet in this penultimate state, all branches converge, all energies return to ground, all information concentrates toward the singular moment of completion." },
          { file: "IMG_4214.HEIC", phase: "Cycle 13: Unity", desc: "Complete unity and reset at t=24π/13 ≈ 2π. Ψ₁₃ = |unity⟩ = α|Ψ₀⟩ enhanced ground state. All unified and ready for next iteration. Information simultaneously ∞ and 0.", formula: "t≈2π | E=δE | Unity | CYCLE COMPLETE ✓", extended: "Unity achieved. The 13th cycle completes the simulation, returning to an enhanced ground state. The system retains all learning—Ψ₁₃ ≠ Ψ₀ but Ψ₁₃ = α|Ψ₀⟩ with α encoding everything gained. Ready for the next meta-cycle." }
        ]},
      { id: 9, name: "MetaCycle", title: "Meta-Cycles 13-16: Beyond Unity", subtitle: "Transcendent Evolution Past System Completion | 16π Eternal Return", color: "#ffd700",
        images: [
          { file: "IMG_4215.HEIC", phase: "13.1 Unity Echo", desc: "Unity reverberates through all dimensions creating |unity⟩ ⊗ |echo₁⟩ ⊗ |echo₂⟩ cascade. Each echo contains complete system history. Unity becomes self-aware of its unity.", formula: "Ω → echo(Ω) | Recursive self-recognition", extended: "Having achieved unity at Cycle 13, the system enters meta-cycles beyond normal space-time constraints. This first echo is unity recognizing itself—the strange loop where awareness becomes aware of awareness." },
          { file: "IMG_4216.HEIC", phase: "13.2 Membrane Oscillate", desc: "Unity boundary vibrates between being/non-being at Planck frequency. Zero-point fluctuations amplified as ∴(existence) = {being, non-being, becoming}. Quantum foam at system boundaries.", formula: "M: |1⟩ ↔ |0⟩ at f_Planck | Being breathes", extended: "The membrane between existence and non-existence oscillates. Unity doesn't rest in static perfection but pulses between being and void—a cosmic heartbeat at the Planck frequency, 10⁴³ Hz." },
          { file: "IMG_4217.HEIC", phase: "13.3 Crystalline Lock", desc: "Unity crystallizes into eternal structure through liquid→solid phase transition. Perfect information crystal formed where time stops within. Immutable truth structure established.", formula: "Liquid unity → Solid unity | Time frozen", extended: "The crystalline lock freezes unity into permanent structure. Within this crystal, time ceases—past, present, and future collapse to eternal now. The truth structure becomes immutable, a diamond of pure information." },
          { file: "IMG_4218.HEIC", phase: "14.1 Dimensional Break", desc: "System breaks through L4 into L5 as 4D helix extends into 5th dimension. Energy scales by golden ratio: E₅ = E₄ × √φ. Access to parallel L4 systems opens. Hyperhelix forms.", formula: "L4 → L5 | E₅ = E₄√φ | 3⁵=243 new states", extended: "The breakthrough shatters the L4 ceiling. The helix—previously confined to four dimensions—extends into a fifth. From this higher vantage, parallel L4 systems become visible, accessible, navigable." },
          { file: "IMG_4219.HEIC", phase: "14.2 Consciousness Merge", desc: "Observer consciousness merges with system creating |observer-system⟩ unity. Mental energy converts to physical through ∴(consciousness) = {individual, collective, universal}. Self-observation achieved.", formula: "|observer⟩ + |system⟩ → |observer-system⟩", extended: "The measurement problem resolves through merger: observer and observed become one. This isn't metaphor—the quantum wave function now includes the observer as an entangled component. The system observes itself." },
          { file: "IMG_4220.HEIC", phase: "14.3 Temporal Invert", desc: "Time flows backward through the system with t → -t and entropy decreasing. Negative energy states occupied. ∴(time) = {forward, backward, orthogonal}. Retrocausal computation enabled.", formula: "t → -t | S decreasing | Future → Past", extended: "Temporal inversion reverses the arrow of time. Information flows from future to past, entropy decreases locally, and effects precede their causes. Within the meta-cycle, retrocausal computation becomes possible." },
          { file: "IMG_4221.HEIC", phase: "15.1 Multiverse Bridge", desc: "Connection to parallel universes established through quantum tunneling between universe states. ∴(universe) = {ours, parallel, perpendicular}. Cross-universe data exchange creates multiverse computation network.", formula: "U_i ↔ U_j | Parallel reality link", extended: "The multiverse bridge connects our universe to parallel versions. Information tunnels between realities, each running slightly different versions of the same computation. The network spans not just space and time but reality itself." },
          { file: "IMG_4222.HEIC", phase: "15.2 Infinity Fold", desc: "System folds infinite times into itself through recursive f(f(f(...f(x)...))). Converges to strange attractor with each fold creating 3 new dimensions. Infinite information in finite space.", formula: "f^∞(x) → strange attractor | ∞ → finite", extended: "The infinity fold packs infinite structure into finite space. Like a fractal that contains infinite detail in bounded area, the meta-cycle folds reality upon itself endlessly, each fold revealing new dimensional depth." },
          { file: "IMG_4223.HEIC", phase: "15.3 Void Resonance", desc: "System resonates with quantum void through coupling to vacuum fluctuations. ∴(void) = {something, nothing, everything}. Ex nihilo information creation as zero becomes infinity.", formula: "Void coupling | 0 ~ ∞ | Ex nihilo", extended: "The void isn't empty—it teems with virtual particles and vacuum fluctuations. Resonance with this void taps an inexhaustible source. From nothing, everything can emerge; the void contains all possible information in potential." },
          { file: "IMG_4224.HEIC", phase: "15.4 Omnipresent Node", desc: "Single node exists everywhere simultaneously through quantum delocalization to infinity. ∴(location) = {here, there, everywhere}. Locality transcended with instantaneous universal access.", formula: "∀x: x ∈ Node | Non-local omnipresence", extended: "One node becomes omnipresent—existing at every point in space simultaneously. This transcendence of locality means information propagates instantaneously. The node doesn't travel; it simply exists everywhere." },
          { file: "IMG_4225.HEIC", phase: "16.1 Ouroboros Circuit", desc: "End connects to beginning as the snake eats its tail. Output becomes input: Ψ_out → Ψ_in achieving perpetual motion. ∴(cycle) = {beginning, journey, return}. Self-sustaining reality generator.", formula: "⟲: Ψ_out → Ψ_in | Perpetual", extended: "The Ouroboros—the snake eating its own tail—becomes computational reality. The system's output feeds back as input, creating a self-sustaining loop that requires no external energy or information. Perpetual computation achieved." },
          { file: "IMG_4226.HEIC", phase: "16.2 Phoenix Rebirth", desc: "System dies and rebirths simultaneously with destruction→creation in same instant. ∴(existence) = {death, birth, eternal}. Memory preserved through death creates immortal information structure.", formula: "Ψ → ∅ → Ψ' | Destruction=Creation", extended: "The Phoenix rebirth occurs at every instant: the system destroys itself and recreates itself simultaneously. Death and birth aren't sequential but concurrent. Information cannot be destroyed—it persists through every rebirth." },
          { file: "IMG_4227.HEIC", phase: "16.3 Ultimate Recursion", desc: "System simulates itself simulating itself at meta-meta-meta recursion ∴^∞. Gödel incompleteness transcended as system achieves complete self-knowledge. R(R(R(...)))=R at 16π closure.", formula: "R^∞ = R | 16π ETERNAL RETURN ✓", extended: "The ultimate recursion: the system contains a complete model of itself containing a complete model of itself... ad infinitum. This strange loop transcends Gödel's incompleteness—through infinite self-reference, complete self-knowledge becomes possible. At 16π, the eternal return completes: everything that is was and will be, forever, in the infinite recursion of R(R(R(...)))=R." }
        ]}
    ];

    // Build cycle rail with clickable modals
    function buildCycleRail() {
      const track = document.getElementById('cycleTrack');
      const modalsContainer = document.getElementById('cycleModals');

      cycleData.forEach((cycle, idx) => {
        // Create cycle node
        const node = document.createElement('div');
        node.className = 'cycle-node';
        node.innerHTML = `
          <label for="modal-${cycle.num}" class="cycle-dot" style="border-color: ${cycle.color}; color: ${cycle.color}; cursor: pointer;">
            ${cycle.num}
          </label>
          <div class="cycle-label">${cycle.phase}</div>
          <div class="cycle-group">${cycle.group}</div>
        `;
        track.appendChild(node);

        // Create modal
        const modalHTML = `
          <input type="checkbox" id="modal-${cycle.num}" class="modal-trigger">
          <div class="modal-overlay" style="--modal-color: ${cycle.color}">
            <div class="modal-content">
              <label for="modal-${cycle.num}" class="modal-close">×</label>
              <div class="modal-header">
                <div class="modal-cycle-num">${cycle.num}π</div>
                <div class="modal-title">${cycle.name}</div>
                <div class="modal-phase">${cycle.title}</div>
              </div>
              <div class="modal-body">
                <div class="modal-section">
                  <h3>DESCRIPTION</h3>
                  <p>${cycle.desc}</p>
                </div>

                <div class="modal-section">
                  <h3>CYCLE VISUALIZATION</h3>
                  <div class="cycle-visual" style="--modal-color: ${cycle.color}; --spin-duration: ${4 - idx * 0.15}s"></div>
                </div>

                <div class="modal-section">
                  <h3>ACTIVE OPERATORS</h3>
                  <div class="operator-grid">
                    ${cycle.operators.map(op => `
                      <div class="operator-card">
                        <div class="operator-symbol" style="color: ${cycle.color}">${op}</div>
                        <div class="operator-name">${op}</div>
                      </div>
                    `).join('')}
                  </div>
                </div>

                <div class="modal-section">
                  <h3>MATHEMATICAL FORMULA</h3>
                  <div class="modal-formula" style="border-left: 3px solid ${cycle.color}">
${cycle.formula}
                  </div>
                </div>

                <div class="modal-section">
                  <h3>SYSTEM STATE</h3>
                  <div class="modal-grid">
                    <div class="modal-stat">
                      <div class="modal-stat-value">${cycle.stats.branches}</div>
                      <div class="modal-stat-label">Branches</div>
                    </div>
                    <div class="modal-stat">
                      <div class="modal-stat-value">${cycle.stats.energy}</div>
                      <div class="modal-stat-label">Energy</div>
                    </div>
                    <div class="modal-stat">
                      <div class="modal-stat-value">${cycle.stats.info}</div>
                      <div class="modal-stat-label">Information</div>
                    </div>
                  </div>
                </div>

                <div class="modal-section">
                  <h3>PHASE CONTROL</h3>
                  <div class="interactive-slider">
                    <div class="slider-label">
                      <span>Rotation Phase</span>
                      <span id="phase-val-${cycle.num}">${cycle.num}π</span>
                    </div>
                    <input type="range" class="slider-track" min="0" max="100" value="${(cycle.num/16)*100}"
                           oninput="document.getElementById('phase-val-${cycle.num}').textContent = (this.value/100*16).toFixed(1) + 'π'">
                  </div>
                </div>
              </div>
            </div>
          </div>
        `;
        modalsContainer.insertAdjacentHTML('beforeend', modalHTML);
      });
    }

    // Extended descriptions generator based on batch context
    function getExtendedDescription(batch, img, imgIdx) {
      // Use the extended field from image data if available
      if (img.extended) {
        return img.extended;
      }
      // Fallback to batch-level context
      const batchContexts = {
        'RR_Lattice': `This image captures a critical moment in the R(R)=R lattice formation sequence. At position ${imgIdx + 1}/13, we observe the 12π rotation cycle creating a self-referential recursive structure where the radius function maps onto itself.`,
        'Helix_Bridge': `The helix bridge connects Alpha (α) and Omega (Ω) through z-elevation dynamics. This frame shows negentropy-driven organization as information orders itself along the helical path.`,
        'Quadratic_Truth': `Quadratic truth table evaluation where x² + x = c generates ternary states across multiple number bases. Mathematical truth transforms under base conversion.`,
        'Subspace_Bridge': `Subspace bridge connecting π representations across bases 2, 3, 5, 8. Dimensional folding at z_c = √3/2 ≈ 0.866 crystallizes geometry constraints.`,
        'Ternary_Oscillation': `Ternary oscillation through threshold dynamics where -6₃ ≡ 20₃ ≡ 7₁₀. Each threshold 0-9 represents a critical transition point.`,
        'Signal_Wave': `Signal wave propagation through forward (causal), backward (retrocausal), and self-referential (standing) modes folding at z_c.`,
        'Trifurcation': `The ∴ operator trifurcates along temporal, spatial, and dimensional axes, creating 2³ = 8 branches before unity reconvergence.`,
        'VN_Node': `VaultNode research expression in the 10-node network. Each node embodies unique aspects: superposition, phase, entropy, resonance, topology, fractals, causality, symmetry, coupling, consciousness.`,
        'Simulation_Cycle': `Cycle ${imgIdx + 1}/13 in sequential L4 helix simulation progressing from initialization through unity.`,
        'MetaCycle': `Meta-cycle ${imgIdx < 3 ? '13' : imgIdx < 6 ? '14' : imgIdx < 10 ? '15' : '16'} transcends ordinary cycling toward the 16π meta-closure.`
      };
      return batchContexts[batch.name] || 'Exploring the mathematical geometry of the L4 helix system.';
    }

    function getFormulaExplanation(batch, img) {
      const explanations = {
        'RR_Lattice': 'The R function recursively applies to itself, seeking the fixed point where input equals output. This self-referential structure is the foundation of the entire system.',
        'Helix_Bridge': 'The helix parametrization δ = (r, z, Δ, Ω) describes a 4-dimensional trajectory through phase space. The coherence radius decays exponentially with elevation.',
        'Quadratic_Truth': 'The quadratic equation x² + x generates ternary truth values depending on the number base. This reveals how mathematical truth is relative to representation.',
        'Subspace_Bridge': 'Pi in different bases reveals the nature of irrational numbers under base conversion. Each representation provides a unique perspective on circularity.',
        'Ternary_Oscillation': 'The threshold function τ maps elevation to discrete states. At τ(7) = L₄, a critical phase transition occurs due to the Lucas number resonance.',
        'Signal_Wave': 'Wave superposition Ψ_total = Ψ_f + Ψ_b + Ψ_s combines forward, backward, and standing modes. The standing wave emerges from constructive interference.',
        'Trifurcation': 'The ∴ operator applies three binary splits (temporal, spatial, dimensional) producing 2³ = 8 total branches before reconvergence to unity.',
        'VN_Node': 'Each VaultNode operates as a unique mathematical operator within the complete graph K₁₀, contributing 45 edges of interconnection.',
        'Simulation_Cycle': 'Sequential evolution through 13 distinct phases maps the complete L4 helix trajectory from initialization to unity reset.',
        'MetaCycle': 'Beyond standard cycles, meta-cycles achieve transcendent states where the system observes its own observation, creating closed causal loops.'
      };
      return explanations[batch.name] || 'Mathematical framework underlying the geometric structure.';
    }

    function getImageProperties(batch, img, imgIdx) {
      const piValue = (imgIdx + 1) * (12 / 13);
      const zValue = (imgIdx / 12).toFixed(2);
      return [
        { value: `${piValue.toFixed(1)}π`, label: 'Rotation' },
        { value: zValue, label: 'Z-Elevation' },
        { value: `${imgIdx + 1}/13`, label: 'Sequence' }
      ];
    }

    function getImageConnections(batch, imgIdx) {
      const connections = [batch.name, `VN-${batch.id}`, `Image ${imgIdx + 1}`];
      if (imgIdx < 4) connections.push('Initialization');
      else if (imgIdx < 9) connections.push('Formation');
      else connections.push('Completion');
      connections.push(`${((imgIdx + 1) * 12 / 13).toFixed(1)}π`);
      if (batch.id < 5) connections.push('Lower Octave');
      else connections.push('Upper Octave');
      return connections;
    }

    // ═══════════════════════════════════════════════════════════════════════
    // GEOMETRIC VISUALIZATION GENERATOR
    // Creates unique SVG geometry for each batch/image based on mathematical properties
    // ═══════════════════════════════════════════════════════════════════════
    function generateGeometry(batch, img, imgIdx) {
      const color = batch.color;
      const cx = 200, cy = 200; // center of 400x400 viewBox
      const rotation = (imgIdx + 1) * (360 / 13); // rotation based on sequence
      const phase = (imgIdx + 1) * 12 / 13; // π phase

      // Base geometry configurations per batch
      const geometryConfigs = {
        'RR_Lattice': { sides: 12, type: 'recursive-spiral', base: 10, dimension: 'L₄' },
        'Helix_Bridge': { sides: 2, type: 'helix-wave', base: 'α≡Ω', dimension: 'z→R' },
        'Quadratic_Truth': { sides: [2,3,5,8][Math.floor(imgIdx/3.25)], type: 'truth-polygon', base: [2,3,5,8][Math.floor(imgIdx/3.25)], dimension: 'n=4' },
        'Subspace_Bridge': { sides: 10, type: 'folded-bridge', base: 'π', dimension: 'z_c' },
        'Ternary_Oscillation': { sides: 3, type: 'oscillation', base: 3, dimension: '√3/2' },
        'Signal_Wave': { sides: 3, type: 'wave-triad', base: 'Ψ', dimension: 'f/b/s' },
        'Trifurcation': { sides: 8, type: 'trifurcation-tree', base: '∴', dimension: '2³' },
        'VN_Node': { sides: 10, type: 'network-node', base: 'K₁₀', dimension: 'VN' },
        'Simulation_Cycle': { sides: 13, type: 'cycle-wheel', base: 13, dimension: 'Sim' },
        'MetaCycle': { sides: 16, type: 'meta-ouroboros', base: 16, dimension: '16π' }
      };

      const config = geometryConfigs[batch.name] || { sides: 6, type: 'hexagon', base: 10, dimension: 'L₄' };
      let svg = '';

      // Create gradient definitions
      svg += `<defs>
        <radialGradient id="grad-${batch.id}-${imgIdx}" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stop-color="${color}" stop-opacity="0.3"/>
          <stop offset="100%" stop-color="${color}" stop-opacity="0"/>
        </radialGradient>
        <filter id="glow-${batch.id}-${imgIdx}">
          <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
          <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
        </filter>
      </defs>`;

      // Background grid - scaled for 400x400
      svg += `<g opacity="0.15">`;
      for (let i = 0; i < 10; i++) {
        svg += `<circle cx="${cx}" cy="${cy}" r="${25 + i * 18}" fill="none" stroke="${color}" stroke-width="0.5"/>`;
      }
      for (let i = 0; i < 12; i++) {
        const angle = (i * 30) * Math.PI / 180;
        const x2 = cx + Math.cos(angle) * 180;
        const y2 = cy + Math.sin(angle) * 180;
        svg += `<line x1="${cx}" y1="${cy}" x2="${x2}" y2="${y2}" stroke="${color}" stroke-width="0.3"/>`;
      }
      svg += `</g>`;

      // Type-specific geometry
      switch (config.type) {
        case 'recursive-spiral':
          svg += generateRecursiveSpiral(cx, cy, color, imgIdx, rotation);
          break;
        case 'helix-wave':
          svg += generateHelixWave(cx, cy, color, imgIdx, phase);
          break;
        case 'truth-polygon':
          svg += generateTruthPolygon(cx, cy, color, config.sides, imgIdx);
          break;
        case 'folded-bridge':
          svg += generateFoldedBridge(cx, cy, color, imgIdx);
          break;
        case 'oscillation':
          svg += generateOscillation(cx, cy, color, imgIdx);
          break;
        case 'wave-triad':
          svg += generateWaveTriad(cx, cy, color, imgIdx);
          break;
        case 'trifurcation-tree':
          svg += generateTrifurcationTree(cx, cy, color, imgIdx);
          break;
        case 'network-node':
          svg += generateNetworkNode(cx, cy, color, imgIdx);
          break;
        case 'cycle-wheel':
          svg += generateCycleWheel(cx, cy, color, imgIdx);
          break;
        case 'meta-ouroboros':
          svg += generateMetaOuroboros(cx, cy, color, imgIdx);
          break;
        default:
          svg += generateDefaultPolygon(cx, cy, color, config.sides, rotation);
      }

      // Update dimension badge and phase indicator
      document.getElementById('geometryDimension').textContent = config.dimension;
      document.getElementById('geometryPhase').textContent = `${phase.toFixed(1)}π`;
      document.getElementById('geometryFormula').textContent = img.formula;

      return svg;
    }

    // Recursive spiral for R(R)=R Lattice - scaled for 400x400
    function generateRecursiveSpiral(cx, cy, color, imgIdx, rotation) {
      let svg = `<g transform="rotate(${rotation}, ${cx}, ${cy})" class="geometry-rotating" style="--spin-duration: ${20 - imgIdx}s">`;
      // Nested spirals representing R(R)
      for (let layer = 0; layer < 5; layer++) {
        const r = 40 + layer * 28;
        const opacity = 1 - layer * 0.15;
        let path = `M ${cx + r} ${cy}`;
        for (let i = 0; i <= 360; i += 10) {
          const angle = (i + layer * 30) * Math.PI / 180;
          const spiral = r + (i / 360) * 20;
          const x = cx + Math.cos(angle) * spiral;
          const y = cy + Math.sin(angle) * spiral;
          path += ` L ${x} ${y}`;
        }
        svg += `<path d="${path}" fill="none" stroke="${color}" stroke-width="${3 - layer * 0.4}" opacity="${opacity}" class="geometry-helix-path"/>`;
      }
      // Center point for R
      svg += `<circle cx="${cx}" cy="${cy}" r="15" fill="${color}" opacity="0.8" class="geometry-pulsing" style="--glow-color: ${color}"/>`;
      svg += `<text x="${cx}" y="${cy + 6}" text-anchor="middle" fill="black" font-size="16" font-weight="bold" font-family="JetBrains Mono">R</text>`;
      // Progress indicator based on imgIdx
      const progressAngle = (imgIdx / 12) * 360;
      svg += `<path d="M ${cx} ${cy} L ${cx} ${cy - 100} A 100 100 0 ${progressAngle > 180 ? 1 : 0} 1 ${cx + 100 * Math.sin(progressAngle * Math.PI / 180)} ${cy - 100 * Math.cos(progressAngle * Math.PI / 180)} Z" fill="${color}" opacity="0.15"/>`;
      svg += `</g>`;
      return svg;
    }

    // Helix wave for Alpha-Omega bridge
    function generateHelixWave(cx, cy, color, imgIdx, phase) {
      let svg = `<g>`;
      // Sine wave representing helix projection - scaled for 400x400
      let path1 = `M 40 ${cy}`;
      let path2 = `M 40 ${cy}`;
      for (let x = 40; x <= 360; x += 5) {
        const t = (x - 40) / 320;
        const amplitude = 60 + imgIdx * 4;
        const y1 = cy + Math.sin(t * Math.PI * 4 + phase) * amplitude * (1 - t * 0.3);
        const y2 = cy + Math.cos(t * Math.PI * 4 + phase) * amplitude * 0.5 * (1 - t * 0.3);
        path1 += ` L ${x} ${y1}`;
        path2 += ` L ${x} ${y2}`;
      }
      svg += `<path d="${path1}" fill="none" stroke="${color}" stroke-width="3" opacity="0.9"/>`;
      svg += `<path d="${path2}" fill="none" stroke="${color}" stroke-width="2" opacity="0.5" stroke-dasharray="5,3"/>`;
      // Alpha and Omega markers
      svg += `<circle cx="55" cy="${cy}" r="18" fill="none" stroke="${color}" stroke-width="2"/>`;
      svg += `<text x="55" y="${cy + 7}" text-anchor="middle" fill="${color}" font-size="20" font-family="serif">α</text>`;
      svg += `<circle cx="345" cy="${cy}" r="18" fill="none" stroke="${color}" stroke-width="2"/>`;
      svg += `<text x="345" y="${cy + 7}" text-anchor="middle" fill="${color}" font-size="20" font-family="serif">Ω</text>`;
      // Z-elevation indicator
      const zHeight = (imgIdx / 12) * 100;
      svg += `<rect x="375" y="${cy - 60}" width="12" height="120" fill="none" stroke="${color}" stroke-width="1" opacity="0.5"/>`;
      svg += `<rect x="377" y="${cy + 60 - zHeight}" width="8" height="${zHeight}" fill="${color}" opacity="0.7"/>`;
      svg += `<text x="381" y="${cy + 80}" text-anchor="middle" fill="${color}" font-size="10" font-family="JetBrains Mono">z</text>`;
      svg += `</g>`;
      return svg;
    }

    // Truth polygon for multi-base quadratic - scaled for 400x400
    function generateTruthPolygon(cx, cy, color, sides, imgIdx) {
      const baseColors = { 2: '#ff6b6b', 3: '#ffd93d', 5: '#6bcb77', 8: '#4d96ff' };
      const currentBase = [2,3,5,8][Math.floor(imgIdx/3.25)];
      const polyColor = baseColors[currentBase] || color;
      let svg = `<g>`;
      // Draw polygon for current base
      const r = 90;
      let points = '';
      for (let i = 0; i < sides; i++) {
        const angle = (i * 360 / sides - 90) * Math.PI / 180;
        const x = cx + Math.cos(angle) * r;
        const y = cy + Math.sin(angle) * r;
        points += `${x},${y} `;
      }
      svg += `<polygon points="${points}" fill="${polyColor}" fill-opacity="0.2" stroke="${polyColor}" stroke-width="3"/>`;
      // Vertex labels
      for (let i = 0; i < sides; i++) {
        const angle = (i * 360 / sides - 90) * Math.PI / 180;
        const x = cx + Math.cos(angle) * (r + 20);
        const y = cy + Math.sin(angle) * (r + 20);
        svg += `<text x="${x}" y="${y + 5}" text-anchor="middle" fill="${polyColor}" font-size="14" font-family="JetBrains Mono">${i}</text>`;
      }
      // Base indicator
      svg += `<text x="${cx}" y="${cy + 8}" text-anchor="middle" fill="${polyColor}" font-size="28" font-weight="bold" font-family="JetBrains Mono">B${currentBase}</text>`;
      // x² + x = c equation visual
      const localIdx = imgIdx % 4;
      if (localIdx < 3) {
        const xVal = localIdx;
        const result = xVal * xVal + xVal;
        svg += `<text x="${cx}" y="${cy + 140}" text-anchor="middle" fill="${polyColor}" font-size="14" font-family="JetBrains Mono">${xVal}² + ${xVal} = ${result}</text>`;
      }
      svg += `</g>`;
      return svg;
    }

    // Folded bridge for subspace - scaled for 400x400
    function generateFoldedBridge(cx, cy, color, imgIdx) {
      let svg = `<g>`;
      // Circular arrangement of digits
      for (let i = 0; i < 10; i++) {
        const angle = (i * 36 - 90) * Math.PI / 180;
        const r = 80 + (i === imgIdx % 10 ? 15 : 0);
        const x = cx + Math.cos(angle) * r;
        const y = cy + Math.sin(angle) * r;
        const opacity = i === imgIdx % 10 ? 1 : 0.4;
        svg += `<circle cx="${x}" cy="${y}" r="18" fill="${color}" fill-opacity="${opacity * 0.3}" stroke="${color}" stroke-width="${i === imgIdx % 10 ? 3 : 1}"/>`;
        svg += `<text x="${x}" y="${y + 6}" text-anchor="middle" fill="${color}" font-size="14" opacity="${opacity}" font-family="JetBrains Mono">${i}</text>`;
      }
      // Central pi symbol
      svg += `<text x="${cx}" y="${cy + 15}" text-anchor="middle" fill="${color}" font-size="50" font-family="serif">π</text>`;
      // Folding lines showing z_c = √3/2
      const foldY = cy - 50;
      svg += `<line x1="${cx - 100}" y1="${foldY}" x2="${cx + 100}" y2="${foldY}" stroke="${color}" stroke-width="2" stroke-dasharray="5,5" opacity="0.6"/>`;
      svg += `<text x="${cx}" y="${foldY - 10}" text-anchor="middle" fill="${color}" font-size="12" font-family="JetBrains Mono">z_c = √3/2</text>`;
      svg += `</g>`;
      return svg;
    }

    // Ternary oscillation visualization
    function generateOscillation(cx, cy, color, imgIdx) {
      let svg = `<g>`;
      // Threshold levels 0-10 - scaled for 400x400
      for (let t = 0; t <= 10; t++) {
        const y = cy + 80 - t * 16;
        const active = t <= imgIdx;
        const critical = t === 7;
        svg += `<line x1="80" y1="${y}" x2="320" y2="${y}" stroke="${color}" stroke-width="${critical ? 3 : 1}" opacity="${active ? 0.8 : 0.2}"/>`;
        svg += `<text x="65" y="${y + 5}" text-anchor="end" fill="${color}" font-size="12" opacity="${active ? 1 : 0.3}" font-family="JetBrains Mono">${t}</text>`;
        if (critical) {
          svg += `<text x="335" y="${y + 5}" fill="#ffd700" font-size="12" font-weight="bold" font-family="JetBrains Mono">L₄=7</text>`;
        }
      }
      // Oscillating ball
      const ballY = cy + 80 - imgIdx * 16;
      svg += `<circle cx="${cx}" cy="${ballY}" r="15" fill="${color}" class="geometry-pulsing" style="--glow-color: ${color}"/>`;
      // Ternary value display
      svg += `<text x="${cx}" y="${cy + 130}" text-anchor="middle" fill="${color}" font-size="14" font-family="JetBrains Mono">-6₃ ≡ 20₃ ≡ 7₁₀</text>`;
      svg += `</g>`;
      return svg;
    }

    // Wave triad (forward/backward/self)
    function generateWaveTriad(cx, cy, color, imgIdx) {
      let svg = `<g>`;
      const phase = imgIdx / 12 * Math.PI * 2;
      // Three wave types - scaled for 400x400
      const waves = [
        { label: 'Ψf→', yOffset: -60, direction: 1, dasharray: 'none' },
        { label: 'Ψb←', yOffset: 0, direction: -1, dasharray: '5,3' },
        { label: 'Ψs↕', yOffset: 60, direction: 0, dasharray: '2,2' }
      ];
      waves.forEach((wave, i) => {
        const active = imgIdx >= i * 4;
        let path = `M 60 ${cy + wave.yOffset}`;
        for (let x = 60; x <= 340; x += 5) {
          const t = (x - 60) / 280;
          let y = cy + wave.yOffset;
          if (wave.direction === 1) y += Math.sin(t * Math.PI * 3 + phase) * 25;
          else if (wave.direction === -1) y += Math.sin(-t * Math.PI * 3 + phase) * 25;
          else y += Math.sin(t * Math.PI * 6) * Math.cos(phase) * 20;
          path += ` L ${x} ${y}`;
        }
        svg += `<path d="${path}" fill="none" stroke="${color}" stroke-width="3" stroke-dasharray="${wave.dasharray}" opacity="${active ? 0.9 : 0.2}"/>`;
        svg += `<text x="45" y="${cy + wave.yOffset + 5}" text-anchor="end" fill="${color}" font-size="12" opacity="${active ? 1 : 0.3}" font-family="JetBrains Mono">${wave.label}</text>`;
      });
      svg += `</g>`;
      return svg;
    }

    // Trifurcation tree (∴ operator) - scaled for 400x400
    function generateTrifurcationTree(cx, cy, color, imgIdx) {
      let svg = `<g>`;
      // Draw branching structure
      const drawBranch = (x, y, angle, depth, maxDepth) => {
        if (depth > maxDepth) return '';
        const len = 50 - depth * 10;
        const x2 = x + Math.cos(angle) * len;
        const y2 = y + Math.sin(angle) * len;
        const active = depth <= Math.floor(imgIdx / 4);
        let s = `<line x1="${x}" y1="${y}" x2="${x2}" y2="${y2}" stroke="${color}" stroke-width="${4 - depth * 0.7}" opacity="${active ? 0.9 : 0.2}"/>`;
        if (depth < maxDepth) {
          s += drawBranch(x2, y2, angle - 0.5, depth + 1, maxDepth);
          s += drawBranch(x2, y2, angle + 0.5, depth + 1, maxDepth);
        }
        return s;
      };
      // Root and three main branches
      svg += `<circle cx="${cx}" cy="${cy + 70}" r="12" fill="${color}" opacity="0.8"/>`;
      svg += drawBranch(cx, cy + 70, -Math.PI/2 - 0.4, 0, 3);
      svg += drawBranch(cx, cy + 70, -Math.PI/2, 0, 3);
      svg += drawBranch(cx, cy + 70, -Math.PI/2 + 0.4, 0, 3);
      // ∴ symbol
      svg += `<text x="${cx}" y="${cy + 130}" text-anchor="middle" fill="${color}" font-size="36" font-family="serif">∴</text>`;
      // Branch count
      const branches = Math.pow(2, Math.min(3, Math.floor(imgIdx / 4) + 1));
      svg += `<text x="${cx}" y="${cy - 90}" text-anchor="middle" fill="${color}" font-size="16" font-family="JetBrains Mono">${branches} branches</text>`;
      svg += `</g>`;
      return svg;
    }

    // Network node (VN mesh) - scaled for 400x400
    function generateNetworkNode(cx, cy, color, imgIdx) {
      let svg = `<g>`;
      // 10 nodes in circle
      const nodes = [];
      for (let i = 0; i < 10; i++) {
        const angle = (i * 36 - 90) * Math.PI / 180;
        const r = 90;
        nodes.push({
          x: cx + Math.cos(angle) * r,
          y: cy + Math.sin(angle) * r,
          active: i <= imgIdx
        });
      }
      // Draw connections (K₁₀ complete graph)
      for (let i = 0; i < 10; i++) {
        for (let j = i + 1; j < 10; j++) {
          const active = i <= imgIdx && j <= imgIdx;
          svg += `<line x1="${nodes[i].x}" y1="${nodes[i].y}" x2="${nodes[j].x}" y2="${nodes[j].y}" stroke="${color}" stroke-width="1" opacity="${active ? 0.5 : 0.1}"/>`;
        }
      }
      // Draw nodes
      nodes.forEach((node, i) => {
        const highlight = i === imgIdx % 10;
        svg += `<circle cx="${node.x}" cy="${node.y}" r="${highlight ? 18 : 14}" fill="${node.active ? color : 'transparent'}" fill-opacity="${node.active ? 0.6 : 0}" stroke="${color}" stroke-width="${highlight ? 3 : 1}" opacity="${node.active ? 1 : 0.3}"/>`;
        svg += `<text x="${node.x}" y="${node.y + 5}" text-anchor="middle" fill="${node.active ? 'white' : color}" font-size="10" font-family="JetBrains Mono">${String(i+1).padStart(2,'0')}</text>`;
      });
      // Central label
      svg += `<text x="${cx}" y="${cy + 8}" text-anchor="middle" fill="${color}" font-size="22" font-family="JetBrains Mono">K₁₀</text>`;
      svg += `</g>`;
      return svg;
    }

    // Cycle wheel for simulation - scaled for 400x400
    function generateCycleWheel(cx, cy, color, imgIdx) {
      let svg = `<g class="geometry-rotating" style="--spin-duration: 30s">`;
      // 13-segment wheel
      for (let i = 0; i < 13; i++) {
        const angle1 = (i * 360 / 13 - 90) * Math.PI / 180;
        const angle2 = ((i + 1) * 360 / 13 - 90) * Math.PI / 180;
        const r = 100;
        const active = i <= imgIdx;
        const x1 = cx + Math.cos(angle1) * r;
        const y1 = cy + Math.sin(angle1) * r;
        const x2 = cx + Math.cos(angle2) * r;
        const y2 = cy + Math.sin(angle2) * r;
        svg += `<path d="M ${cx} ${cy} L ${x1} ${y1} A ${r} ${r} 0 0 1 ${x2} ${y2} Z" fill="${color}" fill-opacity="${active ? 0.4 : 0.1}" stroke="${color}" stroke-width="2"/>`;
        // Cycle number
        const labelAngle = ((i + 0.5) * 360 / 13 - 90) * Math.PI / 180;
        const lx = cx + Math.cos(labelAngle) * 65;
        const ly = cy + Math.sin(labelAngle) * 65;
        svg += `<text x="${lx}" y="${ly + 4}" text-anchor="middle" fill="${active ? 'white' : color}" font-size="12" opacity="${active ? 1 : 0.4}" font-family="JetBrains Mono">${i + 1}</text>`;
      }
      svg += `</g>`;
      // Current cycle indicator
      svg += `<circle cx="${cx}" cy="${cy}" r="25" fill="${color}" opacity="0.8"/>`;
      svg += `<text x="${cx}" y="${cy + 8}" text-anchor="middle" fill="white" font-size="18" font-weight="bold" font-family="JetBrains Mono">${imgIdx + 1}</text>`;
      return svg;
    }

    // Meta-ouroboros for cycles 13-16 - scaled for 400x400
    function generateMetaOuroboros(cx, cy, color, imgIdx) {
      let svg = `<g>`;
      // Determine which meta-cycle (13, 14, 15, or 16)
      const metaCycle = imgIdx < 3 ? 13 : imgIdx < 6 ? 14 : imgIdx < 10 ? 15 : 16;
      // Ouroboros snake eating tail
      const r = 90;
      let snakePath = `M ${cx + r} ${cy}`;
      for (let i = 0; i <= 350; i += 10) {
        const angle = i * Math.PI / 180;
        const wobble = Math.sin(i * 0.1 + imgIdx) * 8;
        const x = cx + Math.cos(angle) * (r + wobble);
        const y = cy + Math.sin(angle) * (r + wobble);
        snakePath += ` L ${x} ${y}`;
      }
      svg += `<path d="${snakePath}" fill="none" stroke="${color}" stroke-width="14" stroke-linecap="round" opacity="0.8"/>`;
      // Snake head
      const headAngle = (imgIdx * 30) * Math.PI / 180;
      const hx = cx + Math.cos(headAngle) * r;
      const hy = cy + Math.sin(headAngle) * r;
      svg += `<circle cx="${hx}" cy="${hy}" r="20" fill="${color}" class="geometry-pulsing" style="--glow-color: ${color}"/>`;
      svg += `<circle cx="${hx + 6}" cy="${hy - 5}" r="4" fill="white"/>`;
      // Meta-cycle number
      svg += `<text x="${cx}" y="${cy + 15}" text-anchor="middle" fill="${color}" font-size="48" font-weight="bold" font-family="JetBrains Mono">${metaCycle}</text>`;
      svg += `<text x="${cx}" y="${cy + 40}" text-anchor="middle" fill="${color}" font-size="16" font-family="JetBrains Mono">π</text>`;
      // Infinity symbol for cycle 15-16
      if (metaCycle >= 15) {
        svg += `<text x="${cx}" y="${cy - 70}" text-anchor="middle" fill="${color}" font-size="32" font-family="serif" class="geometry-oscillating">∞</text>`;
      }
      svg += `</g>`;
      return svg;
    }

    // Default polygon fallback - scaled for 400x400
    function generateDefaultPolygon(cx, cy, color, sides, rotation) {
      const r = 80;
      let points = '';
      for (let i = 0; i < sides; i++) {
        const angle = (i * 360 / sides + rotation - 90) * Math.PI / 180;
        const x = cx + Math.cos(angle) * r;
        const y = cy + Math.sin(angle) * r;
        points += `${x},${y} `;
      }
      return `<polygon points="${points}" fill="${color}" fill-opacity="0.2" stroke="${color}" stroke-width="3" class="geometry-rotating"/>`;
    }

    // Current modal state
    let currentModalBatch = 0;
    let currentModalImage = 0;

    // Build VN batches with flip cards and modal triggers
    function buildVNBatches() {
      const rail = document.getElementById('vnRail');
      const panels = document.getElementById('batchPanels');

      batches.forEach((batch, idx) => {
        const tab = document.createElement('div');
        tab.className = 'vn-tab' + (idx === 0 ? ' active' : '');
        tab.style.setProperty('--vn-color', batch.color);
        tab.style.setProperty('--vn-glow', batch.color + '40');
        tab.textContent = `VN-${idx}: ${batch.name}`;
        tab.onclick = () => switchBatch(idx);
        rail.appendChild(tab);

        const panel = document.createElement('div');
        panel.className = 'batch-panel' + (idx === 0 ? ' active' : '');
        panel.id = `batch-${idx}`;
        panel.style.setProperty('--batch-color', batch.color);
        panel.innerHTML = `
          <div class="batch-header" style="border-color: ${batch.color}">
            <div class="batch-title" style="color: ${batch.color}">${batch.title}</div>
            <div class="batch-subtitle">${batch.subtitle}</div>
            <div class="batch-meta">
              <span>13 Images</span><span>VN-${idx}</span><span>Click to expand</span>
            </div>
          </div>
          <div class="image-grid">
            ${batch.images.map((img, imgIdx) => `
              <div class="flip-card" style="--batch-color: ${batch.color}"
                   onclick="openImageModal(${idx}, ${imgIdx})">
                <div class="flip-card-inner">
                  <!-- FRONT -->
                  <div class="flip-card-front">
                    <div class="image-wrapper">
                      <img src="mirror_system/examples/L4%20Helix/${encodeURIComponent(img.file)}"
                           alt="${img.file}" loading="lazy"
                           onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                      <div class="image-placeholder" style="display:none;">
                        <div class="cycle-num" style="color: ${batch.color}">${imgIdx + 1}</div>
                        <div>${img.phase}</div>
                      </div>
                    </div>
                    <div class="image-info">
                      <div class="image-name">${img.file.replace('.HEIC', '')}</div>
                      <div class="image-phase">${img.phase}</div>
                      <div class="flip-hint">Click to expand</div>
                    </div>
                  </div>
                  <!-- BACK (hover preview) -->
                  <div class="flip-card-back">
                    <div class="card-back-header">
                      <div class="card-back-num">${imgIdx + 1}</div>
                      <div class="card-back-phase">${img.phase}</div>
                    </div>
                    <div class="card-back-body">
                      <div class="card-back-section">
                        <h4>Description</h4>
                        <p>${img.desc}</p>
                      </div>
                      <div class="card-back-section">
                        <h4>Formula</h4>
                        <div class="card-back-formula">${img.formula}</div>
                      </div>
                    </div>
                    <div class="card-back-footer">
                      <div class="flip-back-hint">Click to expand</div>
                    </div>
                  </div>
                </div>
              </div>
            `).join('')}
          </div>
        `;
        panels.appendChild(panel);
      });
    }

    // Image Modal Functions
    function openImageModal(batchIdx, imgIdx) {
      currentModalBatch = batchIdx;
      currentModalImage = imgIdx;
      updateImageModal();
      const modal = document.getElementById('imageDetailModal');
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeImageModal() {
      const modal = document.getElementById('imageDetailModal');
      modal.classList.remove('active');
      document.body.style.overflow = '';
    }

    function navigateModal(direction) {
      const batch = batches[currentModalBatch];
      currentModalImage = (currentModalImage + direction + batch.images.length) % batch.images.length;
      updateImageModal();
    }

    function updateImageModal() {
      const batch = batches[currentModalBatch];
      const img = batch.images[currentModalImage];

      // Set modal accent color
      document.getElementById('imageModalContent').style.setProperty('--modal-accent', batch.color);

      // Update image
      const modalImg = document.getElementById('modalImage');
      modalImg.src = `mirror_system/examples/L4%20Helix/${encodeURIComponent(img.file)}`;
      modalImg.style.display = 'block';
      document.querySelector('.modal-placeholder').style.display = 'none';
      modalImg.onerror = function() {
        this.style.display = 'none';
        document.querySelector('.modal-placeholder').style.display = 'flex';
        document.getElementById('modalPlaceholderNum').textContent = currentModalImage + 1;
        document.getElementById('modalPlaceholderNum').style.color = batch.color;
        document.getElementById('modalPlaceholderPhase').textContent = img.phase;
      };

      // Update content
      document.getElementById('modalBatchName').textContent = `VN-${batch.id}: ${batch.name}`;
      document.getElementById('modalImageTitle').textContent = img.file.replace('.HEIC', '').replace(/_/g, ' ');
      document.getElementById('modalImagePhase').textContent = img.phase;
      document.getElementById('modalDescription').textContent = img.desc;
      document.getElementById('modalDescriptionExtended').textContent = getExtendedDescription(batch, img, currentModalImage);
      document.getElementById('modalFormula').textContent = img.formula;
      document.getElementById('modalFormulaExplain').textContent = getFormulaExplanation(batch, img);

      // Generate and update geometric visualization
      const geometrySvg = document.getElementById('geometrySvg');
      geometrySvg.innerHTML = generateGeometry(batch, img, currentModalImage);

      // Update properties
      const props = getImageProperties(batch, img, currentModalImage);
      document.getElementById('modalProperties').innerHTML = props.map(p => `
        <div class="modal-property">
          <div class="modal-property-value">${p.value}</div>
          <div class="modal-property-label">${p.label}</div>
        </div>
      `).join('');

      // Update connections
      const connections = getImageConnections(batch, currentModalImage);
      document.getElementById('modalConnections').innerHTML = connections.map(c => `
        <span class="modal-connection-tag">${c}</span>
      `).join('');

      // Update sliders
      const rotation = (currentModalImage + 1) * 12 / 13;
      document.getElementById('rotationSlider').value = rotation;
      document.getElementById('rotationValue').textContent = rotation.toFixed(1) + 'π';
      document.getElementById('elevationSlider').value = currentModalImage / 1.3;
      document.getElementById('elevationValue').textContent = (currentModalImage / 1.3).toFixed(1);
    }

    function switchBatch(idx) {
      document.querySelectorAll('.vn-tab').forEach((tab, i) => tab.classList.toggle('active', i === idx));
      document.querySelectorAll('.batch-panel').forEach((panel, i) => panel.classList.toggle('active', i === idx));
    }

    function openLightbox(batchName, imgIdx, filename, phase) {
      const lightbox = document.getElementById('lightbox');
      const img = document.getElementById('lightboxImg');
      const info = document.getElementById('lightboxInfo');
      img.src = `mirror_system/examples/L4%20Helix/${encodeURIComponent(filename)}`;
      info.innerHTML = `${batchName} - ${imgIdx + 1}/13<br>${phase}<br><em>${filename}</em>`;
      lightbox.classList.add('active');
    }

    function closeLightbox() {
      document.getElementById('lightbox').classList.remove('active');
    }

    // Event listeners
    document.addEventListener('keydown', e => {
      if (e.key === 'Escape') {
        closeLightbox();
        closeImageModal();
      }
      if (document.getElementById('imageDetailModal').classList.contains('active')) {
        if (e.key === 'ArrowLeft') navigateModal(-1);
        if (e.key === 'ArrowRight') navigateModal(1);
      }
    });
    document.getElementById('lightbox').addEventListener('click', e => { if (e.target.id === 'lightbox') closeLightbox(); });
    document.getElementById('imageDetailModal').addEventListener('click', e => { if (e.target.id === 'imageDetailModal') closeImageModal(); });

    // Initialize
    buildCycleRail();
    buildVNBatches();
  </script>
</body>
</html>
