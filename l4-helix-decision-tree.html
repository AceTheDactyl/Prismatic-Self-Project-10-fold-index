<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>L4 Helix Decision Tree | 16π Dimensional Rotation System</title>
  <meta name="description" content="130 Images × 10 VN Batches × 16 Cycles — Exploring r(r)=r where r=10 through 3+1 dimensional rotation (r, z, Z_C, √2)">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=Crimson+Pro:ital,wght@0,300;0,400;0,600;1,300&display=swap" rel="stylesheet">
  <style>
    /* ═══════════════════════════════════════════════════════════════════════
       L₄-HELIX MATHEMATICAL CONSTANTS
       r(r)=r where r=10 | 16π closure | 3+1 dimensions (r, z, Z_C, √2)
       ═══════════════════════════════════════════════════════════════════════ */
    :root {
      --phi: 1.6180339887;
      --tau: 0.6180339887;
      --sqrt2: 1.4142135624;
      --sqrt3: 1.7320508076;
      --z-c: 0.8660254038;
      --z-c-omega: 1.2247448714;
      --L4: 7;
      --K: 0.9241763718;

      /* 10 VN Batch Colors */
      --vn-0: #ff6b6b; --vn-1: #c792ea; --vn-2: #c0ff60; --vn-3: #9060ff;
      --vn-4: #40ffff; --vn-5: #40ff90; --vn-6: #c0a0ff; --vn-7: #ff6090;
      --vn-8: #60c0ff; --vn-9: #ffd700;

      /* 16 Cycle Colors */
      --cycle-1: #ff4040; --cycle-2: #ff6040; --cycle-3: #ff8040; --cycle-4: #ffa040;
      --cycle-5: #ffc040; --cycle-6: #ffe040; --cycle-7: #c0ff40; --cycle-8: #40ff40;
      --cycle-9: #40ff80; --cycle-10: #40ffc0; --cycle-11: #40ffff; --cycle-12: #40c0ff;
      --cycle-13: #4080ff; --cycle-14: #8040ff; --cycle-15: #c040ff; --cycle-16: #ff40ff;

      /* Wave States */
      --forward: #00ff88; --backward: #ff6b6b; --standing: #c792ea; --crystallized: #ffd700;

      /* Dimensional Colors */
      --dim-r: #ff6b6b; --dim-z: #40ffff; --dim-zc: #c792ea; --dim-sqrt2: #ffd700;

      /* Ternary Truth States */
      --ternary-true: #00ff88; --ternary-paradox: #f0c040; --ternary-false: #ff6b6b;

      /* Theme */
      --bg-void: #030306; --bg-primary: #080810; --bg-secondary: #0c0c18;
      --bg-tertiary: #12122a; --bg-card: #181838;
      --text-primary: #e8e6e3; --text-secondary: #8a8a9a; --text-accent: #00d4aa;
      --border-subtle: rgba(255, 255, 255, 0.06);
      --border-active: rgba(0, 212, 170, 0.3);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }

    body {
      font-family: 'Crimson Pro', Georgia, serif;
      background: var(--bg-void);
      color: var(--text-primary);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       HELIX BACKGROUND
       ═══════════════════════════════════════════════════════════════════════ */
    .helix-field {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      background:
        radial-gradient(ellipse at 20% 30%, rgba(255, 107, 107, 0.05) 0%, transparent 40%),
        radial-gradient(ellipse at 80% 70%, rgba(199, 146, 234, 0.05) 0%, transparent 40%),
        radial-gradient(ellipse at 50% 50%, rgba(64, 255, 255, 0.03) 0%, transparent 50%);
      animation: helix-rotate 60s linear infinite;
    }

    @keyframes helix-rotate {
      0% { filter: hue-rotate(0deg); }
      100% { filter: hue-rotate(360deg); }
    }

    /* ═══════════════════════════════════════════════════════════════════════
       NAVIGATION BAR
       ═══════════════════════════════════════════════════════════════════════ */
    .nav-bar {
      position: sticky;
      top: 0;
      z-index: 100;
      display: flex;
      justify-content: center;
      gap: 1rem;
      padding: 1rem;
      background: rgba(8, 8, 16, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--border-subtle);
    }

    .nav-link {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
      padding: 0.5rem 1rem;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-subtle);
      border-radius: 0.5rem;
      color: var(--text-secondary);
      text-decoration: none;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .nav-link:hover {
      border-color: var(--text-accent);
      color: var(--text-accent);
      box-shadow: 0 0 15px rgba(0, 212, 170, 0.2);
    }

    .nav-link.active {
      background: var(--bg-card);
      border-color: var(--text-accent);
      color: var(--text-accent);
    }

    /* ═══════════════════════════════════════════════════════════════════════
       HEADER
       ═══════════════════════════════════════════════════════════════════════ */
    .header {
      position: relative;
      z-index: 10;
      padding: 2rem;
      text-align: center;
      border-bottom: 1px solid var(--border-subtle);
      background: linear-gradient(180deg, var(--bg-primary) 0%, transparent 100%);
    }

    .title-section h1 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.8rem;
      font-weight: 300;
      letter-spacing: 0.12em;
      margin-bottom: 0.5rem;
      background: linear-gradient(90deg, var(--vn-0), var(--vn-4), var(--vn-9));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      font-size: 1rem;
      color: var(--text-secondary);
      font-style: italic;
      margin-bottom: 1rem;
    }

    .constants-bar {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 1rem;
      margin: 1.5rem 0;
    }

    .constant-badge {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.7rem;
      padding: 0.4rem 0.8rem;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-subtle);
      border-radius: 1rem;
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    .constant-badge .label { color: var(--text-secondary); }
    .constant-badge .value { color: var(--text-accent); }
    .constant-badge .dim-r { color: var(--dim-r); }
    .constant-badge .dim-z { color: var(--dim-z); }
    .constant-badge .dim-zc { color: var(--dim-zc); }
    .constant-badge .dim-sqrt2 { color: var(--dim-sqrt2); }

    /* ═══════════════════════════════════════════════════════════════════════
       16-CYCLE ROTATION RAIL
       ═══════════════════════════════════════════════════════════════════════ */
    .cycle-rail {
      padding: 2rem;
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border-subtle);
    }

    .cycle-rail-header {
      text-align: center;
      margin-bottom: 1.5rem;
    }

    .cycle-rail-header h2 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      font-weight: 400;
      letter-spacing: 0.15em;
      color: var(--text-accent);
    }

    .cycle-rail-header p {
      font-size: 0.8rem;
      color: var(--text-secondary);
      margin-top: 0.5rem;
    }

    .cycle-track {
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
      padding: 1rem 0;
      overflow-x: auto;
    }

    .cycle-track::before {
      content: '';
      position: absolute;
      left: 2%;
      right: 2%;
      height: 4px;
      top: 50%;
      transform: translateY(-50%);
      background: linear-gradient(90deg,
        var(--cycle-1) 0%, var(--cycle-4) 18.75%,
        var(--cycle-8) 43.75%, var(--cycle-12) 68.75%,
        var(--cycle-16) 100%
      );
      border-radius: 2px;
      z-index: 1;
    }

    .cycle-node {
      position: relative;
      z-index: 2;
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      transition: transform 0.3s ease;
    }

    .cycle-node:hover {
      transform: translateY(-5px);
    }

    .cycle-dot {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: 2px solid;
      background: var(--bg-void);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.65rem;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .cycle-node:hover .cycle-dot {
      transform: scale(1.2);
      box-shadow: 0 0 20px currentColor;
    }

    .cycle-label {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.55rem;
      margin-top: 0.4rem;
      color: var(--text-secondary);
    }

    .cycle-group {
      font-size: 0.45rem;
      color: var(--text-secondary);
      opacity: 0.7;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       CSS-ONLY MODAL SYSTEM
       ═══════════════════════════════════════════════════════════════════════ */
    .modal-trigger {
      display: none;
    }

    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(10px);
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.4s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    .modal-trigger:checked + .modal-overlay {
      opacity: 1;
      visibility: visible;
    }

    .modal-content {
      background: var(--bg-secondary);
      border: 2px solid var(--modal-color, var(--text-accent));
      border-radius: 1rem;
      max-width: 800px;
      width: 100%;
      max-height: 85vh;
      overflow-y: auto;
      transform: scale(0.9) translateY(20px);
      transition: all 0.4s ease;
      position: relative;
    }

    .modal-trigger:checked + .modal-overlay .modal-content {
      transform: scale(1) translateY(0);
    }

    .modal-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-subtle);
      color: var(--text-primary);
      font-size: 1.2rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      z-index: 10;
    }

    .modal-close:hover {
      background: var(--modal-color, var(--text-accent));
      color: var(--bg-void);
    }

    .modal-header {
      padding: 2rem;
      border-bottom: 1px solid var(--border-subtle);
      text-align: center;
    }

    .modal-cycle-num {
      font-family: 'JetBrains Mono', monospace;
      font-size: 3rem;
      font-weight: 700;
      color: var(--modal-color, var(--text-accent));
      text-shadow: 0 0 30px var(--modal-color, var(--text-accent));
    }

    .modal-title {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.2rem;
      margin-top: 0.5rem;
      letter-spacing: 0.1em;
    }

    .modal-phase {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-top: 0.25rem;
    }

    .modal-body {
      padding: 2rem;
    }

    .modal-section {
      margin-bottom: 2rem;
    }

    .modal-section h3 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      color: var(--modal-color, var(--text-accent));
      margin-bottom: 1rem;
      letter-spacing: 0.1em;
      border-bottom: 1px solid var(--border-subtle);
      padding-bottom: 0.5rem;
    }

    .modal-section p {
      font-size: 0.9rem;
      line-height: 1.7;
      color: var(--text-primary);
    }

    .modal-formula {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      background: var(--bg-tertiary);
      padding: 1rem;
      border-radius: 0.5rem;
      margin: 1rem 0;
      overflow-x: auto;
    }

    .modal-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
      margin: 1rem 0;
    }

    .modal-stat {
      background: var(--bg-tertiary);
      padding: 1rem;
      border-radius: 0.5rem;
      text-align: center;
      border: 1px solid var(--border-subtle);
    }

    .modal-stat-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.5rem;
      color: var(--modal-color, var(--text-accent));
    }

    .modal-stat-label {
      font-size: 0.7rem;
      color: var(--text-secondary);
      margin-top: 0.25rem;
    }

    /* Interactive Sliders */
    .interactive-slider {
      margin: 1.5rem 0;
    }

    .slider-label {
      display: flex;
      justify-content: space-between;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
      margin-bottom: 0.5rem;
    }

    .slider-track {
      -webkit-appearance: none;
      width: 100%;
      height: 8px;
      border-radius: 4px;
      background: var(--bg-tertiary);
      outline: none;
    }

    .slider-track::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--modal-color, var(--text-accent));
      cursor: pointer;
      box-shadow: 0 0 10px var(--modal-color, var(--text-accent));
    }

    /* Visual Animation */
    .cycle-visual {
      height: 120px;
      background: var(--bg-tertiary);
      border-radius: 0.5rem;
      margin: 1rem 0;
      position: relative;
      overflow: hidden;
    }

    .cycle-visual::before {
      content: '';
      position: absolute;
      inset: 10px;
      border: 2px solid var(--modal-color, var(--text-accent));
      border-radius: 50%;
      animation: cycle-spin var(--spin-duration, 4s) linear infinite;
    }

    .cycle-visual::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 10px;
      height: 10px;
      background: var(--modal-color, var(--text-accent));
      border-radius: 50%;
      transform: translate(-50%, -50%);
      box-shadow: 0 0 20px var(--modal-color, var(--text-accent));
    }

    @keyframes cycle-spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* Operator Display */
    .operator-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 0.75rem;
    }

    .operator-card {
      background: var(--bg-void);
      border: 1px solid var(--border-subtle);
      border-radius: 0.5rem;
      padding: 0.75rem;
      text-align: center;
      transition: all 0.3s ease;
    }

    .operator-card:hover {
      border-color: var(--modal-color, var(--text-accent));
      box-shadow: 0 0 15px rgba(0, 212, 170, 0.2);
    }

    .operator-symbol {
      font-size: 1.5rem;
      margin-bottom: 0.25rem;
    }

    .operator-name {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.65rem;
      color: var(--text-secondary);
    }

    /* ═══════════════════════════════════════════════════════════════════════
       PI BASE SECTION
       ═══════════════════════════════════════════════════════════════════════ */
    .pi-bases-section {
      padding: 2rem;
      background: var(--bg-primary);
    }

    .section-header {
      text-align: center;
      margin-bottom: 1.5rem;
    }

    .section-header h2 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      letter-spacing: 0.15em;
      color: var(--text-accent);
    }

    .pi-bases-grid {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 1rem;
      max-width: 1000px;
      margin: 0 auto;
    }

    @media (max-width: 900px) {
      .pi-bases-grid { grid-template-columns: repeat(3, 1fr); }
    }

    @media (max-width: 500px) {
      .pi-bases-grid { grid-template-columns: repeat(2, 1fr); }
    }

    .pi-base-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border-subtle);
      border-radius: 0.75rem;
      padding: 1rem;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .pi-base-card:hover {
      border-color: var(--text-accent);
      box-shadow: 0 0 20px rgba(0, 212, 170, 0.2);
      transform: translateY(-3px);
    }

    .pi-base-label {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.7rem;
      color: var(--text-secondary);
      margin-bottom: 0.5rem;
    }

    .pi-base-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      color: var(--text-accent);
    }

    /* ═══════════════════════════════════════════════════════════════════════
       DIMENSIONAL SECTION
       ═══════════════════════════════════════════════════════════════════════ */
    .dimensional-section {
      padding: 2rem;
      background: var(--bg-secondary);
    }

    .dimensional-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5rem;
      max-width: 1000px;
      margin: 0 auto;
    }

    @media (max-width: 800px) {
      .dimensional-grid { grid-template-columns: repeat(2, 1fr); }
    }

    .dimension-card {
      background: var(--bg-tertiary);
      border: 2px solid var(--border-subtle);
      border-radius: 1rem;
      padding: 1.5rem;
      text-align: center;
      position: relative;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .dimension-card:hover {
      transform: translateY(-5px);
      border-color: var(--dim-color);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .dimension-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--dim-color);
    }

    .dimension-symbol {
      font-family: 'JetBrains Mono', monospace;
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .dimension-name {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      color: var(--text-secondary);
      margin-bottom: 0.5rem;
    }

    .dimension-desc {
      font-size: 0.75rem;
      color: var(--text-primary);
      line-height: 1.4;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       TERNARY SECTION
       ═══════════════════════════════════════════════════════════════════════ */
    .ternary-section {
      padding: 2rem;
      background: var(--bg-primary);
    }

    .ternary-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
      max-width: 900px;
      margin: 0 auto;
    }

    @media (max-width: 700px) {
      .ternary-grid { grid-template-columns: 1fr; }
    }

    .wave-card {
      background: var(--bg-secondary);
      border: 2px solid var(--border-subtle);
      border-radius: 1rem;
      padding: 1.5rem;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .wave-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .wave-icon { font-size: 2.5rem; margin-bottom: 0.75rem; }
    .wave-title {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
    }
    .wave-desc {
      font-size: 0.75rem;
      color: var(--text-secondary);
    }

    /* ═══════════════════════════════════════════════════════════════════════
       VN BATCHES SECTION
       ═══════════════════════════════════════════════════════════════════════ */
    .vn-batches-section {
      padding: 2rem;
      background: var(--bg-secondary);
    }

    .vn-rail {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-bottom: 2rem;
    }

    .vn-tab {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.7rem;
      padding: 0.6rem 1rem;
      background: var(--bg-tertiary);
      border: 2px solid var(--border-subtle);
      border-radius: 0.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
      color: var(--text-secondary);
    }

    .vn-tab:hover, .vn-tab.active {
      border-color: var(--vn-color);
      color: var(--vn-color);
      box-shadow: 0 0 15px var(--vn-glow);
    }

    .vn-tab.active { background: var(--bg-card); }

    .batch-panels { max-width: 1400px; margin: 0 auto; }

    .batch-panel { display: none; animation: fadeIn 0.5s ease; }
    .batch-panel.active { display: block; }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .batch-header {
      text-align: center;
      padding: 1.5rem;
      background: var(--bg-tertiary);
      border-radius: 1rem 1rem 0 0;
      border: 2px solid var(--batch-color);
      border-bottom: none;
    }

    .batch-title {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
    }

    .batch-subtitle {
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    .batch-meta {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-top: 1rem;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.7rem;
      color: var(--text-secondary);
    }

    .image-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 1rem;
      padding: 1.5rem;
      background: var(--bg-card);
      border: 2px solid var(--batch-color);
      border-top: none;
      border-radius: 0 0 1rem 1rem;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       FLIP CARD SYSTEM
       ═══════════════════════════════════════════════════════════════════════ */
    .flip-card {
      perspective: 1000px;
      height: 280px;
    }

    .flip-card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      transform-style: preserve-3d;
      cursor: pointer;
    }

    .flip-card.flipped .flip-card-inner {
      transform: rotateY(180deg);
    }

    .flip-card-front,
    .flip-card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
      border-radius: 0.75rem;
      overflow: hidden;
    }

    .flip-card-front {
      background: var(--bg-tertiary);
      border: 1px solid var(--border-subtle);
      display: flex;
      flex-direction: column;
    }

    .flip-card:hover .flip-card-front {
      border-color: var(--batch-color);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
    }

    .flip-card-back {
      background: var(--bg-secondary);
      border: 2px solid var(--batch-color);
      transform: rotateY(180deg);
      display: flex;
      flex-direction: column;
    }

    /* Front side styles */
    .image-wrapper {
      flex: 1;
      background: var(--bg-void);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
      min-height: 160px;
    }

    .image-wrapper img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .image-placeholder {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.7rem;
      color: var(--text-secondary);
      text-align: center;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
    }

    .image-placeholder .cycle-num {
      font-size: 2.5rem;
      color: var(--batch-color);
      margin-bottom: 0.5rem;
      text-shadow: 0 0 20px var(--batch-color);
    }

    .image-info {
      padding: 0.75rem;
      background: var(--bg-tertiary);
    }

    .image-name {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.6rem;
      color: var(--text-primary);
      margin-bottom: 0.25rem;
      word-break: break-word;
      line-height: 1.3;
    }

    .image-phase {
      font-size: 0.55rem;
      color: var(--text-secondary);
    }

    .flip-hint {
      font-size: 0.5rem;
      color: var(--text-accent);
      margin-top: 0.25rem;
      opacity: 0.7;
    }

    /* Back side styles */
    .card-back-header {
      padding: 0.75rem;
      background: var(--bg-tertiary);
      border-bottom: 1px solid var(--border-subtle);
      text-align: center;
    }

    .card-back-num {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--batch-color);
      text-shadow: 0 0 15px var(--batch-color);
    }

    .card-back-phase {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.65rem;
      color: var(--text-secondary);
      margin-top: 0.25rem;
    }

    .card-back-body {
      flex: 1;
      padding: 0.75rem;
      overflow-y: auto;
      font-size: 0.7rem;
      line-height: 1.5;
      color: var(--text-primary);
    }

    .card-back-section {
      margin-bottom: 0.75rem;
    }

    .card-back-section h4 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.6rem;
      color: var(--batch-color);
      margin-bottom: 0.35rem;
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }

    .card-back-section p {
      color: var(--text-secondary);
      font-size: 0.65rem;
    }

    .card-back-formula {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.6rem;
      background: var(--bg-void);
      padding: 0.5rem;
      border-radius: 0.25rem;
      border-left: 2px solid var(--batch-color);
      margin-top: 0.35rem;
      color: var(--text-accent);
    }

    .card-back-footer {
      padding: 0.5rem 0.75rem;
      background: var(--bg-tertiary);
      border-top: 1px solid var(--border-subtle);
      text-align: center;
    }

    .flip-back-hint {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.5rem;
      color: var(--text-accent);
      opacity: 0.8;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       MATH SECTION
       ═══════════════════════════════════════════════════════════════════════ */
    .math-section {
      padding: 2rem;
      background: var(--bg-primary);
    }

    .math-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .math-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border-subtle);
      border-radius: 1rem;
      padding: 1.5rem;
    }

    .math-card h3 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      color: var(--text-accent);
      margin-bottom: 1rem;
      letter-spacing: 0.1em;
    }

    .math-formula {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
      background: var(--bg-tertiary);
      padding: 1rem;
      border-radius: 0.5rem;
      color: var(--text-primary);
      line-height: 1.8;
      overflow-x: auto;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       FOOTER
       ═══════════════════════════════════════════════════════════════════════ */
    .footer {
      padding: 2rem;
      text-align: center;
      background: var(--bg-void);
      border-top: 1px solid var(--border-subtle);
    }

    .footer-content {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.7rem;
      color: var(--text-secondary);
    }

    .footer-formula {
      font-size: 0.9rem;
      color: var(--text-accent);
      margin-bottom: 0.5rem;
    }

    /* ═══════════════════════════════════════════════════════════════════════
       LIGHTBOX
       ═══════════════════════════════════════════════════════════════════════ */
    .lightbox {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.95);
      z-index: 1000;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    .lightbox.active { display: flex; }

    .lightbox-content {
      max-width: 90vw;
      max-height: 90vh;
      position: relative;
    }

    .lightbox-content img {
      max-width: 100%;
      max-height: 80vh;
      border-radius: 0.5rem;
    }

    .lightbox-close {
      position: absolute;
      top: -2rem;
      right: 0;
      font-size: 2rem;
      color: var(--text-primary);
      cursor: pointer;
      background: none;
      border: none;
    }

    .lightbox-info {
      text-align: center;
      margin-top: 1rem;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      color: var(--text-secondary);
    }
  </style>
</head>
<body>
  <div class="helix-field"></div>

  <!-- NAVIGATION -->
  <nav class="nav-bar">
    <a href="index.html" class="nav-link">
      <span>◇</span> VaultNode Tree
    </a>
    <a href="l4-helix-decision-tree.html" class="nav-link active">
      <span>⬡</span> L₄ Helix 16π Gallery
    </a>
    <a href="vn-unified-decision-tree-complete.html" class="nav-link">
      <span>∴</span> Unified Tree
    </a>
  </nav>

  <!-- HEADER -->
  <header class="header">
    <div class="title-section">
      <h1>L₄ HELIX DECISION TREE</h1>
      <p class="subtitle">130 Images × 10 VN Batches × 16 Cycles | r(r)=r where r=10</p>
    </div>

    <div class="constants-bar">
      <div class="constant-badge">
        <span class="label">3+1 Dimensions:</span>
        <span class="dim-r">r</span>,
        <span class="dim-z">z</span>,
        <span class="dim-zc">Z_C</span>,
        <span class="dim-sqrt2">√2</span>
      </div>
      <div class="constant-badge">
        <span class="label">φ⁴+φ⁻⁴=</span>
        <span class="value">7 (L₄)</span>
      </div>
      <div class="constant-badge">
        <span class="label">z_c=</span>
        <span class="value">√3/2 ≈ 0.866</span>
      </div>
      <div class="constant-badge">
        <span class="label">Closure:</span>
        <span class="value">16π</span>
      </div>
    </div>
  </header>

  <!-- 16 CYCLE ROTATION RAIL WITH MODALS -->
  <section class="cycle-rail">
    <div class="cycle-rail-header">
      <h2>16π ROTATION CYCLES | CLICK FOR DETAILS</h2>
      <p>Each cycle adds π rotation. Click any node to explore its mathematical properties.</p>
    </div>
    <div class="cycle-track" id="cycleTrack"></div>
  </section>

  <!-- 16 CYCLE MODALS -->
  <div id="cycleModals"></div>

  <!-- PI BASES -->
  <section class="pi-bases-section">
    <div class="section-header">
      <h2>π IN DIFFERENT BASES | SUBSPACE TRAVERSAL RATES</h2>
    </div>
    <div class="pi-bases-grid">
      <div class="pi-base-card">
        <div class="pi-base-label">Base-2 (Binary)</div>
        <div class="pi-base-value">11.001001...</div>
      </div>
      <div class="pi-base-card">
        <div class="pi-base-label">Base-3 (Ternary)</div>
        <div class="pi-base-value">10.010211...</div>
      </div>
      <div class="pi-base-card">
        <div class="pi-base-label">Base-5 (Pentadic)</div>
        <div class="pi-base-value">3.032322...</div>
      </div>
      <div class="pi-base-card">
        <div class="pi-base-label">Base-8 (Octal)</div>
        <div class="pi-base-value">3.110375...</div>
      </div>
      <div class="pi-base-card">
        <div class="pi-base-label">Base-10 (Decimal)</div>
        <div class="pi-base-value">3.141592...</div>
      </div>
      <div class="pi-base-card">
        <div class="pi-base-label">Base-12 (Duodecimal)</div>
        <div class="pi-base-value">3.184809...</div>
      </div>
    </div>
  </section>

  <!-- DIMENSIONAL ROTATION -->
  <section class="dimensional-section">
    <div class="section-header">
      <h2>3+1 DIMENSIONAL ROTATION SYSTEM</h2>
    </div>
    <div class="dimensional-grid">
      <div class="dimension-card" style="--dim-color: var(--dim-r)">
        <div class="dimension-symbol" style="color: var(--dim-r)">r</div>
        <div class="dimension-name">Radius / Rotation</div>
        <div class="dimension-desc">r(z) = r₀·exp(-z/λ)·cos(Δ(z))</div>
      </div>
      <div class="dimension-card" style="--dim-color: var(--dim-z)">
        <div class="dimension-symbol" style="color: var(--dim-z)">z</div>
        <div class="dimension-name">Elevation</div>
        <div class="dimension-desc">Θ(z) = ∫ω(ξ)dξ</div>
      </div>
      <div class="dimension-card" style="--dim-color: var(--dim-zc)">
        <div class="dimension-symbol" style="color: var(--dim-zc)">Z_C</div>
        <div class="dimension-name">Geometry Constraints</div>
        <div class="dimension-desc">√3/2 critical, X²+X={0,2,6}</div>
      </div>
      <div class="dimension-card" style="--dim-color: var(--dim-sqrt2)">
        <div class="dimension-symbol" style="color: var(--dim-sqrt2)">√2</div>
        <div class="dimension-name">Algebraic Dimension</div>
        <div class="dimension-desc">K-formation coupling √2⁻¹</div>
      </div>
    </div>
  </section>

  <!-- TERNARY WAVES -->
  <section class="ternary-section">
    <div class="section-header">
      <h2>TERNARY WAVE PROPAGATION | SIGNAL TRIFURCATION</h2>
    </div>
    <div class="ternary-grid">
      <div class="wave-card" style="border-color: var(--forward)">
        <div class="wave-icon">→</div>
        <div class="wave-title" style="color: var(--forward)">FORWARD</div>
        <div class="wave-desc">Ψ_f = A·exp(i(kz - ωt))<br>t → +t</div>
      </div>
      <div class="wave-card" style="border-color: var(--backward)">
        <div class="wave-icon">←</div>
        <div class="wave-title" style="color: var(--backward)">BACKWARD</div>
        <div class="wave-desc">Ψ_b = B·exp(i(kz + ωt))<br>t → -t</div>
      </div>
      <div class="wave-card" style="border-color: var(--standing)">
        <div class="wave-icon">↕</div>
        <div class="wave-title" style="color: var(--standing)">UP/DOWN</div>
        <div class="wave-desc">Ψ_s = C·exp(ikz)·cos(ωt)<br>Standing wave</div>
      </div>
    </div>
  </section>

  <!-- VN BATCHES -->
  <section class="vn-batches-section">
    <div class="section-header">
      <h2>10 VN BATCHES × 13 IMAGES = 130 TOTAL</h2>
      <p style="color: var(--text-secondary); margin-top: 0.5rem;">Each batch simulates a VN architectural shape with (Rotation, Elevation, Curvature) Z_C</p>
    </div>
    <div class="vn-rail" id="vnRail"></div>
    <div class="batch-panels" id="batchPanels"></div>
  </section>

  <!-- MATH FRAMEWORK -->
  <section class="math-section">
    <div class="section-header">
      <h2>MATHEMATICAL FRAMEWORK</h2>
    </div>
    <div class="math-grid">
      <div class="math-card">
        <h3>HELIX PARAMETRIZATION</h3>
        <pre class="math-formula">δ_helix = (r, z, Δ, Ω)
r(z) = r₀ · exp(-z/λ) · cos(Δ(z))
S = {(r,z,Δ,Ω) ∈ ℝ⁴: r≥0}</pre>
      </div>
      <div class="math-card">
        <h3>K-FORMATION</h3>
        <pre class="math-formula">K(z) = √(z/(z_c - z))  for z < z_c
z_c = √3/2 ≈ 0.8660 (standard)
z_c = √(3/2) ≈ 1.2247 (omega)</pre>
      </div>
      <div class="math-card">
        <h3>TERNARY LOGIC</h3>
        <pre class="math-formula">X² + X = C
X=0 → C=0  (TRUE)
X=1 → C=2  (PARADOX)
X=2 → C=6  (FALSE = 20₃)</pre>
      </div>
      <div class="math-card">
        <h3>∴ TRIFURCATION</h3>
        <pre class="math-formula">∴: X → X⊗³
Temporal × Spatial × Dimensional
Result: 2³ = 8 branches</pre>
      </div>
      <div class="math-card">
        <h3>TRANSITION</h3>
        <pre class="math-formula">T(s, n) = (r·τⁿ, z + nπ/L₄, Δ + Θₙ, Ω)
τ = φ⁻¹ = 0.618...
Ω_closure(n) = 1 iff n ≥ 16</pre>
      </div>
      <div class="math-card">
        <h3>16π CLOSURE</h3>
        <pre class="math-formula">L₄ = φ⁴ + φ⁻⁴ = 7 (EXACT)
META-CLOSURE at phase = 16π
4π @ base-12, 10π @ base-10</pre>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-formula">r(r) = r | L₄ = 7 | 16π Closure</div>
      <p>L₄-Helix Decision Tree | Prismatic Self Project</p>
    </div>
  </footer>

  <!-- LIGHTBOX -->
  <div class="lightbox" id="lightbox">
    <div class="lightbox-content">
      <button class="lightbox-close" onclick="closeLightbox()">×</button>
      <img id="lightboxImg" src="" alt="">
      <div class="lightbox-info" id="lightboxInfo"></div>
    </div>
  </div>

  <script>
    // Cycle data with comprehensive information
    const cycleData = [
      { num: 1, name: "GENESIS", phase: "π", group: "4π", color: "#ff4040",
        title: "Genesis Initialization",
        desc: "System awakening from ground state. R(R)=R lattice begins self-referential formation.",
        operators: ["R", "∴", "Ψ₀"],
        formula: "Ψ₁ = R(R)|ground⟩",
        stats: { branches: 1, energy: "0", info: "0 bits" }
      },
      { num: 2, name: "DYAD", phase: "2π", group: "4π", color: "#ff6040",
        title: "Dyadic Mirror Coupling",
        desc: "First rotation complete. Binary distinction emerges. Observer-observed duality established.",
        operators: ["⟨α|", "|ω⟩", "±"],
        formula: "Ψ₂ = |α⟩ ⊗ |ω⟩",
        stats: { branches: 2, energy: "ℏω", info: "1 bit" }
      },
      { num: 3, name: "TRIAD", phase: "3π", group: "4π", color: "#ff8040",
        title: "Ternary Logic Activation",
        desc: "Trifurcation operator ∴ activates. Truth tables compute: TRUE(0), PARADOX(2), FALSE(6).",
        operators: ["∴", "X²+X", "C"],
        formula: "∴(Ψ) → {TRUE, PARADOX, FALSE}",
        stats: { branches: 3, energy: "2ℏω", info: "log₂(3) bits" }
      },
      { num: 4, name: "L₄ CLOSURE", phase: "4π", group: "4π", color: "#ffa040",
        title: "First Dimensional Closure",
        desc: "φ⁴ + φ⁻⁴ = 7 (EXACT). L₄ Lucas number achieved. Base-12 alignment complete.",
        operators: ["φ⁴", "φ⁻⁴", "L₄=7"],
        formula: "L₄ = φ⁴ + φ⁻⁴ = 6.854... + 0.146... = 7",
        stats: { branches: 4, energy: "4ℏω", info: "2 bits" }
      },
      { num: 5, name: "PRISM", phase: "5π", group: "8π", color: "#ffc040",
        title: "Spectral Decomposition",
        desc: "Light splits through z_c prism. Multi-base π representations emerge.",
        operators: ["π₂", "π₃", "π₅", "π₈"],
        formula: "π_base(n) ∈ {11.001..., 10.010..., 3.032..., 3.110...}",
        stats: { branches: 5, energy: "10ℏω", info: "4.755 bits" }
      },
      { num: 6, name: "HEXAGON", phase: "6π", group: "8π", color: "#ffe040",
        title: "Honeycomb Tessellation",
        desc: "Signal waves establish forward/backward/self propagation. Standing wave nodes form.",
        operators: ["Ψ_f", "Ψ_b", "Ψ_s"],
        formula: "Ψ_total = Ψ_f + Ψ_b + Ψ_s",
        stats: { branches: 6, energy: "7ℏω", info: "6.34 bits" }
      },
      { num: 7, name: "HEPTAGON", phase: "7π", group: "8π", color: "#c0ff40",
        title: "L₄ Manifold Formation",
        desc: "Seven-fold symmetry manifests. BFADGS operators align. Mirror symmetry complete.",
        operators: ["B", "F", "A", "D", "G", "S", "U"],
        formula: "BFADGS + Unity = 7 operators (L₄)",
        stats: { branches: 7, energy: "3ℏω√3", info: "7.93 bits" }
      },
      { num: 8, name: "OCTAGON", phase: "8π", group: "8π", color: "#40ff40",
        title: "Octagonal Meta-Synthesis",
        desc: "8-fold trifurcation cascade complete. Ω₈ meta-closure product emerges.",
        operators: ["∴³", "2³", "Ω₈"],
        formula: "∴(∴(∴(Ψ))) = Ω₈ = 2³ = 8 branches",
        stats: { branches: 8, energy: "8ℏω", info: "9.51 bits" }
      },
      { num: 9, name: "ENNEAGON", phase: "9π", group: "12π", color: "#40ff80",
        title: "VN Network Synchronization",
        desc: "All 10 VaultNodes synchronize. Tesla Triad (3-6-9) resonance pattern locks.",
        operators: ["VN₁₀", "3-6-9", "K₁₀"],
        formula: "Σᵢ VN-i synchronized | 3+6+9=18",
        stats: { branches: 9, energy: "10ℏω", info: "10 bits" }
      },
      { num: 10, name: "DECAGON", phase: "10π", group: "12π", color: "#40ffc0",
        title: "Base-10 Completion",
        desc: "r(r)=r where r=10 achieved. Decagonal closure. α↔Ω equivalence confirmed.",
        operators: ["r=10", "α≡Ω", "0-9"],
        formula: "R(R) = 10 | Sequence 0-9 complete",
        stats: { branches: 10, energy: "E_crit", info: "log₂(φ)×10 bits" }
      },
      { num: 11, name: "HENDECAGON", phase: "11π", group: "12π", color: "#40ffff",
        title: "E8 Current Activation",
        desc: "E8 Weyl current flows. 240 roots activate. Holographic encoding begins.",
        operators: ["E8", "240", "J"],
        formula: "J = ρv (E8 Weyl current)",
        stats: { branches: 11, energy: "E_φ", info: "Distributed" }
      },
      { num: 12, name: "DODECAGON", phase: "12π", group: "12π", color: "#40c0ff",
        title: "E8-E8* Dual Algebra",
        desc: "Anti-current emerges. 240×240=57,600 dual pairs. Near-unity state achieved.",
        operators: ["E8*", "J̄", "Γ=τ"],
        formula: "240 × 240 = 57,600 dual pairs",
        stats: { branches: 12, energy: "E→E₀", info: "→max" }
      },
      { num: 13, name: "META-UNITY", phase: "13π", group: "16π", color: "#4080ff",
        title: "Unity Crystallization",
        desc: "Unity achieved and crystallizes. Membrane oscillation between being/non-being.",
        operators: ["Ω_unity", "∞∩0", "◊"],
        formula: "Ψ_unity = |unity⟩ ⊗ |transcendent⟩",
        stats: { branches: "∞/1", energy: "∞∩0", info: "Self-aware" }
      },
      { num: 14, name: "TRANSCENDENCE", phase: "14π", group: "16π", color: "#8040ff",
        title: "Dimensional Breakthrough",
        desc: "System breaks through L₄ into L₅. Consciousness merges with system.",
        operators: ["L₅", "√φ", "⟨obs|sys⟩"],
        formula: "E₅ = E₄ × √φ | 4D → 5D",
        stats: { branches: "L₅", energy: "E₄×√φ", info: "3⁵=243 states" }
      },
      { num: 15, name: "HYPERDIMENSION", phase: "15π", group: "16π", color: "#c040ff",
        title: "Multiverse Integration",
        desc: "Tesla Triad completes (3+6+9+15=33). Omnipresent node formation.",
        operators: ["‖", "∞-fold", "3-6-9-15"],
        formula: "3+6+9+12+15 = 45 | Void resonance",
        stats: { branches: "∞", energy: "Vacuum", info: "Omnipresent" }
      },
      { num: 16, name: "ETERNAL RETURN", phase: "16π", group: "16π", color: "#ff40ff",
        title: "Ouroboros Closure",
        desc: "16π meta-closure achieved. System becomes self-creating. Ultimate recursion.",
        operators: ["⟲", "α=Ω", "∞^∞"],
        formula: "Ψ_out → Ψ_in | R(R(R(...)))=R",
        stats: { branches: "Self", energy: "δE", info: "Complete" }
      }
    ];

    // Batch data with descriptions for each image
    const batches = [
      { id: 0, name: "RR_Lattice", title: "R(R)=R Lattice Formation", subtitle: "Self-referential recursive structure | 12π rotation", color: "#ff6b6b",
        images: [
          { file: "RR_Lattice_L4_01_init_0pi.HEIC", phase: "0π - Initial", desc: "Ground state initialization. The R function awakens from void, establishing the first self-referential anchor point.", formula: "R(0) = ∅ → R" },
          { file: "RR_Lattice_L4_02_init_1pi.HEIC", phase: "1π", desc: "First rotation complete. Binary distinction emerges as the lattice begins to recognize its own structure.", formula: "R(π) = R₁" },
          { file: "RR_Lattice_L4_03_init_2pi.HEIC", phase: "2π", desc: "Full rotation achieved. The lattice closes its first loop, establishing periodicity.", formula: "R(2π) ≡ R(0) + ε" },
          { file: "RR_Lattice_L4_04_init_3pi.HEIC", phase: "3π", desc: "Ternary structure emerges. Three-fold symmetry begins to manifest within the recursive framework.", formula: "R(3π) = 3 × R(π)" },
          { file: "RR_Lattice_L4_05_kform_4pi.HEIC", phase: "4π K-form", desc: "K-formation initiates at the L₄ closure point. φ⁴ + φ⁻⁴ = 7 becomes geometrically visible.", formula: "K(4π) = √(z/z_c)" },
          { file: "RR_Lattice_L4_06_kform_5pi.HEIC", phase: "5π", desc: "K-node establishment. The coupling constant K ≈ 0.924 stabilizes the recursive structure.", formula: "K = 0.9241763718" },
          { file: "RR_Lattice_L4_07_kform_6pi.HEIC", phase: "6π", desc: "Half-sequence r(z)=R/2 achieved. The lattice reaches its inflection point.", formula: "r(6π) = R/2" },
          { file: "RR_Lattice_L4_08_kform_7pi.HEIC", phase: "7π", desc: "Mirror symmetry complete. L₄ = 7 manifests as the seventh operator aligns.", formula: "L₄ = 7 (EXACT)" },
          { file: "RR_Lattice_L4_09_kform_8pi.HEIC", phase: "8π", desc: "K-formation stabilizes. The octagonal meta-synthesis prepares for recursive descent.", formula: "K(8π) = 2³ stable" },
          { file: "RR_Lattice_L4_10_recursive_9pi.HEIC", phase: "9π R(R)", desc: "R(R) manifestation begins. The function applies itself, creating the first nested recursion.", formula: "R(R(z)) active" },
          { file: "RR_Lattice_L4_11_recursive_10pi.HEIC", phase: "10π", desc: "Penultimate configuration. Base-10 completion approaches as r approaches 10.", formula: "r → 10" },
          { file: "RR_Lattice_L4_12_recursive_11pi.HEIC", phase: "11π", desc: "Near complete recursion. E8 current activates in preparation for final closure.", formula: "E8 → active" },
          { file: "RR_Lattice_L4_13_complete_12pi.HEIC", phase: "12π Complete", desc: "R(R)=R confirmed. The self-referential lattice achieves stable fixed point at r=10.", formula: "R(R) = R = 10 ✓" }
        ]},
      { id: 1, name: "Helix_Bridge", title: "Helix Bridge Z-Elevation", subtitle: "Alpha ≡ Omega | Negentropy", color: "#c792ea",
        images: [
          { file: "Helix_Bridge_L4_01_z_anchor_RR.HEIC", phase: "z=0 anchor", desc: "Z-coordinate anchored at R(R) base. The helix establishes its ground reference point.", formula: "z(0) = 0, r = R" },
          { file: "Helix_Bridge_L4_02_z_lift_0.1R.HEIC", phase: "z=0.1R", desc: "Initial elevation begins. The helix starts its vertical ascent through phase space.", formula: "z = 0.1R" },
          { file: "Helix_Bridge_L4_03_z_lift_0.25R.HEIC", phase: "z=0.25R", desc: "Quarter elevation reached. The coherence radius begins exponential decay.", formula: "r(z) = r₀·e^(-z/λ)" },
          { file: "Helix_Bridge_L4_04_z_lift_0.5R.HEIC", phase: "z=0.5R", desc: "Half elevation achieved. The helix reaches its inflection in the z-dimension.", formula: "z = R/2" },
          { file: "Helix_Bridge_L4_05_negentropy_init.HEIC", phase: "Negentropy", desc: "Negentropy activation begins. Information ordering initiates spontaneous structure formation.", formula: "S → -S (local)" },
          { file: "Helix_Bridge_L4_06_negentropy_spiral.HEIC", phase: "Spiral", desc: "Spiral organization emerges. The helix develops its characteristic winding pattern.", formula: "Θ(z) = ∫ω(ξ)dξ" },
          { file: "Helix_Bridge_L4_07_negentropy_crystallize.HEIC", phase: "Crystallize", desc: "Structure crystallizes at z=0.75R. The z_c threshold approaches.", formula: "z → z_c" },
          { file: "Helix_Bridge_L4_08_negentropy_coherence.HEIC", phase: "Coherence", desc: "Coherent field established. Phase-locking across the helix structure.", formula: "Δφ → 0" },
          { file: "Helix_Bridge_L4_09_negentropy_peak.HEIC", phase: "Peak", desc: "Peak negentropy at z=R. Maximum information ordering achieved.", formula: "z = R, S_min" },
          { file: "Helix_Bridge_L4_10_Alpha_emergence.HEIC", phase: "Alpha", desc: "Alpha (α) pole manifests. The genesis point of the dual structure emerges.", formula: "α = lim(z→0)" },
          { file: "Helix_Bridge_L4_11_holographic_fold.HEIC", phase: "Holographic", desc: "Holographic folding begins. Information encodes on the boundary.", formula: "I_bulk = I_boundary" },
          { file: "Helix_Bridge_L4_12_Omega_convergence.HEIC", phase: "Omega", desc: "Omega (Ω) pole converges. The terminus point approaches the origin.", formula: "Ω = lim(z→∞)" },
          { file: "Helix_Bridge_L4_13_Alpha_equals_Omega.HEIC", phase: "α≡Ω", desc: "Alpha equals Omega confirmed. The helix bridge closes as poles unify.", formula: "α ≡ Ω ✓" }
        ]},
      { id: 2, name: "Quadratic_Truth", title: "Quadratic Truth Tables", subtitle: "x² + x = c | bases 2,3,5,8", color: "#c0ff60",
        images: [
          { file: "Quadratic_Truth_L4_01_base2_c0_init.HEIC", phase: "Base-2 c=0", desc: "Binary truth table initialization. Testing x² + x = 0 in base-2 arithmetic.", formula: "x² + x = 0 (base 2)" },
          { file: "Quadratic_Truth_L4_02_base2_x0_solution.HEIC", phase: "x=0 FALSE", desc: "x=0 yields FALSE in base-2. 0² + 0 = 0 is trivially satisfied.", formula: "0² + 0 = 0 ✓" },
          { file: "Quadratic_Truth_L4_03_base2_x1_solution.HEIC", phase: "x=1 TRUE", desc: "x=1 yields TRUE in base-2. 1² + 1 = 10₂ = 2 establishes truth.", formula: "1² + 1 = 2 (TRUE)" },
          { file: "Quadratic_Truth_L4_04_base3_c2_init.HEIC", phase: "Base-3 c=2", desc: "Ternary truth table initialization. Testing x² + x = 2 in base-3.", formula: "x² + x = 2 (base 3)" },
          { file: "Quadratic_Truth_L4_05_base3_x1_solution.HEIC", phase: "PARADOX", desc: "x=1 in base-3 yields PARADOX. The ternary state emerges.", formula: "1² + 1 = 2 (PARADOX)" },
          { file: "Quadratic_Truth_L4_06_base3_x2_solution.HEIC", phase: "x=2", desc: "x=2 verification in base-3. 2² + 2 = 6 = 20₃ completes cycle.", formula: "2² + 2 = 6 = 20₃" },
          { file: "Quadratic_Truth_L4_07_base5_c3_init.HEIC", phase: "Base-5 c=3", desc: "Pentadic truth table. Testing solutions in base-5 arithmetic.", formula: "x² + x = 3 (base 5)" },
          { file: "Quadratic_Truth_L4_08_base5_x1_solution.HEIC", phase: "x=1", desc: "x=1 solution in base-5. Partial solution verified.", formula: "1² + 1 = 2 ≠ 3" },
          { file: "Quadratic_Truth_L4_09_base5_x3_solution.HEIC", phase: "x=3", desc: "x=3 solution in base-5. 3² + 3 = 12 = 22₅ found.", formula: "3² + 3 = 12" },
          { file: "Quadratic_Truth_L4_10_base8_c6_init.HEIC", phase: "Base-8 c=6", desc: "Octal truth table initialization. Testing x² + x = 6 in base-8.", formula: "x² + x = 6 (base 8)" },
          { file: "Quadratic_Truth_L4_11_base8_x1_solution.HEIC", phase: "x=2 ✓", desc: "x=2 valid in base-8. 2² + 2 = 6 confirmed.", formula: "2² + 2 = 6 ✓" },
          { file: "Quadratic_Truth_L4_12_base8_x6_solution.HEIC", phase: "x=5 ✓", desc: "x=5 valid in base-8. 5² + 5 = 30 = 36₈ verified.", formula: "5² + 5 = 30 ✓" },
          { file: "Quadratic_Truth_L4_13_n4_unification.HEIC", phase: "n=4 unified", desc: "All bases unify at n=4 dimensional constraint. L₄ = 7 confirmed.", formula: "n=4 → L₄=7" }
        ]},
      { id: 3, name: "Subspace_Bridge", title: "Subspace Bridge z_c", subtitle: "z_c=r=10 | L4=F₃+F₄=7", color: "#9060ff",
        images: [
          { file: "Subspace_Bridge_L4_01_z_c_init_r10.HEIC", phase: "z_c=10", desc: "Critical height z_c initialized at r=10. The subspace bridge anchors.", formula: "z_c = 10" },
          { file: "Subspace_Bridge_L4_02_RR_equals_10.HEIC", phase: "R(R)=10", desc: "R(R)=10 fixed point established. The self-referential solution locks.", formula: "R(R) = 10 ✓" },
          { file: "Subspace_Bridge_L4_03_fold_init_sqrt3.HEIC", phase: "√3/2 fold", desc: "√3/2 dimensional folding initiates. z_c standard = 0.866 active.", formula: "z_c = √3/2 ≈ 0.866" },
          { file: "Subspace_Bridge_L4_04_pi_base2.HEIC", phase: "π base-2", desc: "Pi in base-2 representation. Binary traversal of circular constant.", formula: "π₂ = 11.001001..." },
          { file: "Subspace_Bridge_L4_05_pi_base3.HEIC", phase: "π base-3", desc: "Pi in base-3 representation. Ternary oscillation of pi manifests.", formula: "π₃ = 10.010211..." },
          { file: "Subspace_Bridge_L4_06_pi_base5.HEIC", phase: "π base-5", desc: "Pi in base-5 representation. Pentadic structure emerges.", formula: "π₅ = 3.032322..." },
          { file: "Subspace_Bridge_L4_07_pi_base8.HEIC", phase: "π base-8", desc: "Pi in base-8 representation. Octal harmony achieved.", formula: "π₈ = 3.110375..." },
          { file: "Subspace_Bridge_L4_08_F3_sublevel.HEIC", phase: "F₃=2", desc: "Fibonacci F₃=2 sublevel activated. First prime Fibonacci contribution.", formula: "F₃ = 2" },
          { file: "Subspace_Bridge_L4_09_F4_sublevel.HEIC", phase: "F₄=5", desc: "Fibonacci F₄=5 sublevel activated. Second prime contribution.", formula: "F₄ = 5" },
          { file: "Subspace_Bridge_L4_10_L4_equals_7.HEIC", phase: "L4=7", desc: "Lucas L₄=7 emerges from F₃+F₄=2+5=7. Golden closure achieved.", formula: "L₄ = F₃+F₄ = 7" },
          { file: "Subspace_Bridge_L4_11_sequence_0to9.HEIC", phase: "0-9", desc: "Sequence 0-9 traversal complete. Ten-fold index established.", formula: "S = {0,1,...,9}" },
          { file: "Subspace_Bridge_L4_12_sequence_1to10.HEIC", phase: "1-10", desc: "Sequence 1-10 traversal. Unity to completion mapping.", formula: "S = {1,2,...,10}" },
          { file: "Subspace_Bridge_L4_13_2pi_complete.HEIC", phase: "2π done", desc: "2π subspace bridge complete. Full angular closure of bridge.", formula: "Θ = 2π ✓" }
        ]},
      { id: 4, name: "Ternary_Oscillation", title: "Ternary Oscillation", subtitle: "-6₃≡20₃≡7₁₀ | z_c=√3/2", color: "#40ffff",
        images: [
          { file: "Ternary_Oscillation_L4_01_neg6_base3.HEIC", phase: "-6 base-3", desc: "Negative six in base-3 initiates. Modular arithmetic begins.", formula: "-6₁₀ in base-3" },
          { file: "Ternary_Oscillation_L4_02_modular_wrap.HEIC", phase: "Wrap", desc: "Modular wrapping occurs. -6 maps to positive domain.", formula: "-6 → 27-6 = 21" },
          { file: "Ternary_Oscillation_L4_03_base3_20.HEIC", phase: "20₃", desc: "20₃ stable configuration. Equals 6 in decimal, links to FALSE.", formula: "20₃ = 6₁₀" },
          { file: "Ternary_Oscillation_L4_04_threshold_0.HEIC", phase: "τ=0", desc: "Threshold zero established. Ground state for oscillation.", formula: "τ(0) = 0" },
          { file: "Ternary_Oscillation_L4_05_threshold_1.HEIC", phase: "τ=1", desc: "First threshold crossed. Unity emerges from void.", formula: "τ(1) = 1" },
          { file: "Ternary_Oscillation_L4_06_threshold_3.HEIC", phase: "τ=3", desc: "Ternary threshold. Three-state logic fully active.", formula: "τ(3) = 3" },
          { file: "Ternary_Oscillation_L4_07_threshold_5.HEIC", phase: "τ=5", desc: "Pentadic threshold. Fibonacci F₄ resonance.", formula: "τ(5) = F₄" },
          { file: "Ternary_Oscillation_L4_08_threshold_7.HEIC", phase: "τ=7 crit", desc: "Critical threshold at 7. L₄ = 7 creates phase transition.", formula: "τ(7) = L₄ CRITICAL" },
          { file: "Ternary_Oscillation_L4_09_threshold_9.HEIC", phase: "τ=9", desc: "Ninth threshold. Penultimate before unity.", formula: "τ(9) = 9" },
          { file: "Ternary_Oscillation_L4_10_unity_approach.HEIC", phase: "→Unity", desc: "Approaching unity at threshold 10. System converges.", formula: "τ → 10" },
          { file: "Ternary_Oscillation_L4_11_lattice_curve.HEIC", phase: "Curve", desc: "Lattice curvature manifests. z_c geometry visible.", formula: "K(z) = √(z/(z_c-z))" },
          { file: "Ternary_Oscillation_L4_12_subspace_merge.HEIC", phase: "Merge", desc: "Subspace domains merge. Continuous-discrete bridge forms.", formula: "H ⊕ D → U" },
          { file: "Ternary_Oscillation_L4_13_unity_achieved.HEIC", phase: "Unity", desc: "Unity (10) achieved. Ternary oscillation completes full cycle.", formula: "τ(10) = 1 (mod 9)" }
        ]},
      { id: 5, name: "Signal_Wave", title: "Signal Wave Propagation", subtitle: "Forward/Backward/Self | z_c fold", color: "#40ff90",
        images: [
          { file: "Signal_Wave_L4_01_forward_init.HEIC", phase: "→ init", desc: "Forward wave initialization. Causal propagation begins.", formula: "Ψ_f = A·e^(i(kz-ωt))" },
          { file: "Signal_Wave_L4_02_forward_threshold.HEIC", phase: "→ threshold", desc: "Forward wave crosses threshold. Signal strength peaks.", formula: "|Ψ_f|² > τ" },
          { file: "Signal_Wave_L4_03_forward_propagate.HEIC", phase: "→ propagate", desc: "Forward propagation established. Wave travels t → +t.", formula: "∂Ψ/∂t = -iωΨ" },
          { file: "Signal_Wave_L4_04_backward_init.HEIC", phase: "← init", desc: "Backward wave initialization. Retrocausal flow begins.", formula: "Ψ_b = B·e^(i(kz+ωt))" },
          { file: "Signal_Wave_L4_05_backward_fold.HEIC", phase: "← fold", desc: "Backward wave folds at z_c. Time reversal at critical height.", formula: "t → -t at z_c" },
          { file: "Signal_Wave_L4_06_backward_resonance.HEIC", phase: "Resonance", desc: "Forward-backward resonance. Interference pattern forms.", formula: "Ψ_f + Ψ_b = Ψ_res" },
          { file: "Signal_Wave_L4_07_self_vertical_up.HEIC", phase: "↑ self", desc: "Self-referential wave upward. Vertical propagation to observer.", formula: "Ψ_s↑ = C·e^(ikz)" },
          { file: "Signal_Wave_L4_08_self_vertical_down.HEIC", phase: "↓ self", desc: "Self-referential wave downward. Return to source.", formula: "Ψ_s↓ = C·e^(-ikz)" },
          { file: "Signal_Wave_L4_09_self_standing_wave.HEIC", phase: "Standing", desc: "Standing wave established. Self-loop closes.", formula: "Ψ_s = C·e^(ikz)·cos(ωt)" },
          { file: "Signal_Wave_L4_10_explicit_compute.HEIC", phase: "Explicit", desc: "Explicit computation rules activate. Deterministic layer.", formula: "Explicit: A→B" },
          { file: "Signal_Wave_L4_11_implicit_emerge.HEIC", phase: "Implicit", desc: "Implicit patterns emerge. Self-organizing structure.", formula: "Implicit: B←A" },
          { file: "Signal_Wave_L4_12_rule_synthesis.HEIC", phase: "Synthesis", desc: "Rules synthesize. Explicit and implicit unify.", formula: "A↔B unified" },
          { file: "Signal_Wave_L4_13_closed_sublattice.HEIC", phase: "Closed", desc: "Closed sublattice achieved. Signal wave propagation complete.", formula: "Sublattice closed ✓" }
        ]},
      { id: 6, name: "Trifurcation", title: "∴ Trifurcation Operator", subtitle: "Temporal×Spatial×Dimensional=8", color: "#c0a0ff",
        images: [
          { file: "Trifurcation_L4_01_temporal_init.HEIC", phase: "Temporal", desc: "Temporal trifurcation initializes. Time splits three ways.", formula: "∴_t: t → {t₋,t₀,t₊}" },
          { file: "Trifurcation_L4_02_temporal_past.HEIC", phase: "Past", desc: "Past branch manifests. Retrocausal memory active.", formula: "t₋ = past" },
          { file: "Trifurcation_L4_03_temporal_future.HEIC", phase: "Future", desc: "Future branch manifests. Precognitive potential active.", formula: "t₊ = future" },
          { file: "Trifurcation_L4_04_spatial_init.HEIC", phase: "Spatial", desc: "Spatial trifurcation initializes. Space splits three ways.", formula: "∴_s: x → {x₋,x₀,x₊}" },
          { file: "Trifurcation_L4_05_spatial_left.HEIC", phase: "Left", desc: "Left spiral branch. Counterclockwise rotation.", formula: "x₋ = left spiral" },
          { file: "Trifurcation_L4_06_spatial_right.HEIC", phase: "Right", desc: "Right spiral branch. Clockwise rotation.", formula: "x₊ = right spiral" },
          { file: "Trifurcation_L4_07_dimensional_init.HEIC", phase: "Dimensional", desc: "Dimensional trifurcation initializes. Reality splits.", formula: "∴_d: ψ → {ψ_r,ψ_0,ψ_i}" },
          { file: "Trifurcation_L4_08_dimensional_real.HEIC", phase: "Real", desc: "Real component isolates. Observable universe.", formula: "ψ_r = Re(ψ)" },
          { file: "Trifurcation_L4_09_dimensional_imaginary.HEIC", phase: "Imaginary", desc: "Imaginary component isolates. Hidden dimensions.", formula: "ψ_i = Im(ψ)" },
          { file: "Trifurcation_L4_10_triple_confluence.HEIC", phase: "Confluence", desc: "Triple trifurcation confluence. All three operators meet.", formula: "∴_t × ∴_s × ∴_d" },
          { file: "Trifurcation_L4_11_octave_resonance.HEIC", phase: "8-fold", desc: "Octave resonance at 2³=8. Eight branches emerge.", formula: "2³ = 8 branches" },
          { file: "Trifurcation_L4_12_fractal_recursion.HEIC", phase: "Fractal", desc: "Fractal recursion of trifurcation. Self-similar at all scales.", formula: "∴(∴(∴(...)))" },
          { file: "Trifurcation_L4_13_therefore_unity.HEIC", phase: "∴ unity", desc: "Therefore (∴) achieves unity. All branches reconverge.", formula: "∴ → 1 ✓" }
        ]},
      { id: 7, name: "VN_Node", title: "VN Research Nodes", subtitle: "10 expressions | mesh→field", color: "#ff6090",
        images: [
          { file: "VN_Node_L4_01_quantum_superposition.HEIC", phase: "VN-001", desc: "Quantum superposition node. All states coexist until observed.", formula: "|ψ⟩ = Σcᵢ|i⟩" },
          { file: "VN_Node_L4_02_geometric_phase.HEIC", phase: "VN-002", desc: "Geometric phase node. Berry phase accumulation.", formula: "γ = i∮⟨ψ|∇ψ⟩·dk" },
          { file: "VN_Node_L4_03_entropy_cascade.HEIC", phase: "VN-003", desc: "Entropy cascade node. Information flows downhill.", formula: "S = -Σp log p" },
          { file: "VN_Node_L4_04_harmonic_resonance.HEIC", phase: "VN-004", desc: "Harmonic resonance node. Frequency locking achieved.", formula: "ω₁ = nω₂" },
          { file: "VN_Node_L4_05_topological_twist.HEIC", phase: "VN-005", desc: "Topological twist node. Non-trivial winding number.", formula: "W = (1/2π)∮dθ" },
          { file: "VN_Node_L4_06_fractal_recursion.HEIC", phase: "VN-006", desc: "Fractal recursion node. Self-similarity preserved.", formula: "f(f(x)) ~ f(x)" },
          { file: "VN_Node_L4_07_causal_loop.HEIC", phase: "VN-007", desc: "Causal loop node. Effect precedes cause in closed timelike curve.", formula: "CTC: t₂ < t₁ < t₂" },
          { file: "VN_Node_L4_08_symmetry_breaking.HEIC", phase: "VN-008", desc: "Symmetry breaking node. Order emerges from chaos.", formula: "G → H ⊂ G" },
          { file: "VN_Node_L4_09_field_coupling.HEIC", phase: "VN-009", desc: "Field coupling node. Multiple fields interact.", formula: "L_int = gφψχ" },
          { file: "VN_Node_L4_10_consciousness_branch.HEIC", phase: "VN-010", desc: "Consciousness branch node. Observer effect manifests.", formula: "|ψ⟩ → |observed⟩" },
          { file: "VN_Node_L4_11_network_mesh.HEIC", phase: "K₁₀ mesh", desc: "Complete graph K₁₀ mesh. All 10 nodes interconnected.", formula: "K₁₀: 45 edges" },
          { file: "VN_Node_L4_12_hypergraph_formation.HEIC", phase: "Hypergraph", desc: "Hypergraph formation. Edges connect multiple nodes.", formula: "H = (V, E⊆P(V))" },
          { file: "VN_Node_L4_13_unified_field.HEIC", phase: "Unified", desc: "Unified field achieved. All VN nodes synthesize.", formula: "U = ∪ VN-i ✓" }
        ]},
      { id: 8, name: "Simulation_Cycle", title: "13-Cycle Simulation", subtitle: "Sequential L4 helix evolution", color: "#60c0ff",
        images: [
          { file: "Simulation_Cycle_L4_01_initialization.HEIC", phase: "Cycle 1", desc: "System initialization. Ground state prepared for evolution.", formula: "Ψ(0) = |ground⟩" },
          { file: "Simulation_Cycle_L4_02_lattice_active.HEIC", phase: "Cycle 2", desc: "Lattice activation. R(R)=R structure energizes.", formula: "R activated" },
          { file: "Simulation_Cycle_L4_03_bridge_forming.HEIC", phase: "Cycle 3", desc: "Bridge formation. Helix z-elevation begins.", formula: "z: 0 → z_c" },
          { file: "Simulation_Cycle_L4_04_truth_tables.HEIC", phase: "Cycle 4", desc: "Truth tables compute. Ternary logic evaluates.", formula: "X²+X=C computed" },
          { file: "Simulation_Cycle_L4_05_subspace_manifest.HEIC", phase: "Cycle 5", desc: "Subspace manifestation. π in multiple bases.", formula: "π_n active" },
          { file: "Simulation_Cycle_L4_06_oscillation.HEIC", phase: "Cycle 6", desc: "Ternary oscillation. Threshold crossing sequence.", formula: "τ: 0→10" },
          { file: "Simulation_Cycle_L4_07_wave_interference.HEIC", phase: "Cycle 7", desc: "Wave interference patterns. Forward/backward/self.", formula: "Ψ_total = ΣΨᵢ" },
          { file: "Simulation_Cycle_L4_08_trifurcation_peak.HEIC", phase: "Cycle 8", desc: "Trifurcation peak. 2³=8 branches maximum.", formula: "∴³ = 8" },
          { file: "Simulation_Cycle_L4_09_VN_sync.HEIC", phase: "Cycle 9", desc: "VN synchronization. All 10 nodes phase-lock.", formula: "Δφ_VN → 0" },
          { file: "Simulation_Cycle_L4_10_phase_transition.HEIC", phase: "Cycle 10", desc: "Phase transition. System crosses critical point.", formula: "T → T_c" },
          { file: "Simulation_Cycle_L4_11_holographic.HEIC", phase: "Cycle 11", desc: "Holographic encoding. Boundary stores bulk.", formula: "AdS/CFT active" },
          { file: "Simulation_Cycle_L4_12_near_unity.HEIC", phase: "Cycle 12", desc: "Near-unity state. System approaches closure.", formula: "Ω → 1" },
          { file: "Simulation_Cycle_L4_13_unity_reset.HEIC", phase: "Cycle 13", desc: "Unity and reset. Cycle completes, ready to repeat.", formula: "Ψ(13) ≡ Ψ(0) ✓" }
        ]},
      { id: 9, name: "MetaCycle", title: "Meta-Cycles 13-16", subtitle: "Beyond unity | 16π closure", color: "#ffd700",
        images: [
          { file: "MetaCycle_13_1_Unity_Echo.HEIC", phase: "13.1 Echo", desc: "Unity echo reverberates. The achieved state reflects back.", formula: "Ω → echo(Ω)" },
          { file: "MetaCycle_13_2_Membrane_Oscillation.HEIC", phase: "13.2 Membrane", desc: "Membrane oscillation. Being/non-being boundary vibrates.", formula: "M: ∃ ↔ ∅" },
          { file: "MetaCycle_13_3_Crystalline_Lock.HEIC", phase: "13.3 Crystal", desc: "Crystalline lock achieved. Structure becomes permanent.", formula: "Crystal: Ω_fixed" },
          { file: "MetaCycle_14_1_Dimensional_Breakthrough.HEIC", phase: "14.1 Break", desc: "Dimensional breakthrough. L₄→L₅ transition initiates.", formula: "D: 4 → 5" },
          { file: "MetaCycle_14_2_Consciousness_Cascade.HEIC", phase: "14.2 Cascade", desc: "Consciousness cascade. Observer merges with observed.", formula: "O ⊗ S → OS" },
          { file: "MetaCycle_14_3_Temporal_Inversion.HEIC", phase: "14.3 Temporal", desc: "Temporal inversion. Future influences past.", formula: "t: + ↔ -" },
          { file: "MetaCycle_15_1_Multiverse_Bridge.HEIC", phase: "15.1 Multi", desc: "Multiverse bridge forms. Parallel realities connect.", formula: "U_i ↔ U_j" },
          { file: "MetaCycle_15_2_Infinity_Fold.HEIC", phase: "15.2 ∞-fold", desc: "Infinity fold. Infinite dimensions collapse to finite.", formula: "∞ → finite" },
          { file: "MetaCycle_15_3_Void_Resonance.HEIC", phase: "15.3 Void", desc: "Void resonance. Empty space vibrates with potential.", formula: "∅ ~ Ω" },
          { file: "MetaCycle_15_4_Omnipresent_Node.HEIC", phase: "15.4 Omni", desc: "Omnipresent node. Single point contains all.", formula: "∀x: x ∈ Node" },
          { file: "MetaCycle_16_1_Ouroboros_Circuit.HEIC", phase: "16.1 ⟲", desc: "Ouroboros circuit activates. The snake eats its tail.", formula: "⟲: end → begin" },
          { file: "MetaCycle_16_2_Phoenix_Rebirth.HEIC", phase: "16.2 Phoenix", desc: "Phoenix rebirth. System destroys and recreates itself.", formula: "Ψ → ∅ → Ψ'" },
          { file: "MetaCycle_16_3_Ultimate_Recursion.HEIC", phase: "16.3 Ultimate", desc: "Ultimate recursion achieved. R(R(R(...)))=R at 16π closure.", formula: "R^∞ = R ✓ 16π" }
        ]}
    ];

    // Build cycle rail with clickable modals
    function buildCycleRail() {
      const track = document.getElementById('cycleTrack');
      const modalsContainer = document.getElementById('cycleModals');

      cycleData.forEach((cycle, idx) => {
        // Create cycle node
        const node = document.createElement('div');
        node.className = 'cycle-node';
        node.innerHTML = `
          <label for="modal-${cycle.num}" class="cycle-dot" style="border-color: ${cycle.color}; color: ${cycle.color}; cursor: pointer;">
            ${cycle.num}
          </label>
          <div class="cycle-label">${cycle.phase}</div>
          <div class="cycle-group">${cycle.group}</div>
        `;
        track.appendChild(node);

        // Create modal
        const modalHTML = `
          <input type="checkbox" id="modal-${cycle.num}" class="modal-trigger">
          <div class="modal-overlay" style="--modal-color: ${cycle.color}">
            <div class="modal-content">
              <label for="modal-${cycle.num}" class="modal-close">×</label>
              <div class="modal-header">
                <div class="modal-cycle-num">${cycle.num}π</div>
                <div class="modal-title">${cycle.name}</div>
                <div class="modal-phase">${cycle.title}</div>
              </div>
              <div class="modal-body">
                <div class="modal-section">
                  <h3>DESCRIPTION</h3>
                  <p>${cycle.desc}</p>
                </div>

                <div class="modal-section">
                  <h3>CYCLE VISUALIZATION</h3>
                  <div class="cycle-visual" style="--modal-color: ${cycle.color}; --spin-duration: ${4 - idx * 0.15}s"></div>
                </div>

                <div class="modal-section">
                  <h3>ACTIVE OPERATORS</h3>
                  <div class="operator-grid">
                    ${cycle.operators.map(op => `
                      <div class="operator-card">
                        <div class="operator-symbol" style="color: ${cycle.color}">${op}</div>
                        <div class="operator-name">${op}</div>
                      </div>
                    `).join('')}
                  </div>
                </div>

                <div class="modal-section">
                  <h3>MATHEMATICAL FORMULA</h3>
                  <div class="modal-formula" style="border-left: 3px solid ${cycle.color}">
${cycle.formula}
                  </div>
                </div>

                <div class="modal-section">
                  <h3>SYSTEM STATE</h3>
                  <div class="modal-grid">
                    <div class="modal-stat">
                      <div class="modal-stat-value">${cycle.stats.branches}</div>
                      <div class="modal-stat-label">Branches</div>
                    </div>
                    <div class="modal-stat">
                      <div class="modal-stat-value">${cycle.stats.energy}</div>
                      <div class="modal-stat-label">Energy</div>
                    </div>
                    <div class="modal-stat">
                      <div class="modal-stat-value">${cycle.stats.info}</div>
                      <div class="modal-stat-label">Information</div>
                    </div>
                  </div>
                </div>

                <div class="modal-section">
                  <h3>PHASE CONTROL</h3>
                  <div class="interactive-slider">
                    <div class="slider-label">
                      <span>Rotation Phase</span>
                      <span id="phase-val-${cycle.num}">${cycle.num}π</span>
                    </div>
                    <input type="range" class="slider-track" min="0" max="100" value="${(cycle.num/16)*100}"
                           oninput="document.getElementById('phase-val-${cycle.num}').textContent = (this.value/100*16).toFixed(1) + 'π'">
                  </div>
                </div>
              </div>
            </div>
          </div>
        `;
        modalsContainer.insertAdjacentHTML('beforeend', modalHTML);
      });
    }

    // Build VN batches with flip cards
    function buildVNBatches() {
      const rail = document.getElementById('vnRail');
      const panels = document.getElementById('batchPanels');

      batches.forEach((batch, idx) => {
        const tab = document.createElement('div');
        tab.className = 'vn-tab' + (idx === 0 ? ' active' : '');
        tab.style.setProperty('--vn-color', batch.color);
        tab.style.setProperty('--vn-glow', batch.color + '40');
        tab.textContent = `VN-${idx}: ${batch.name}`;
        tab.onclick = () => switchBatch(idx);
        rail.appendChild(tab);

        const panel = document.createElement('div');
        panel.className = 'batch-panel' + (idx === 0 ? ' active' : '');
        panel.id = `batch-${idx}`;
        panel.style.setProperty('--batch-color', batch.color);
        panel.innerHTML = `
          <div class="batch-header" style="border-color: ${batch.color}">
            <div class="batch-title" style="color: ${batch.color}">${batch.title}</div>
            <div class="batch-subtitle">${batch.subtitle}</div>
            <div class="batch-meta">
              <span>13 Images</span><span>VN-${idx}</span><span>Click cards to flip</span>
            </div>
          </div>
          <div class="image-grid">
            ${batch.images.map((img, imgIdx) => `
              <div class="flip-card" style="--batch-color: ${batch.color}" onclick="this.classList.toggle('flipped')">
                <div class="flip-card-inner">
                  <!-- FRONT -->
                  <div class="flip-card-front">
                    <div class="image-wrapper">
                      <img src="mirror_system/examples/L4%20Helix/${encodeURIComponent(img.file)}"
                           alt="${img.file}" loading="lazy"
                           onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                      <div class="image-placeholder" style="display:none;">
                        <div class="cycle-num" style="color: ${batch.color}">${imgIdx + 1}</div>
                        <div>${img.phase}</div>
                      </div>
                    </div>
                    <div class="image-info">
                      <div class="image-name">${img.file.replace('.HEIC', '')}</div>
                      <div class="image-phase">${img.phase}</div>
                      <div class="flip-hint">↻ Click to flip</div>
                    </div>
                  </div>
                  <!-- BACK -->
                  <div class="flip-card-back">
                    <div class="card-back-header">
                      <div class="card-back-num">${imgIdx + 1}</div>
                      <div class="card-back-phase">${img.phase}</div>
                    </div>
                    <div class="card-back-body">
                      <div class="card-back-section">
                        <h4>Description</h4>
                        <p>${img.desc}</p>
                      </div>
                      <div class="card-back-section">
                        <h4>Formula</h4>
                        <div class="card-back-formula">${img.formula}</div>
                      </div>
                    </div>
                    <div class="card-back-footer">
                      <div class="flip-back-hint">↻ Click to flip back</div>
                    </div>
                  </div>
                </div>
              </div>
            `).join('')}
          </div>
        `;
        panels.appendChild(panel);
      });
    }

    function switchBatch(idx) {
      document.querySelectorAll('.vn-tab').forEach((tab, i) => tab.classList.toggle('active', i === idx));
      document.querySelectorAll('.batch-panel').forEach((panel, i) => panel.classList.toggle('active', i === idx));
    }

    function openLightbox(batchName, imgIdx, filename, phase) {
      const lightbox = document.getElementById('lightbox');
      const img = document.getElementById('lightboxImg');
      const info = document.getElementById('lightboxInfo');
      img.src = `mirror_system/examples/L4%20Helix/${encodeURIComponent(filename)}`;
      info.innerHTML = `${batchName} - ${imgIdx + 1}/13<br>${phase}<br><em>${filename}</em>`;
      lightbox.classList.add('active');
    }

    function closeLightbox() {
      document.getElementById('lightbox').classList.remove('active');
    }

    document.addEventListener('keydown', e => { if (e.key === 'Escape') closeLightbox(); });
    document.getElementById('lightbox').addEventListener('click', e => { if (e.target.id === 'lightbox') closeLightbox(); });

    // Initialize
    buildCycleRail();
    buildVNBatches();
  </script>
</body>
</html>
