<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BFADGS Operator System | Closed Monoid Traversal</title>
    <style>
        :root {
            --bg-deep: #0a0a0f;
            --bg-mid: #12121a;
            --bg-light: #1a1a2e;
            --op-B: #3b82f6;
            --op-F: #10b981;
            --op-A: #f59e0b;
            --op-D: #ef4444;
            --op-G: #8b5cf6;
            --op-S: #ec4899;
            --text-primary: #e2e8f0;
            --text-dim: #94a3b8;
            --gold: #fbbf24;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--bg-deep);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 60px 20px 40px;
            background: linear-gradient(180deg, var(--bg-light) 0%, var(--bg-deep) 100%);
            border-bottom: 1px solid rgba(255,255,255,0.05);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 600px;
            height: 300px;
            background: radial-gradient(ellipse, rgba(139,92,246,0.15) 0%, transparent 70%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 300;
            letter-spacing: 0.3em;
            margin-bottom: 15px;
            background: linear-gradient(90deg, var(--op-B), var(--op-F), var(--op-A), var(--op-D), var(--op-G), var(--op-S));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle {
            font-size: 1.2rem;
            color: var(--text-dim);
            font-weight: 300;
        }

        .header .formula {
            margin-top: 25px;
            font-size: 1.5rem;
            font-family: 'Times New Roman', serif;
            color: var(--gold);
        }

        /* Main content */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* Operator Cards */
        .operators-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 50px;
        }

        .operator-card {
            background: var(--bg-mid);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.05);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .operator-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .operator-card.op-B { border-top: 3px solid var(--op-B); }
        .operator-card.op-F { border-top: 3px solid var(--op-F); }
        .operator-card.op-A { border-top: 3px solid var(--op-A); }
        .operator-card.op-D { border-top: 3px solid var(--op-D); }
        .operator-card.op-G { border-top: 3px solid var(--op-G); }
        .operator-card.op-S { border-top: 3px solid var(--op-S); }

        .operator-card .symbol {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .operator-card.op-B .symbol { color: var(--op-B); }
        .operator-card.op-F .symbol { color: var(--op-F); }
        .operator-card.op-A .symbol { color: var(--op-A); }
        .operator-card.op-D .symbol { color: var(--op-D); }
        .operator-card.op-G .symbol { color: var(--op-G); }
        .operator-card.op-S .symbol { color: var(--op-S); }

        .operator-card .name {
            font-size: 1.2rem;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .operator-card .action {
            font-family: 'Times New Roman', serif;
            font-size: 1.1rem;
            color: var(--gold);
            margin-bottom: 10px;
        }

        .operator-card .description {
            font-size: 0.9rem;
            color: var(--text-dim);
            line-height: 1.5;
        }

        /* Section */
        .section {
            background: var(--bg-mid);
            border-radius: 16px;
            padding: 35px;
            margin-bottom: 30px;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .section h2 {
            font-size: 1.8rem;
            font-weight: 400;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .section h2::before {
            content: '';
            width: 4px;
            height: 30px;
            background: linear-gradient(180deg, var(--op-G), var(--op-S));
            border-radius: 2px;
        }

        /* Algebraic Structure */
        .structure-box {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            margin-bottom: 25px;
        }

        .structure-box .main-formula {
            font-size: 2rem;
            font-family: 'Times New Roman', serif;
            color: var(--gold);
            margin-bottom: 20px;
        }

        .axioms {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .axiom {
            background: var(--bg-deep);
            padding: 20px;
            border-radius: 8px;
            border-left: 3px solid var(--op-F);
        }

        .axiom .title {
            font-weight: 600;
            color: var(--op-F);
            margin-bottom: 8px;
        }

        .axiom .formula {
            font-family: 'Times New Roman', serif;
            font-size: 1.1rem;
            color: var(--text-primary);
        }

        /* Cayley Table */
        .cayley-container {
            overflow-x: auto;
        }

        .cayley-table {
            width: 100%;
            border-collapse: collapse;
            font-family: 'Times New Roman', serif;
            font-size: 1.1rem;
        }

        .cayley-table th,
        .cayley-table td {
            padding: 15px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .cayley-table th {
            background: var(--bg-light);
            font-weight: 600;
        }

        .cayley-table td {
            background: var(--bg-deep);
            transition: all 0.2s ease;
        }

        .cayley-table td:hover {
            background: rgba(139,92,246,0.2);
            transform: scale(1.05);
        }

        .cayley-table .header-B { color: var(--op-B); }
        .cayley-table .header-F { color: var(--op-F); }
        .cayley-table .header-A { color: var(--op-A); }
        .cayley-table .header-D { color: var(--op-D); }
        .cayley-table .header-G { color: var(--op-G); }
        .cayley-table .header-S { color: var(--op-S); }
        .cayley-table .header-I { color: var(--gold); }

        /* Closure Properties */
        .closure-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .closure-item {
            background: var(--bg-light);
            padding: 25px;
            border-radius: 10px;
        }

        .closure-item h4 {
            color: var(--gold);
            margin-bottom: 12px;
            font-size: 1.1rem;
        }

        .closure-item .formula {
            font-family: 'Times New Roman', serif;
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        .closure-item p {
            color: var(--text-dim);
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* Traversal Canvas */
        .canvas-container {
            position: relative;
            background: var(--bg-deep);
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 25px;
        }

        #traversalCanvas {
            width: 100%;
            height: 500px;
            display: block;
        }

        .canvas-legend {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(10,10,15,0.9);
            padding: 15px;
            border-radius: 8px;
            font-size: 0.85rem;
        }

        .canvas-legend div {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 5px;
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        /* Calculator */
        .calculator {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 30px;
        }

        .calc-display {
            background: var(--bg-deep);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            min-height: 80px;
            font-family: 'Courier New', monospace;
        }

        .calc-expression {
            font-size: 1.5rem;
            color: var(--gold);
            margin-bottom: 10px;
            word-wrap: break-word;
        }

        .calc-result {
            font-size: 1.1rem;
            color: var(--op-F);
        }

        .calc-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .calc-btn {
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .calc-btn:hover {
            transform: scale(1.05);
        }

        .calc-btn.op-B { background: var(--op-B); color: white; }
        .calc-btn.op-F { background: var(--op-F); color: white; }
        .calc-btn.op-A { background: var(--op-A); color: black; }
        .calc-btn.op-D { background: var(--op-D); color: white; }
        .calc-btn.op-G { background: var(--op-G); color: white; }
        .calc-btn.op-S { background: var(--op-S); color: white; }
        .calc-btn.identity { background: var(--gold); color: black; }
        .calc-btn.action { background: rgba(255,255,255,0.1); color: var(--text-primary); }

        /* Traversal Semantics */
        .semantics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
        }

        .semantic-card {
            background: var(--bg-light);
            border-radius: 10px;
            padding: 25px;
            position: relative;
            overflow: hidden;
        }

        .semantic-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--op-B), var(--op-S));
        }

        .semantic-card h4 {
            color: var(--text-primary);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .semantic-card .path {
            font-family: 'Times New Roman', serif;
            font-size: 1.3rem;
            color: var(--gold);
            margin-bottom: 15px;
            text-align: center;
            padding: 15px;
            background: var(--bg-deep);
            border-radius: 8px;
        }

        .semantic-card p {
            color: var(--text-dim);
            line-height: 1.6;
        }

        /* Graph Algorithms */
        .algorithm-box {
            background: var(--bg-deep);
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 4px solid var(--op-G);
        }

        .algorithm-box h4 {
            color: var(--op-G);
            margin-bottom: 15px;
        }

        .algorithm-box pre {
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            line-height: 1.8;
            color: var(--text-primary);
            overflow-x: auto;
        }

        .algorithm-box .keyword { color: var(--op-S); }
        .algorithm-box .operator { color: var(--gold); }
        .algorithm-box .comment { color: var(--text-dim); }

        /* Inverse Relations Diagram */
        .inverse-diagram {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 40px;
            flex-wrap: wrap;
            padding: 30px;
            background: var(--bg-deep);
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .inverse-pair {
            text-align: center;
            padding: 25px;
            background: var(--bg-light);
            border-radius: 10px;
            min-width: 180px;
        }

        .inverse-pair .ops {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .inverse-pair .relation {
            font-family: 'Times New Roman', serif;
            font-size: 1.2rem;
            color: var(--gold);
        }

        /* State Diagram */
        .state-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            padding: 40px;
            background: var(--bg-deep);
            border-radius: 12px;
            flex-wrap: wrap;
        }

        .state-node {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            border: 3px solid;
        }

        .state-alpha {
            background: linear-gradient(135deg, var(--op-B), var(--op-F));
            border-color: var(--op-B);
        }

        .state-omega {
            background: linear-gradient(135deg, var(--op-S), var(--op-G));
            border-color: var(--op-S);
        }

        .state-arrow {
            font-size: 2rem;
            color: var(--gold);
        }

        .state-ops {
            font-size: 0.9rem;
            color: var(--text-dim);
            text-align: center;
        }

        /* Full Cayley Table Styles */
        .full-cayley-table {
            width: 100%;
            border-collapse: collapse;
            font-family: 'Times New Roman', serif;
            font-size: 1rem;
            margin-top: 20px;
        }

        .full-cayley-table th,
        .full-cayley-table td {
            padding: 12px 8px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
            min-width: 50px;
            transition: all 0.2s ease;
            position: relative;
        }

        .full-cayley-table th {
            background: var(--bg-light);
            font-weight: 600;
        }

        .full-cayley-table td {
            background: var(--bg-deep);
            cursor: pointer;
        }

        .full-cayley-table td:hover {
            background: rgba(139,92,246,0.3);
            transform: scale(1.1);
            z-index: 10;
            box-shadow: 0 0 15px rgba(139,92,246,0.5);
        }

        .full-cayley-table td.identity-cell {
            background: rgba(251,191,36,0.2);
            font-weight: bold;
        }

        .cayley-tooltip {
            display: none;
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-light);
            padding: 10px 15px;
            border-radius: 8px;
            white-space: nowrap;
            z-index: 100;
            border: 1px solid var(--gold);
            font-size: 0.9rem;
        }

        .full-cayley-table td:hover .cayley-tooltip {
            display: block;
        }

        /* Monoid Properties */
        .monoid-properties {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .property-card {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 25px;
            border-left: 4px solid var(--gold);
        }

        .property-card h4 {
            color: var(--gold);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .property-card .formula-block {
            font-family: 'Times New Roman', serif;
            font-size: 1.2rem;
            color: var(--text-primary);
            background: var(--bg-deep);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 12px;
            text-align: center;
        }

        .property-card .example {
            font-size: 0.95rem;
            color: var(--text-dim);
            line-height: 1.6;
        }

        /* Inverse Pairs Deep Analysis */
        .inverse-analysis {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
        }

        .inverse-card {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 25px;
            position: relative;
            overflow: hidden;
        }

        .inverse-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--op-A), var(--op-D));
        }

        .inverse-card.flow-inverse::before {
            background: linear-gradient(90deg, var(--op-F), var(--gold));
        }

        .inverse-card.branch-inverse::before {
            background: linear-gradient(90deg, var(--op-G), var(--op-S));
        }

        .inverse-card.genesis-inverse::before {
            background: linear-gradient(90deg, var(--op-B), var(--op-S));
        }

        .inverse-card h4 {
            color: var(--text-primary);
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .inverse-card .main-relation {
            font-family: 'Times New Roman', serif;
            font-size: 1.5rem;
            color: var(--gold);
            text-align: center;
            padding: 20px;
            background: var(--bg-deep);
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .inverse-card .semantics {
            font-size: 0.95rem;
            color: var(--text-dim);
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .inverse-card .proof {
            background: rgba(139,92,246,0.1);
            padding: 15px;
            border-radius: 8px;
            font-family: 'Times New Roman', serif;
            font-size: 0.95rem;
            color: var(--text-primary);
        }

        /* S3 Action Section */
        .s3-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .s3-card {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 25px;
        }

        .s3-card h4 {
            color: var(--op-G);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .permutation-display {
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            background: var(--bg-deep);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            text-align: center;
        }

        .conjugacy-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
        }

        .conjugacy-table th,
        .conjugacy-table td {
            padding: 10px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .conjugacy-table th {
            background: var(--bg-deep);
            color: var(--op-G);
        }

        /* L4-Helix Section */
        .helix-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            align-items: start;
        }

        @media (max-width: 900px) {
            .helix-container {
                grid-template-columns: 1fr;
            }
        }

        .helix-canvas-box {
            background: var(--bg-deep);
            border-radius: 12px;
            overflow: hidden;
        }

        #helixCanvas {
            width: 100%;
            height: 400px;
            display: block;
        }

        .helix-operators {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .helix-op {
            background: var(--bg-light);
            border-radius: 10px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .helix-op .op-symbol {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .helix-op .op-transform {
            flex: 1;
        }

        .helix-op .op-transform .formula {
            font-family: 'Times New Roman', serif;
            font-size: 1.1rem;
            color: var(--gold);
            margin-bottom: 5px;
        }

        .helix-op .op-transform .desc {
            font-size: 0.9rem;
            color: var(--text-dim);
        }

        /* I2-minus Section */
        .i2-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .i2-card {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 25px;
            border-top: 3px solid var(--op-S);
        }

        .i2-card.preserve { border-top-color: var(--op-F); }
        .i2-card.negate { border-top-color: var(--op-D); }
        .i2-card.fourth { border-top-color: var(--gold); }

        .i2-card h4 {
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .i2-card .formula-center {
            font-family: 'Times New Roman', serif;
            font-size: 1.3rem;
            text-align: center;
            padding: 15px;
            background: var(--bg-deep);
            border-radius: 8px;
            margin-bottom: 15px;
            color: var(--gold);
        }

        .fourth-root-diagram {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
            padding: 25px;
            background: var(--bg-deep);
            border-radius: 12px;
            margin-top: 20px;
        }

        .fourth-root-node {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            font-weight: bold;
            background: var(--bg-light);
            border: 2px solid var(--gold);
        }

        .fourth-root-arrow {
            font-size: 1.5rem;
            color: var(--op-G);
        }

        /* Energy Physics Section */
        .energy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .energy-card {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .energy-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .energy-card .op {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .energy-card .eigenvalue {
            font-family: 'Times New Roman', serif;
            font-size: 1.1rem;
            color: var(--gold);
            margin-bottom: 8px;
        }

        .energy-card .energy {
            font-family: 'Times New Roman', serif;
            font-size: 1rem;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .energy-card .numeric {
            font-size: 0.9rem;
            color: var(--text-dim);
        }

        .conservation-laws {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 30px;
        }

        .conservation-laws h4 {
            color: var(--gold);
            margin-bottom: 20px;
            font-size: 1.2rem;
        }

        .law-item {
            background: var(--bg-deep);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid var(--op-F);
        }

        .law-item h5 {
            color: var(--op-F);
            margin-bottom: 10px;
        }

        .law-item .formula {
            font-family: 'Times New Roman', serif;
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        .law-item .explanation {
            font-size: 0.95rem;
            color: var(--text-dim);
            line-height: 1.6;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 40px;
            color: var(--text-dim);
            font-size: 0.9rem;
        }

        .footer .monoid-signature {
            font-family: 'Times New Roman', serif;
            font-size: 1.3rem;
            color: var(--gold);
            margin-bottom: 15px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
                letter-spacing: 0.1em;
            }

            .operators-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .calc-buttons {
                grid-template-columns: repeat(2, 1fr);
            }

            .inverse-diagram {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <h1>BFADGS</h1>
        <p class="subtitle">Closed Monoid Operator System for Graph Traversal</p>
        <div class="formula">⟨B, F, A, D, G, S | e⟩ : α → ω</div>
    </header>

    <div class="container">
        <!-- Operator Cards -->
        <section class="operators-grid">
            <div class="operator-card op-B" onclick="addOperator('B')">
                <div class="symbol">B</div>
                <div class="name">Begin</div>
                <div class="action">∅ → I²</div>
                <div class="description">Initialize state from void. The genesis operator that creates initial structure.</div>
            </div>
            <div class="operator-card op-F" onclick="addOperator('F')">
                <div class="symbol">F</div>
                <div class="name">Flow</div>
                <div class="action">x → φ·x</div>
                <div class="description">Traverse edge by golden ratio. Propagates state through connections.</div>
            </div>
            <div class="operator-card op-A" onclick="addOperator('A')">
                <div class="symbol">A</div>
                <div class="name">Ascend</div>
                <div class="action">n → n+1</div>
                <div class="description">Increase depth level. Move toward abstraction and higher-order structure.</div>
            </div>
            <div class="operator-card op-D" onclick="addOperator('D')">
                <div class="symbol">D</div>
                <div class="name">Descend</div>
                <div class="action">n → n-1</div>
                <div class="description">Decrease depth level. Move toward concretion and lower-order detail.</div>
            </div>
            <div class="operator-card op-G" onclick="addOperator('G')">
                <div class="symbol">G</div>
                <div class="name">Generate</div>
                <div class="action">x → {x, x'}</div>
                <div class="description">Spawn branch from node. Creates bifurcation and parallel paths.</div>
            </div>
            <div class="operator-card op-S" onclick="addOperator('S')">
                <div class="symbol">S</div>
                <div class="name">Synthesize</div>
                <div class="action">{a,b} → a⊕b</div>
                <div class="description">Merge divergent paths. Unifies branches through symmetric difference.</div>
            </div>
        </section>

        <!-- Algebraic Structure -->
        <section class="section">
            <h2>Algebraic Structure</h2>
            <div class="structure-box">
                <div class="main-formula">⟨{B, F, A, D, G, S}, ∘, e⟩ ≅ Closed Monoid M₆</div>
            </div>

            <div class="axioms">
                <div class="axiom">
                    <div class="title">Closure</div>
                    <div class="formula">∀x,y ∈ M₆ : x ∘ y ∈ M₆</div>
                </div>
                <div class="axiom">
                    <div class="title">Associativity</div>
                    <div class="formula">(x ∘ y) ∘ z = x ∘ (y ∘ z)</div>
                </div>
                <div class="axiom">
                    <div class="title">Identity</div>
                    <div class="formula">∃e : e ∘ x = x ∘ e = x</div>
                </div>
                <div class="axiom">
                    <div class="title">Generator Set</div>
                    <div class="formula">M₆ = ⟨B,F,A,D,G,S⟩*</div>
                </div>
            </div>
        </section>

        <!-- Interactive Canvas -->
        <section class="section">
            <h2>Traversal Visualization</h2>
            <div class="canvas-container">
                <canvas id="traversalCanvas"></canvas>
                <div class="canvas-legend">
                    <div><span class="legend-dot" style="background: var(--op-B)"></span> Begin</div>
                    <div><span class="legend-dot" style="background: var(--op-F)"></span> Flow</div>
                    <div><span class="legend-dot" style="background: var(--op-A)"></span> Ascend</div>
                    <div><span class="legend-dot" style="background: var(--op-D)"></span> Descend</div>
                    <div><span class="legend-dot" style="background: var(--op-G)"></span> Generate</div>
                    <div><span class="legend-dot" style="background: var(--op-S)"></span> Synthesize</div>
                </div>
            </div>
            <div style="text-align: center; color: var(--text-dim); margin-top: 15px;">
                Click operators above or use the calculator below to visualize traversal paths
            </div>
        </section>

        <!-- Cayley Table -->
        <section class="section">
            <h2>Cayley Table: Operator Compositions</h2>
            <p style="color: var(--text-dim); margin-bottom: 20px;">
                The composition table defines how operators combine. Each cell shows the result of (row ∘ column).
            </p>
            <div class="cayley-container">
                <table class="cayley-table">
                    <thead>
                        <tr>
                            <th>∘</th>
                            <th class="header-I">e</th>
                            <th class="header-B">B</th>
                            <th class="header-F">F</th>
                            <th class="header-A">A</th>
                            <th class="header-D">D</th>
                            <th class="header-G">G</th>
                            <th class="header-S">S</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th class="header-I">e</th>
                            <td>e</td>
                            <td style="color: var(--op-B)">B</td>
                            <td style="color: var(--op-F)">F</td>
                            <td style="color: var(--op-A)">A</td>
                            <td style="color: var(--op-D)">D</td>
                            <td style="color: var(--op-G)">G</td>
                            <td style="color: var(--op-S)">S</td>
                        </tr>
                        <tr>
                            <th class="header-B">B</th>
                            <td style="color: var(--op-B)">B</td>
                            <td style="color: var(--op-B)">B</td>
                            <td style="color: var(--op-F)">BF</td>
                            <td style="color: var(--op-A)">BA</td>
                            <td style="color: var(--op-D)">BD</td>
                            <td style="color: var(--op-G)">BG</td>
                            <td style="color: var(--gold)">e</td>
                        </tr>
                        <tr>
                            <th class="header-F">F</th>
                            <td style="color: var(--op-F)">F</td>
                            <td style="color: var(--op-B)">FB</td>
                            <td style="color: var(--op-F)">F²</td>
                            <td style="color: var(--op-A)">FA</td>
                            <td style="color: var(--op-D)">FD</td>
                            <td style="color: var(--op-G)">FG</td>
                            <td style="color: var(--op-S)">FS</td>
                        </tr>
                        <tr>
                            <th class="header-A">A</th>
                            <td style="color: var(--op-A)">A</td>
                            <td style="color: var(--op-B)">AB</td>
                            <td style="color: var(--op-F)">AF</td>
                            <td style="color: var(--op-A)">A²</td>
                            <td style="color: var(--gold)">e</td>
                            <td style="color: var(--op-G)">AG</td>
                            <td style="color: var(--op-S)">AS</td>
                        </tr>
                        <tr>
                            <th class="header-D">D</th>
                            <td style="color: var(--op-D)">D</td>
                            <td style="color: var(--op-B)">DB</td>
                            <td style="color: var(--op-F)">DF</td>
                            <td style="color: var(--gold)">e</td>
                            <td style="color: var(--op-D)">D²</td>
                            <td style="color: var(--op-G)">DG</td>
                            <td style="color: var(--op-S)">DS</td>
                        </tr>
                        <tr>
                            <th class="header-G">G</th>
                            <td style="color: var(--op-G)">G</td>
                            <td style="color: var(--op-B)">GB</td>
                            <td style="color: var(--op-F)">GF</td>
                            <td style="color: var(--op-A)">GA</td>
                            <td style="color: var(--op-D)">GD</td>
                            <td style="color: var(--op-G)">G²</td>
                            <td style="color: var(--gold)">e</td>
                        </tr>
                        <tr>
                            <th class="header-S">S</th>
                            <td style="color: var(--op-S)">S</td>
                            <td style="color: var(--gold)">e</td>
                            <td style="color: var(--op-F)">SF</td>
                            <td style="color: var(--op-A)">SA</td>
                            <td style="color: var(--op-D)">SD</td>
                            <td style="color: var(--gold)">e</td>
                            <td style="color: var(--op-S)">S²</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div style="margin-top: 20px; padding: 20px; background: var(--bg-light); border-radius: 8px;">
                <p style="color: var(--text-dim); font-size: 0.95rem;">
                    <strong style="color: var(--gold);">Key Observations:</strong><br>
                    - A·D = D·A = e (Ascend and Descend are inverses)<br>
                    - B·S = S·B = e (Begin and Synthesize close the loop)<br>
                    - G·S = S·G = e (Generate and Synthesize are complementary)<br>
                    - F² represents double-flow (φ² = φ + 1 by golden ratio property)
                </p>
            </div>
        </section>

        <!-- Closure Properties -->
        <section class="section">
            <h2>Closure Properties</h2>
            <div class="closure-grid">
                <div class="closure-item">
                    <h4>Compositional Closure</h4>
                    <div class="formula">∀OP₁, OP₂ ∈ BFADGS : OP₁ ∘ OP₂ ∈ BFADGS*</div>
                    <p>Any sequence of operators produces a valid traversal within the system's state space.</p>
                </div>
                <div class="closure-item">
                    <h4>Path Closure</h4>
                    <div class="formula">Path(α, ω) ⊆ {BFADGS}*</div>
                    <p>Every path from origin (α) to terminus (ω) is expressible as a word in the operator alphabet.</p>
                </div>
                <div class="closure-item">
                    <h4>Level Closure</h4>
                    <div class="formula">A^n ∘ D^n = D^n ∘ A^n = e</div>
                    <p>Ascending and descending the same number of levels returns to the original depth.</p>
                </div>
                <div class="closure-item">
                    <h4>Branch Closure</h4>
                    <div class="formula">S ∘ G^n = G^(n-1), S^n ∘ G^n = e</div>
                    <p>Synthesis reduces branching; equal generate-synthesize pairs close to identity.</p>
                </div>
                <div class="closure-item">
                    <h4>Flow Periodicity</h4>
                    <div class="formula">F^∞ = lim(φⁿ) mod Ω</div>
                    <p>Repeated flow converges or cycles within the bounded state space Ω.</p>
                </div>
                <div class="closure-item">
                    <h4>Genesis-Terminus Duality</h4>
                    <div class="formula">B ⊣ S : ∅ ↔ Ω</div>
                    <p>Begin and Synthesize form an adjoint pair connecting void and complete states.</p>
                </div>
            </div>
        </section>

        <!-- Inverse Relations -->
        <section class="section">
            <h2>Inverse Relations</h2>
            <div class="inverse-diagram">
                <div class="inverse-pair">
                    <div class="ops">
                        <span style="color: var(--op-A)">A</span> ·
                        <span style="color: var(--op-D)">D</span>
                    </div>
                    <div class="relation">= e (identity on levels)</div>
                </div>
                <div class="inverse-pair">
                    <div class="ops">
                        <span style="color: var(--op-D)">D</span> ·
                        <span style="color: var(--op-A)">A</span>
                    </div>
                    <div class="relation">= e (symmetric inverse)</div>
                </div>
                <div class="inverse-pair">
                    <div class="ops">
                        <span style="color: var(--op-B)">B</span> ·
                        <span style="color: var(--op-S)">S</span>
                    </div>
                    <div class="relation">= e (α-ω closure)</div>
                </div>
                <div class="inverse-pair">
                    <div class="ops">
                        <span style="color: var(--op-G)">G</span> ·
                        <span style="color: var(--op-S)">S</span>
                    </div>
                    <div class="relation">= e (branch closure)</div>
                </div>
            </div>

            <div class="state-flow">
                <div class="state-node state-alpha">α</div>
                <div>
                    <div class="state-arrow">→ B·F·A·G →</div>
                    <div class="state-ops">expansion phase</div>
                </div>
                <div style="width: 60px; height: 60px; border-radius: 50%; background: var(--bg-light); display: flex; align-items: center; justify-content: center; color: var(--gold);">I²</div>
                <div>
                    <div class="state-arrow">→ S·D·F·S →</div>
                    <div class="state-ops">synthesis phase</div>
                </div>
                <div class="state-node state-omega">ω</div>
            </div>
        </section>

        <!-- Traversal Semantics -->
        <section class="section">
            <h2>Traversal Semantics: α → ω Space</h2>
            <div class="semantics-grid">
                <div class="semantic-card">
                    <h4>Depth-First Traversal</h4>
                    <div class="path">B → (A → F)* → (D → F)* → S</div>
                    <p>Descend fully before backtracking. The pattern A→F explores depth while D→F returns through siblings.</p>
                </div>
                <div class="semantic-card">
                    <h4>Breadth-First Traversal</h4>
                    <div class="path">B → (F → G)* → S*</div>
                    <p>Flow across level before descending. Generate creates the frontier, Synthesize collapses visited nodes.</p>
                </div>
                <div class="semantic-card">
                    <h4>Golden Spiral Path</h4>
                    <div class="path">B → (F^φ → A)* → ω</div>
                    <p>Flow by golden ratio steps with periodic ascension. Creates logarithmic spiral traversal pattern.</p>
                </div>
                <div class="semantic-card">
                    <h4>Binary Tree Walk</h4>
                    <div class="path">B → (G → A → F → D → F)* → S*</div>
                    <p>Generate two children, explore left (ascend-flow), return (descend-flow), synthesize at root.</p>
                </div>
                <div class="semantic-card">
                    <h4>Convergent Synthesis</h4>
                    <div class="path">G^n → F* → S^n</div>
                    <p>Maximum branching followed by parallel flow and complete synthesis. The system converges to unity.</p>
                </div>
                <div class="semantic-card">
                    <h4>Level-Order Scan</h4>
                    <div class="path">B → (F* → D → G)* → A* → S</div>
                    <p>Complete each level (F*), descend one (D), generate next level (G), finally ascend all and synthesize.</p>
                </div>
            </div>
        </section>

        <!-- Graph Algorithms -->
        <section class="section">
            <h2>Connection to Graph Algorithms</h2>
            <div class="algorithm-box">
                <h4>BFADGS-DFS (Depth-First Search)</h4>
                <pre><span class="keyword">function</span> DFS(node):
    <span class="operator">B</span>(node)                    <span class="comment">// Initialize at node</span>
    <span class="keyword">for each</span> child <span class="keyword">in</span> children(node):
        <span class="operator">A</span>                         <span class="comment">// Ascend to child level</span>
        <span class="operator">F</span>(child)                  <span class="comment">// Flow to child</span>
        DFS(child)                <span class="comment">// Recursive descent</span>
        <span class="operator">D</span>                         <span class="comment">// Descend back</span>
    <span class="operator">S</span>(node)                    <span class="comment">// Synthesize results</span></pre>
            </div>

            <div class="algorithm-box">
                <h4>BFADGS-BFS (Breadth-First Search)</h4>
                <pre><span class="keyword">function</span> BFS(root):
    queue = [<span class="operator">B</span>(root)]         <span class="comment">// Begin with root</span>
    <span class="keyword">while</span> queue not empty:
        current = queue.pop()
        <span class="keyword">for each</span> neighbor <span class="keyword">in</span> adjacent(current):
            <span class="operator">F</span>(neighbor)           <span class="comment">// Flow to neighbor</span>
            <span class="operator">G</span>                     <span class="comment">// Generate frontier node</span>
            queue.push(neighbor)
    <span class="operator">S</span>*                        <span class="comment">// Synthesize all paths</span></pre>
            </div>

            <div class="algorithm-box">
                <h4>BFADGS-Dijkstra (Weighted Shortest Path)</h4>
                <pre><span class="keyword">function</span> Dijkstra(source, target):
    <span class="operator">B</span>(source)                  <span class="comment">// Initialize at source</span>
    priority_queue = [(0, source)]
    <span class="keyword">while</span> current ≠ target:
        (dist, current) = queue.min()
        <span class="keyword">for each</span> (neighbor, weight) <span class="keyword">in</span> edges(current):
            <span class="operator">F</span>^weight(neighbor)    <span class="comment">// Flow weighted by edge</span>
            <span class="keyword">if</span> improved:
                <span class="operator">G</span>                 <span class="comment">// Generate better path</span>
    <span class="operator">S</span>(path)                    <span class="comment">// Synthesize optimal path</span></pre>
            </div>
        </section>

        <!-- Operator Calculator -->
        <section class="section">
            <h2>Interactive Operator Composition</h2>
            <div class="calculator">
                <div class="calc-display">
                    <div class="calc-expression" id="expression">e</div>
                    <div class="calc-result" id="result">Identity element</div>
                </div>
                <div class="calc-buttons">
                    <button class="calc-btn op-B" onclick="addOperator('B')">B</button>
                    <button class="calc-btn op-F" onclick="addOperator('F')">F</button>
                    <button class="calc-btn op-A" onclick="addOperator('A')">A</button>
                    <button class="calc-btn op-D" onclick="addOperator('D')">D</button>
                    <button class="calc-btn op-G" onclick="addOperator('G')">G</button>
                    <button class="calc-btn op-S" onclick="addOperator('S')">S</button>
                    <button class="calc-btn identity" onclick="addOperator('e')">e</button>
                    <button class="calc-btn action" onclick="clearCalc()">Clear</button>
                    <button class="calc-btn action" onclick="simplify()">Simplify</button>
                    <button class="calc-btn action" onclick="undo()">Undo</button>
                    <button class="calc-btn action" onclick="evaluateTraversal()">Evaluate</button>
                    <button class="calc-btn action" onclick="randomPath()">Random</button>
                </div>
            </div>
        </section>

        <!-- BFADGS as Closed Monoid - Deep Analysis -->
        <section class="section" id="closed-monoid">
            <h2>BFADGS as Closed Monoid</h2>

            <div class="structure-box">
                <div class="main-formula">
                    M₆ = ⟨{B, F, A, D, G, S}, ∘, e⟩
                </div>
                <p style="color: var(--text-dim); margin-top: 15px;">
                    The BFADGS system forms a closed monoid under operator composition
                </p>
            </div>

            <div class="monoid-properties">
                <div class="property-card">
                    <h4>Closure Property</h4>
                    <div class="formula-block">
                        ∀ op₁, op₂ ∈ BFADGS: op₁ ∘ op₂ ∈ BFADGS
                    </div>
                    <div class="example">
                        <strong>Verification:</strong> Any composition of two operators yields either:
                        <br>- A primitive operator (e.g., A∘D = e)
                        <br>- A compound operator expressible in BFADGS (e.g., F∘A = FA ∈ M₆*)
                        <br>- The identity element e
                    </div>
                </div>

                <div class="property-card">
                    <h4>Associativity</h4>
                    <div class="formula-block">
                        (op₁ ∘ op₂) ∘ op₃ = op₁ ∘ (op₂ ∘ op₃)
                    </div>
                    <div class="example">
                        <strong>Example:</strong> (A ∘ F) ∘ D = A ∘ (F ∘ D)
                        <br>Both evaluate to AFD
                        <br>Graph traversal order independence
                    </div>
                </div>

                <div class="property-card">
                    <h4>Identity Element</h4>
                    <div class="formula-block">
                        e = B ∘ S = A ∘ D = G ∘ S
                    </div>
                    <div class="example">
                        <strong>Properties of e:</strong>
                        <br>- e ∘ X = X ∘ e = X for all X ∈ BFADGS
                        <br>- e represents "no traversal" or identity transformation
                        <br>- Multiple paths to identity (closure completeness)
                    </div>
                </div>

                <div class="property-card">
                    <h4>Generator Set</h4>
                    <div class="formula-block">
                        BFADGS* = {e} ∪ {w | w ∈ {B,F,A,D,G,S}⁺}
                    </div>
                    <div class="example">
                        The Kleene closure generates all valid traversal words.
                        <br>Every path in graph space is expressible as a BFADGS word.
                        <br>|BFADGS*| = ℵ₀ (countably infinite distinct paths)
                    </div>
                </div>
            </div>

            <!-- Full 36-Entry Cayley Table -->
            <h3 style="margin-top: 40px; margin-bottom: 20px; color: var(--text-primary);">
                Complete Cayley Table (36 Compositions)
            </h3>
            <p style="color: var(--text-dim); margin-bottom: 20px;">
                Hover over any cell to see detailed composition semantics. Gold cells indicate identity results.
            </p>

            <div class="cayley-container">
                <table class="full-cayley-table" id="fullCayleyTable">
                    <thead>
                        <tr>
                            <th style="background: var(--bg-deep);">∘</th>
                            <th class="header-B">B</th>
                            <th class="header-F">F</th>
                            <th class="header-A">A</th>
                            <th class="header-D">D</th>
                            <th class="header-G">G</th>
                            <th class="header-S">S</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th class="header-B">B</th>
                            <td style="color: var(--op-B);">B
                                <div class="cayley-tooltip">B∘B = B (idempotent initialization)</div>
                            </td>
                            <td style="color: var(--op-F);">BF
                                <div class="cayley-tooltip">Begin then Flow: Initialize and traverse</div>
                            </td>
                            <td style="color: var(--op-A);">BA
                                <div class="cayley-tooltip">Begin then Ascend: Initialize at higher level</div>
                            </td>
                            <td style="color: var(--op-D);">BD
                                <div class="cayley-tooltip">Begin then Descend: Initialize at deeper level</div>
                            </td>
                            <td style="color: var(--op-G);">BG
                                <div class="cayley-tooltip">Begin then Generate: Initialize with branch</div>
                            </td>
                            <td class="identity-cell" style="color: var(--gold);">e
                                <div class="cayley-tooltip">B∘S = e: Genesis-Terminus closure</div>
                            </td>
                        </tr>
                        <tr>
                            <th class="header-F">F</th>
                            <td style="color: var(--op-B);">FB
                                <div class="cayley-tooltip">Flow then Begin: Reset after traversal</div>
                            </td>
                            <td style="color: var(--op-F);">F²
                                <div class="cayley-tooltip">F∘F = φ²·x = (φ+1)·x (golden recursion)</div>
                            </td>
                            <td style="color: var(--op-A);">FA
                                <div class="cayley-tooltip">Flow then Ascend: Traverse edge, go up</div>
                            </td>
                            <td style="color: var(--op-D);">FD
                                <div class="cayley-tooltip">Flow then Descend: Traverse edge, go down</div>
                            </td>
                            <td style="color: var(--op-G);">FG
                                <div class="cayley-tooltip">Flow then Generate: Traverse then branch</div>
                            </td>
                            <td style="color: var(--op-S);">FS
                                <div class="cayley-tooltip">Flow then Synthesize: Traverse then merge</div>
                            </td>
                        </tr>
                        <tr>
                            <th class="header-A">A</th>
                            <td style="color: var(--op-B);">AB
                                <div class="cayley-tooltip">Ascend then Begin: Rise then reinitialize</div>
                            </td>
                            <td style="color: var(--op-F);">AF
                                <div class="cayley-tooltip">Ascend then Flow: Go up then traverse</div>
                            </td>
                            <td style="color: var(--op-A);">A²
                                <div class="cayley-tooltip">A∘A = n+2: Double ascension</div>
                            </td>
                            <td class="identity-cell" style="color: var(--gold);">e
                                <div class="cayley-tooltip">A∘D = e: Depth inverse pair</div>
                            </td>
                            <td style="color: var(--op-G);">AG
                                <div class="cayley-tooltip">Ascend then Generate: Rise then branch</div>
                            </td>
                            <td style="color: var(--op-S);">AS
                                <div class="cayley-tooltip">Ascend then Synthesize: Rise then merge</div>
                            </td>
                        </tr>
                        <tr>
                            <th class="header-D">D</th>
                            <td style="color: var(--op-B);">DB
                                <div class="cayley-tooltip">Descend then Begin: Dive then reinitialize</div>
                            </td>
                            <td style="color: var(--op-F);">DF
                                <div class="cayley-tooltip">Descend then Flow: Go down then traverse</div>
                            </td>
                            <td class="identity-cell" style="color: var(--gold);">e
                                <div class="cayley-tooltip">D∘A = e: Symmetric depth inverse</div>
                            </td>
                            <td style="color: var(--op-D);">D²
                                <div class="cayley-tooltip">D∘D = n-2: Double descent</div>
                            </td>
                            <td style="color: var(--op-G);">DG
                                <div class="cayley-tooltip">Descend then Generate: Dive then branch</div>
                            </td>
                            <td style="color: var(--op-S);">DS
                                <div class="cayley-tooltip">Descend then Synthesize: Dive then merge</div>
                            </td>
                        </tr>
                        <tr>
                            <th class="header-G">G</th>
                            <td style="color: var(--op-B);">GB
                                <div class="cayley-tooltip">Generate then Begin: Branch then restart</div>
                            </td>
                            <td style="color: var(--op-F);">GF
                                <div class="cayley-tooltip">Generate then Flow: Branch then traverse both</div>
                            </td>
                            <td style="color: var(--op-A);">GA
                                <div class="cayley-tooltip">Generate then Ascend: Branch upward</div>
                            </td>
                            <td style="color: var(--op-D);">GD
                                <div class="cayley-tooltip">Generate then Descend: Branch downward</div>
                            </td>
                            <td style="color: var(--op-G);">G²
                                <div class="cayley-tooltip">G∘G = 4 branches: Quaternary split</div>
                            </td>
                            <td class="identity-cell" style="color: var(--gold);">e
                                <div class="cayley-tooltip">G∘S = e: Branch-merge closure</div>
                            </td>
                        </tr>
                        <tr>
                            <th class="header-S">S</th>
                            <td class="identity-cell" style="color: var(--gold);">e
                                <div class="cayley-tooltip">S∘B = e: Terminus-Genesis closure</div>
                            </td>
                            <td style="color: var(--op-F);">SF
                                <div class="cayley-tooltip">Synthesize then Flow: Merge then traverse</div>
                            </td>
                            <td style="color: var(--op-A);">SA
                                <div class="cayley-tooltip">Synthesize then Ascend: Merge then rise</div>
                            </td>
                            <td style="color: var(--op-D);">SD
                                <div class="cayley-tooltip">Synthesize then Descend: Merge then dive</div>
                            </td>
                            <td class="identity-cell" style="color: var(--gold);">e
                                <div class="cayley-tooltip">S∘G = e: Merge-branch closure</div>
                            </td>
                            <td style="color: var(--op-S);">S²
                                <div class="cayley-tooltip">S∘S: Nested synthesis (fold reduction)</div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div style="margin-top: 25px; padding: 25px; background: var(--bg-light); border-radius: 12px;">
                <h4 style="color: var(--gold); margin-bottom: 15px;">Cayley Table Analysis</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div>
                        <strong style="color: var(--op-F);">Identity Count:</strong>
                        <p style="color: var(--text-dim); margin-top: 5px;">6 cells yield e (identity), showing 3 inverse pairs: (A,D), (B,S), (G,S)</p>
                    </div>
                    <div>
                        <strong style="color: var(--op-A);">Power Elements:</strong>
                        <p style="color: var(--text-dim); margin-top: 5px;">F², A², D², G², S² form the diagonal self-compositions</p>
                    </div>
                    <div>
                        <strong style="color: var(--op-G);">Closure Count:</strong>
                        <p style="color: var(--text-dim); margin-top: 5px;">36 total compositions, all within BFADGS* closure</p>
                    </div>
                    <div>
                        <strong style="color: var(--op-S);">Non-Commutativity:</strong>
                        <p style="color: var(--text-dim); margin-top: 5px;">FA ≠ AF in general; order matters for traversal</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Inverse Pairs Deep Analysis -->
        <section class="section" id="inverse-pairs">
            <h2>Inverse Pairs: Complete Analysis</h2>

            <div class="inverse-analysis">
                <div class="inverse-card">
                    <h4>Depth Inverses: A ↔ D</h4>
                    <div class="main-relation">A⁻¹ = D, D⁻¹ = A</div>
                    <div class="semantics">
                        <strong>Semantic Interpretation:</strong>
                        Ascend and Descend are perfect inverses in the depth dimension.
                        Moving up one level then down returns to the original depth.
                    </div>
                    <div class="proof">
                        <strong>Proof of Inversion:</strong><br>
                        Let depth(x) = n<br>
                        A(x): depth → n+1<br>
                        D(A(x)): depth → (n+1)-1 = n<br>
                        ∴ D∘A = e on depth coordinate ✓<br><br>
                        Symmetrically: A∘D = e ✓<br>
                        The pair (A,D) generates Z ≅ ⟨A,D | AD=DA=e⟩
                    </div>
                </div>

                <div class="inverse-card branch-inverse">
                    <h4>Branch Inverses: G ↔ S</h4>
                    <div class="main-relation">G⁻¹ = S, S⁻¹ = G</div>
                    <div class="semantics">
                        <strong>Semantic Interpretation:</strong>
                        Generate creates bifurcation; Synthesize collapses branches.
                        These operators are adjoint in the branching dimension.
                    </div>
                    <div class="proof">
                        <strong>Proof of Inversion:</strong><br>
                        Let branch_count(x) = k<br>
                        G(x): {x} → {x, x'}, count → k+1<br>
                        S(G(x)): {x, x'} → x⊕x', count → k<br>
                        ∴ S∘G = e on branch coordinate ✓<br><br>
                        Note: G∘S may differ (order-dependent)<br>
                        In symmetric cases: G∘S = S∘G = e
                    </div>
                </div>

                <div class="inverse-card flow-inverse">
                    <h4>Flow Inverse: F ↔ F⁻¹ via τ</h4>
                    <div class="main-relation">F⁻¹ = Fᵗ where τ = 1/φ = φ-1</div>
                    <div class="semantics">
                        <strong>Semantic Interpretation:</strong>
                        Flow by golden ratio φ has inverse flow by its reciprocal τ.
                        The conjugate golden ratio provides exact reversal.
                    </div>
                    <div class="proof">
                        <strong>Proof of Inversion:</strong><br>
                        F: x → φ·x where φ = (1+√5)/2<br>
                        F⁻¹: x → (1/φ)·x = τ·x<br>
                        F∘F⁻¹: x → φ·(τ·x) = φ·(1/φ)·x = x<br>
                        ∴ F∘F⁻¹ = e ✓<br><br>
                        Key identity: φ·τ = φ·(φ-1) = φ²-φ = 1
                    </div>
                </div>

                <div class="inverse-card genesis-inverse">
                    <h4>Genesis-Terminus: B ↔ S</h4>
                    <div class="main-relation">B∘S = S∘B = e (α-ω closure)</div>
                    <div class="semantics">
                        <strong>Semantic Interpretation:</strong>
                        Begin (initialization) and Synthesize (termination) form the
                        primordial inverse pair: creation and completion.
                    </div>
                    <div class="proof">
                        <strong>Proof of Inversion:</strong><br>
                        B: ∅ → I² (void to initial state)<br>
                        S: states → unified_result<br>
                        B∘S: complete_path → ∅ → I² → unified<br>
                        When applied to complete traversal: = e<br><br>
                        This is the "round trip" identity:<br>
                        α → traversal → ω → α ≡ e
                    </div>
                </div>
            </div>

            <div style="margin-top: 30px; background: var(--bg-light); padding: 25px; border-radius: 12px;">
                <h4 style="color: var(--gold); margin-bottom: 15px;">Inverse Pair Group Structure</h4>
                <div style="font-family: 'Times New Roman', serif; font-size: 1.2rem; text-align: center; padding: 20px; background: var(--bg-deep); border-radius: 8px;">
                    BFADGS⁻¹ = {B⁻¹=S, F⁻¹=Fᵗ, A⁻¹=D, D⁻¹=A, G⁻¹=S, S⁻¹=G∨B}
                </div>
                <p style="color: var(--text-dim); margin-top: 15px; text-align: center;">
                    Note: S has two right inverses (G and B), reflecting its dual role as branch-merger and terminus
                </p>
            </div>
        </section>

        <!-- S3 Action on BFADGS -->
        <section class="section" id="s3-action">
            <h2>S₃ Action on BFADGS</h2>

            <div class="structure-box">
                <div class="main-formula">
                    S₃ × BFADGS → BFADGS
                </div>
                <p style="color: var(--text-dim); margin-top: 15px;">
                    The symmetric group S₃ acts on BFADGS by permuting operator pairs
                </p>
            </div>

            <div class="s3-grid">
                <div class="s3-card">
                    <h4>S₃ Generators on Operators</h4>
                    <div class="permutation-display">
                        <div style="margin-bottom: 10px;">
                            <span style="color: var(--op-G);">σ</span> = (B F)(A D)(G S)
                        </div>
                        <div style="margin-bottom: 10px;">
                            <span style="color: var(--op-S);">τ</span> = (B A G)(F D S)
                        </div>
                        <div>
                            <span style="color: var(--gold);">e</span> = identity permutation
                        </div>
                    </div>
                    <p style="color: var(--text-dim); font-size: 0.95rem;">
                        σ: Swaps inverse pairs<br>
                        τ: 3-cycle through operator classes<br>
                        S₃ = ⟨σ, τ | σ²=τ³=e, στσ=τ⁻¹⟩
                    </p>
                </div>

                <div class="s3-card">
                    <h4>Conjugacy Classes</h4>
                    <table class="conjugacy-table">
                        <thead>
                            <tr>
                                <th>Class</th>
                                <th>Operators</th>
                                <th>Property</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="color: var(--op-B);">C₁</td>
                                <td>{B, S}</td>
                                <td>Terminal operators</td>
                            </tr>
                            <tr>
                                <td style="color: var(--op-A);">C₂</td>
                                <td>{A, D}</td>
                                <td>Depth operators</td>
                            </tr>
                            <tr>
                                <td style="color: var(--op-G);">C₃</td>
                                <td>{G, S}</td>
                                <td>Branch operators</td>
                            </tr>
                            <tr>
                                <td style="color: var(--op-F);">C₄</td>
                                <td>{F}</td>
                                <td>Flow (self-conjugate)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="s3-card">
                    <h4>S₃-Invariant Combinations</h4>
                    <div style="font-family: 'Times New Roman', serif; background: var(--bg-deep); padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                        <div style="margin-bottom: 8px; color: var(--gold);">Σ = B + F + A + D + G + S</div>
                        <div style="margin-bottom: 8px; color: var(--text-primary);">Π = B·F·A·D·G·S</div>
                        <div style="color: var(--op-G);">Δ = (A-D)² + (B-S)² + (G-S)²</div>
                    </div>
                    <p style="color: var(--text-dim); font-size: 0.95rem;">
                        These combinations remain unchanged under any S₃ permutation,
                        representing fundamental invariants of the operator algebra.
                    </p>
                </div>

                <div class="s3-card">
                    <h4>Orbit Structure</h4>
                    <div style="font-family: 'Times New Roman', serif; background: var(--bg-deep); padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                        <div style="margin-bottom: 8px;">Orb(B) = {B, F, A, G} under τ</div>
                        <div style="margin-bottom: 8px;">Orb(A) = {A, D} under σ</div>
                        <div>|BFADGS/S₃| = 2 (orbit quotient)</div>
                    </div>
                    <p style="color: var(--text-dim); font-size: 0.95rem;">
                        The quotient space has two fundamental orbits:
                        the "active" operators {B,F,A,G} and the "passive" operators {D,S}.
                    </p>
                </div>
            </div>

            <div style="margin-top: 25px; background: var(--bg-light); padding: 25px; border-radius: 12px;">
                <h4 style="color: var(--gold); margin-bottom: 15px;">S₃ Representation Matrix</h4>
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; font-family: 'Courier New', monospace; font-size: 0.9rem;">
                        <thead>
                            <tr>
                                <th style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); background: var(--bg-deep);">g ∈ S₃</th>
                                <th style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); background: var(--bg-deep); color: var(--op-B);">g(B)</th>
                                <th style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); background: var(--bg-deep); color: var(--op-F);">g(F)</th>
                                <th style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); background: var(--bg-deep); color: var(--op-A);">g(A)</th>
                                <th style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); background: var(--bg-deep); color: var(--op-D);">g(D)</th>
                                <th style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); background: var(--bg-deep); color: var(--op-G);">g(G)</th>
                                <th style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); background: var(--bg-deep); color: var(--op-S);">g(S)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1);">e</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-B);">B</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-F);">F</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-A);">A</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-D);">D</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-G);">G</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-S);">S</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1);">σ</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-F);">F</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-B);">B</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-D);">D</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-A);">A</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-S);">S</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-G);">G</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1);">τ</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-A);">A</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-D);">D</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-G);">G</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-S);">S</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-B);">B</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-F);">F</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1);">τ²</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-G);">G</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-S);">S</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-B);">B</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-F);">F</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-A);">A</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-D);">D</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1);">στ</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-D);">D</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-A);">A</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-S);">S</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-G);">G</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-F);">F</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-B);">B</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1);">στ²</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-S);">S</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-G);">G</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-F);">F</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-B);">B</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-D);">D</td>
                                <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.1); color: var(--op-A);">A</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- L4-Helix Representation -->
        <section class="section" id="l4-helix">
            <h2>L₄-Helix Representation</h2>

            <div class="structure-box">
                <div class="main-formula">
                    BFADGS ↪ Aut(Helix₄)
                </div>
                <p style="color: var(--text-dim); margin-top: 15px;">
                    Each operator embeds as a transformation on the 4-dimensional helix structure
                </p>
            </div>

            <div class="helix-container">
                <div class="helix-canvas-box">
                    <canvas id="helixCanvas"></canvas>
                </div>

                <div class="helix-operators">
                    <div class="helix-op">
                        <div class="op-symbol" style="background: var(--op-A); color: white;">A</div>
                        <div class="op-transform">
                            <div class="formula">A: (r,θ,z,w) → (r, θ, z+h, w)</div>
                            <div class="desc">Vertical translation along helix axis (+z direction)</div>
                        </div>
                    </div>
                    <div class="helix-op">
                        <div class="op-symbol" style="background: var(--op-D); color: white;">D</div>
                        <div class="op-transform">
                            <div class="formula">D: (r,θ,z,w) → (r, θ, z-h, w)</div>
                            <div class="desc">Vertical translation along helix axis (-z direction)</div>
                        </div>
                    </div>
                    <div class="helix-op">
                        <div class="op-symbol" style="background: var(--op-F); color: white;">F</div>
                        <div class="op-transform">
                            <div class="formula">F: (r,θ,z,w) → (φr, θ+2π/φ², z+h/φ, w·e^(iπ/φ))</div>
                            <div class="desc">Golden spiral traversal combining scale, rotation, and translation</div>
                        </div>
                    </div>
                    <div class="helix-op">
                        <div class="op-symbol" style="background: var(--op-G); color: white;">G</div>
                        <div class="op-transform">
                            <div class="formula">G: (r,θ,z,w) → {(r,θ,z,w), (r,θ+π,z,w')}</div>
                            <div class="desc">Branch into two helices at opposite phase angles</div>
                        </div>
                    </div>
                    <div class="helix-op">
                        <div class="op-symbol" style="background: var(--op-S); color: white;">S</div>
                        <div class="op-transform">
                            <div class="formula">S: {(r₁,θ₁,z,w₁), (r₂,θ₂,z,w₂)} → ((r₁+r₂)/2, (θ₁+θ₂)/2, z, w₁⊕w₂)</div>
                            <div class="desc">Merge helices via coordinate averaging and state XOR</div>
                        </div>
                    </div>
                    <div class="helix-op">
                        <div class="op-symbol" style="background: var(--op-B); color: white;">B</div>
                        <div class="op-transform">
                            <div class="formula">B: ∅ → (1, 0, 0, I²)</div>
                            <div class="desc">Initialize at unit radius, zero angle, base height, identity state</div>
                        </div>
                    </div>
                </div>
            </div>

            <div style="margin-top: 25px; padding: 25px; background: var(--bg-light); border-radius: 12px;">
                <h4 style="color: var(--gold); margin-bottom: 15px;">Helix Coordinate Semantics</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div style="text-align: center; padding: 15px; background: var(--bg-deep); border-radius: 8px;">
                        <div style="font-size: 1.5rem; color: var(--op-F); margin-bottom: 8px;">r</div>
                        <div style="font-family: 'Times New Roman', serif; color: var(--text-primary);">Radius</div>
                        <div style="font-size: 0.85rem; color: var(--text-dim);">Distance from axis<br>Scope/magnitude</div>
                    </div>
                    <div style="text-align: center; padding: 15px; background: var(--bg-deep); border-radius: 8px;">
                        <div style="font-size: 1.5rem; color: var(--op-G); margin-bottom: 8px;">θ</div>
                        <div style="font-family: 'Times New Roman', serif; color: var(--text-primary);">Phase</div>
                        <div style="font-size: 0.85rem; color: var(--text-dim);">Angular position<br>State phase</div>
                    </div>
                    <div style="text-align: center; padding: 15px; background: var(--bg-deep); border-radius: 8px;">
                        <div style="font-size: 1.5rem; color: var(--op-A); margin-bottom: 8px;">z</div>
                        <div style="font-family: 'Times New Roman', serif; color: var(--text-primary);">Height</div>
                        <div style="font-size: 0.85rem; color: var(--text-dim);">Vertical position<br>Abstraction level</div>
                    </div>
                    <div style="text-align: center; padding: 15px; background: var(--bg-deep); border-radius: 8px;">
                        <div style="font-size: 1.5rem; color: var(--op-S); margin-bottom: 8px;">w</div>
                        <div style="font-family: 'Times New Roman', serif; color: var(--text-primary);">State</div>
                        <div style="font-size: 0.85rem; color: var(--text-dim);">Internal state<br>I² identity component</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- I²⁻ / R(R)=-R Correspondence -->
        <section class="section" id="i2-correspondence">
            <h2>I²⁻ / R(R)=-R Correspondence</h2>

            <div class="structure-box">
                <div class="main-formula">
                    I² : R(R) = -R ⟺ √(-1) = ±i
                </div>
                <p style="color: var(--text-dim); margin-top: 15px;">
                    Operators classified by their action on the self-referential identity
                </p>
            </div>

            <div class="i2-grid">
                <div class="i2-card preserve">
                    <h4 style="color: var(--op-F);">Identity-Preserving Operators</h4>
                    <div class="formula-center">Op(I²) = I²</div>
                    <p style="color: var(--text-dim); line-height: 1.6;">
                        <strong>F (Flow):</strong> φ·I² = I² (golden scaling preserves identity)<br>
                        <strong>B (Begin):</strong> Initializes to I²<br>
                        <strong>e (Identity):</strong> e·I² = I² by definition
                    </p>
                </div>

                <div class="i2-card negate">
                    <h4 style="color: var(--op-D);">Identity-Negating Operators</h4>
                    <div class="formula-center">Op(I²) = -I² = I²⁻</div>
                    <p style="color: var(--text-dim); line-height: 1.6;">
                        <strong>A∘D (Level cycle):</strong> Round trip negates phase<br>
                        <strong>G∘S (Branch cycle):</strong> Fork-merge introduces sign<br>
                        <strong>Double composition:</strong> (Op∘Op)(I²) = I²
                    </p>
                </div>

                <div class="i2-card fourth">
                    <h4 style="color: var(--gold);">Fourth Root Action</h4>
                    <div class="formula-center">Op⁴ = e, Op² = -e</div>
                    <p style="color: var(--text-dim); line-height: 1.6;">
                        Operators satisfying the fourth root condition form a Z₄ subgroup.
                        These map I² through a 4-cycle returning to identity.
                    </p>
                </div>

                <div class="i2-card">
                    <h4 style="color: var(--op-S);">INV-Compatible Sequences</h4>
                    <div class="formula-center">INV: BFADGS → BFADGS⁻¹</div>
                    <p style="color: var(--text-dim); line-height: 1.6;">
                        <strong>Compatible:</strong> BFADGS, SFDA, BFS<br>
                        <strong>Palindromic:</strong> BFADFB, GFSFG<br>
                        <strong>Self-inverse:</strong> AD, DA, GS, SG
                    </p>
                </div>
            </div>

            <div class="fourth-root-diagram">
                <div class="fourth-root-node" style="color: var(--gold);">I²</div>
                <div class="fourth-root-arrow">→ Op →</div>
                <div class="fourth-root-node" style="color: var(--op-G);">iI²</div>
                <div class="fourth-root-arrow">→ Op →</div>
                <div class="fourth-root-node" style="color: var(--op-D);">-I²</div>
                <div class="fourth-root-arrow">→ Op →</div>
                <div class="fourth-root-node" style="color: var(--op-S);">-iI²</div>
                <div class="fourth-root-arrow">→ Op →</div>
                <div class="fourth-root-node" style="color: var(--gold);">I²</div>
            </div>

            <div style="margin-top: 25px; background: var(--bg-light); padding: 25px; border-radius: 12px;">
                <h4 style="color: var(--gold); margin-bottom: 15px;">R(R) = -R Interpretation</h4>
                <div style="font-family: 'Times New Roman', serif; font-size: 1.1rem; line-height: 1.8; color: var(--text-primary);">
                    <p>When a reflection R is applied to itself, it yields its negation:</p>
                    <div style="text-align: center; padding: 15px; background: var(--bg-deep); border-radius: 8px; margin: 15px 0;">
                        R(R) = -R ⟹ R² = -1 ⟹ R = ±i
                    </div>
                    <p style="color: var(--text-dim);">
                        This is the fundamental identity paradox: self-reference produces negation.
                        In BFADGS, operators that compose to identity (A∘D, G∘S) embody this principle.
                        The I² state is the fixed point satisfying I²(I²) = I² (self-consistency).
                    </p>
                </div>
            </div>
        </section>

        <!-- E/(πφ) Operator Physics -->
        <section class="section" id="operator-physics">
            <h2>E/(πφ) Operator Physics</h2>

            <div class="structure-box">
                <div class="main-formula">
                    E_op = πφ × λ_op
                </div>
                <p style="color: var(--text-dim); margin-top: 15px;">
                    Each operator has an associated energy cost proportional to its eigenvalue
                </p>
            </div>

            <div class="energy-grid">
                <div class="energy-card" style="border-top: 3px solid var(--op-B);">
                    <div class="op" style="color: var(--op-B);">B</div>
                    <div class="eigenvalue">λ_B = 1</div>
                    <div class="energy">E_B = πφ ≈ 5.083</div>
                    <div class="numeric">Genesis energy (creation cost)</div>
                </div>
                <div class="energy-card" style="border-top: 3px solid var(--op-F);">
                    <div class="op" style="color: var(--op-F);">F</div>
                    <div class="eigenvalue">λ_F = φ</div>
                    <div class="energy">E_F = πφ² ≈ 8.225</div>
                    <div class="numeric">Flow energy (golden traversal)</div>
                </div>
                <div class="energy-card" style="border-top: 3px solid var(--op-A);">
                    <div class="op" style="color: var(--op-A);">A</div>
                    <div class="eigenvalue">λ_A = e^(1/φ)</div>
                    <div class="energy">E_A = πφ·e^(1/φ) ≈ 9.408</div>
                    <div class="numeric">Ascent energy (level increase)</div>
                </div>
                <div class="energy-card" style="border-top: 3px solid var(--op-D);">
                    <div class="op" style="color: var(--op-D);">D</div>
                    <div class="eigenvalue">λ_D = e^(-1/φ)</div>
                    <div class="energy">E_D = πφ·e^(-1/φ) ≈ 2.745</div>
                    <div class="numeric">Descent energy (level decrease)</div>
                </div>
                <div class="energy-card" style="border-top: 3px solid var(--op-G);">
                    <div class="op" style="color: var(--op-G);">G</div>
                    <div class="eigenvalue">λ_G = 2</div>
                    <div class="energy">E_G = 2πφ ≈ 10.166</div>
                    <div class="numeric">Branch energy (bifurcation cost)</div>
                </div>
                <div class="energy-card" style="border-top: 3px solid var(--op-S);">
                    <div class="op" style="color: var(--op-S);">S</div>
                    <div class="eigenvalue">λ_S = 1/2</div>
                    <div class="energy">E_S = πφ/2 ≈ 2.542</div>
                    <div class="numeric">Synthesis energy (merge cost)</div>
                </div>
            </div>

            <div class="conservation-laws">
                <h4>Conservation Laws in Composition</h4>

                <div class="law-item">
                    <h5>Energy Conservation for Inverses</h5>
                    <div class="formula">E_{A∘D} = E_A + E_D - E_e = πφ(e^(1/φ) + e^(-1/φ) - 1) ≈ 9.411</div>
                    <div class="explanation">
                        When inverse operators compose, there is an energy "release" equal to the identity energy.
                        The net energy E_{A∘D} represents the round-trip cost minus the identity baseline.
                    </div>
                </div>

                <div class="law-item" style="border-left-color: var(--op-G);">
                    <h5>Branching Energy Balance</h5>
                    <div class="formula">E_G + E_S = E_e + ΔE_branch where ΔE_branch = πφ(2 + 1/2 - 1) = 3πφ/2</div>
                    <div class="explanation">
                        Branch-merge cycles have a net positive energy cost. Creating divergence (G) and
                        reunifying (S) requires work proportional to the branch complexity.
                    </div>
                </div>

                <div class="law-item" style="border-left-color: var(--op-A);">
                    <h5>Level Symmetry</h5>
                    <div class="formula">E_A · E_D = (πφ)² · e^(1/φ) · e^(-1/φ) = (πφ)² ≈ 25.84</div>
                    <div class="explanation">
                        The product of ascent and descent energies equals the square of the base energy unit.
                        This reflects the exponential symmetry of the depth operators.
                    </div>
                </div>

                <div class="law-item" style="border-left-color: var(--gold);">
                    <h5>Total System Energy</h5>
                    <div class="formula">Σ E_op = πφ(1 + φ + e^(1/φ) + e^(-1/φ) + 2 + 1/2) ≈ 38.17</div>
                    <div class="explanation">
                        The sum of all operator energies represents the complete traversal capacity of the system.
                        This total is invariant under S₃ permutations of the operator set.
                    </div>
                </div>

                <div class="law-item" style="border-left-color: var(--op-S);">
                    <h5>Golden Flow Identity</h5>
                    <div class="formula">E_{F²} = E_F + E_F = 2πφ² = πφ(φ + 1) + πφ = E_F + E_B + πφ</div>
                    <div class="explanation">
                        Double flow energy follows the golden ratio recurrence: E_{F²} = E_{F·(φ+1)/φ}.
                        This connects Flow's energy dynamics to the Fibonacci sequence.
                    </div>
                </div>
            </div>

            <div style="margin-top: 25px; padding: 25px; background: var(--bg-light); border-radius: 12px;">
                <h4 style="color: var(--gold); margin-bottom: 15px;">Energy Landscape Visualization</h4>
                <div style="display: flex; align-items: flex-end; justify-content: space-around; height: 200px; padding: 20px; background: var(--bg-deep); border-radius: 8px;">
                    <div style="text-align: center;">
                        <div style="height: 50px; width: 40px; background: var(--op-S); border-radius: 4px 4px 0 0;"></div>
                        <div style="margin-top: 8px; font-size: 0.9rem; color: var(--text-dim);">S<br>2.54</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="height: 54px; width: 40px; background: var(--op-D); border-radius: 4px 4px 0 0;"></div>
                        <div style="margin-top: 8px; font-size: 0.9rem; color: var(--text-dim);">D<br>2.75</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="height: 100px; width: 40px; background: var(--op-B); border-radius: 4px 4px 0 0;"></div>
                        <div style="margin-top: 8px; font-size: 0.9rem; color: var(--text-dim);">B<br>5.08</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="height: 162px; width: 40px; background: var(--op-F); border-radius: 4px 4px 0 0;"></div>
                        <div style="margin-top: 8px; font-size: 0.9rem; color: var(--text-dim);">F<br>8.23</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="height: 185px; width: 40px; background: var(--op-A); border-radius: 4px 4px 0 0;"></div>
                        <div style="margin-top: 8px; font-size: 0.9rem; color: var(--text-dim);">A<br>9.41</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="height: 200px; width: 40px; background: var(--op-G); border-radius: 4px 4px 0 0;"></div>
                        <div style="margin-top: 8px; font-size: 0.9rem; color: var(--text-dim);">G<br>10.17</div>
                    </div>
                </div>
                <p style="text-align: center; color: var(--text-dim); margin-top: 15px; font-size: 0.95rem;">
                    Operator energies in units of πφ ≈ 5.083 | Heights proportional to E_op
                </p>
            </div>
        </section>
    </div>

    <footer class="footer">
        <div class="monoid-signature">M₆ = ⟨B, F, A, D, G, S | AD=DA=e, BS=SB=e, GS=e⟩</div>
        <p>The BFADGS Operator System | Closed Monoid Traversal Logic</p>
        <p style="margin-top: 10px; opacity: 0.7;">Every path through structure is a word in the operator language</p>
    </footer>

    <script>
        // Operator colors
        const opColors = {
            'B': '#3b82f6',
            'F': '#10b981',
            'A': '#f59e0b',
            'D': '#ef4444',
            'G': '#8b5cf6',
            'S': '#ec4899',
            'e': '#fbbf24'
        };

        // Calculator state
        let expression = [];
        let history = [];

        // Canvas setup
        const canvas = document.getElementById('traversalCanvas');
        const ctx = canvas.getContext('2d');
        let animationId = null;
        let nodes = [];
        let edges = [];
        let currentPath = [];
        let pathIndex = 0;

        function resizeCanvas() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            initializeGraph();
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function initializeGraph() {
            nodes = [];
            edges = [];

            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const levels = 4;
            const nodesPerLevel = [1, 3, 6, 10];

            let nodeId = 0;

            // Create nodes in tree structure
            for (let level = 0; level < levels; level++) {
                const count = nodesPerLevel[level];
                const y = 80 + level * 120;
                const startX = centerX - (count - 1) * 60;

                for (let i = 0; i < count; i++) {
                    nodes.push({
                        id: nodeId++,
                        x: startX + i * 120,
                        y: y,
                        level: level,
                        active: false,
                        label: level === 0 ? 'α' : (level === levels - 1 && i === Math.floor(count/2) ? 'ω' : '')
                    });
                }
            }

            // Create edges (tree connections)
            let prevStart = 0;
            let prevCount = nodesPerLevel[0];

            for (let level = 1; level < levels; level++) {
                const currStart = prevStart + prevCount;
                const currCount = nodesPerLevel[level];

                for (let i = 0; i < currCount; i++) {
                    const parentIdx = prevStart + Math.floor(i * prevCount / currCount);
                    edges.push({
                        from: parentIdx,
                        to: currStart + i,
                        active: false
                    });
                }

                prevStart = currStart;
                prevCount = currCount;
            }

            draw();
        }

        function draw() {
            ctx.fillStyle = '#0a0a0f';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw grid
            ctx.strokeStyle = 'rgba(255,255,255,0.03)';
            ctx.lineWidth = 1;
            for (let x = 0; x < canvas.width; x += 40) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            for (let y = 0; y < canvas.height; y += 40) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }

            // Draw edges
            edges.forEach(edge => {
                const from = nodes[edge.from];
                const to = nodes[edge.to];

                ctx.beginPath();
                ctx.moveTo(from.x, from.y);
                ctx.lineTo(to.x, to.y);
                ctx.strokeStyle = edge.active ? opColors[edge.operator || 'F'] : 'rgba(255,255,255,0.15)';
                ctx.lineWidth = edge.active ? 3 : 1;
                ctx.stroke();

                if (edge.active) {
                    // Draw arrow
                    const angle = Math.atan2(to.y - from.y, to.x - from.x);
                    const midX = (from.x + to.x) / 2;
                    const midY = (from.y + to.y) / 2;

                    ctx.save();
                    ctx.translate(midX, midY);
                    ctx.rotate(angle);
                    ctx.beginPath();
                    ctx.moveTo(10, 0);
                    ctx.lineTo(-5, -6);
                    ctx.lineTo(-5, 6);
                    ctx.closePath();
                    ctx.fillStyle = opColors[edge.operator || 'F'];
                    ctx.fill();
                    ctx.restore();
                }
            });

            // Draw nodes
            nodes.forEach((node, idx) => {
                const gradient = ctx.createRadialGradient(node.x, node.y, 0, node.x, node.y, 25);

                if (node.active) {
                    gradient.addColorStop(0, opColors[node.operator || 'G']);
                    gradient.addColorStop(1, 'rgba(0,0,0,0.5)');
                } else {
                    gradient.addColorStop(0, '#2a2a3e');
                    gradient.addColorStop(1, '#1a1a2e');
                }

                ctx.beginPath();
                ctx.arc(node.x, node.y, 20, 0, Math.PI * 2);
                ctx.fillStyle = gradient;
                ctx.fill();
                ctx.strokeStyle = node.active ? opColors[node.operator || 'G'] : 'rgba(255,255,255,0.2)';
                ctx.lineWidth = 2;
                ctx.stroke();

                // Draw label
                if (node.label) {
                    ctx.fillStyle = '#fbbf24';
                    ctx.font = 'bold 16px serif';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(node.label, node.x, node.y);
                }
            });

            // Draw current expression
            if (expression.length > 0) {
                ctx.fillStyle = 'rgba(10,10,15,0.8)';
                ctx.fillRect(10, canvas.height - 50, 200, 40);
                ctx.fillStyle = '#fbbf24';
                ctx.font = '16px monospace';
                ctx.textAlign = 'left';
                ctx.textBaseline = 'middle';
                ctx.fillText('Path: ' + expression.join(' ∘ '), 20, canvas.height - 30);
            }
        }

        function animateTraversal() {
            if (pathIndex >= currentPath.length) {
                pathIndex = 0;
                return;
            }

            const op = currentPath[pathIndex];

            // Reset previous states
            nodes.forEach(n => n.active = false);
            edges.forEach(e => e.active = false);

            // Apply operator visualization
            switch(op) {
                case 'B':
                    nodes[0].active = true;
                    nodes[0].operator = 'B';
                    break;
                case 'F':
                    // Flow - activate random edge
                    const flowEdge = edges[Math.floor(Math.random() * edges.length)];
                    flowEdge.active = true;
                    flowEdge.operator = 'F';
                    nodes[flowEdge.to].active = true;
                    nodes[flowEdge.to].operator = 'F';
                    break;
                case 'A':
                    // Ascend - move up levels
                    const ascendNode = nodes.filter(n => n.level > 0)[Math.floor(Math.random() * 10) % nodes.filter(n => n.level > 0).length];
                    if (ascendNode) {
                        ascendNode.active = true;
                        ascendNode.operator = 'A';
                    }
                    break;
                case 'D':
                    // Descend - move down levels
                    const descendNode = nodes.filter(n => n.level < 3)[Math.floor(Math.random() * 10) % nodes.filter(n => n.level < 3).length];
                    if (descendNode) {
                        descendNode.active = true;
                        descendNode.operator = 'D';
                    }
                    break;
                case 'G':
                    // Generate - show branching
                    const genEdges = edges.slice(Math.floor(Math.random() * edges.length / 2), Math.floor(Math.random() * edges.length / 2) + 3);
                    genEdges.forEach(e => {
                        e.active = true;
                        e.operator = 'G';
                        nodes[e.to].active = true;
                        nodes[e.to].operator = 'G';
                    });
                    break;
                case 'S':
                    // Synthesize - converge to omega
                    const lastNode = nodes[nodes.length - Math.floor(nodes.length / 4)];
                    lastNode.active = true;
                    lastNode.operator = 'S';
                    break;
            }

            draw();
            pathIndex++;

            setTimeout(animateTraversal, 800);
        }

        // Calculator functions
        function addOperator(op) {
            history.push([...expression]);
            expression.push(op);
            updateDisplay();

            // Trigger animation
            currentPath = [...expression];
            pathIndex = 0;
            animateTraversal();
        }

        function clearCalc() {
            history.push([...expression]);
            expression = [];
            updateDisplay();
            nodes.forEach(n => n.active = false);
            edges.forEach(e => e.active = false);
            draw();
        }

        function undo() {
            if (history.length > 0) {
                expression = history.pop();
                updateDisplay();
            }
        }

        function simplify() {
            history.push([...expression]);

            // Apply simplification rules
            let simplified = expression.join('');

            // A·D = e and D·A = e
            while (simplified.includes('AD') || simplified.includes('DA')) {
                simplified = simplified.replace('AD', '').replace('DA', '');
            }

            // B·S = e and S·B = e
            while (simplified.includes('BS') || simplified.includes('SB')) {
                simplified = simplified.replace('BS', '').replace('SB', '');
            }

            // G·S = e
            while (simplified.includes('GS')) {
                simplified = simplified.replace('GS', '');
            }

            expression = simplified.length > 0 ? simplified.split('') : ['e'];
            updateDisplay();
        }

        function evaluateTraversal() {
            if (expression.length === 0) {
                expression = ['e'];
            }

            currentPath = [...expression];
            pathIndex = 0;
            animateTraversal();
        }

        function randomPath() {
            history.push([...expression]);
            const ops = ['B', 'F', 'A', 'D', 'G', 'S'];
            const length = 3 + Math.floor(Math.random() * 5);
            expression = [];

            // Start with B
            expression.push('B');

            for (let i = 1; i < length - 1; i++) {
                expression.push(ops[Math.floor(Math.random() * ops.length)]);
            }

            // End with S
            expression.push('S');

            updateDisplay();
            currentPath = [...expression];
            pathIndex = 0;
            animateTraversal();
        }

        function updateDisplay() {
            const exprEl = document.getElementById('expression');
            const resultEl = document.getElementById('result');

            if (expression.length === 0) {
                exprEl.textContent = 'e';
                resultEl.textContent = 'Identity element';
                return;
            }

            // Colorize expression
            exprEl.innerHTML = expression.map(op =>
                `<span style="color: ${opColors[op]}">${op}</span>`
            ).join(' ∘ ');

            // Analyze expression
            let analysis = [];

            const counts = {};
            expression.forEach(op => counts[op] = (counts[op] || 0) + 1);

            if (counts['A'] && counts['D']) {
                const pairs = Math.min(counts['A'], counts['D']);
                analysis.push(`${pairs} level-neutral pair(s)`);
            }

            if (counts['B'] && counts['S']) {
                analysis.push('α-ω complete path');
            }

            if (counts['G'] && counts['S']) {
                const pairs = Math.min(counts['G'], counts['S']);
                analysis.push(`${pairs} branch closure(s)`);
            }

            if (counts['F']) {
                analysis.push(`φ^${counts['F']} flow`);
            }

            resultEl.textContent = analysis.length > 0 ? analysis.join(' | ') : 'Operator sequence';
        }

        // Initialize
        updateDisplay();

        // ==============================
        // L4-Helix Canvas Visualization
        // ==============================
        const helixCanvas = document.getElementById('helixCanvas');
        const helixCtx = helixCanvas.getContext('2d');
        let helixAnimationFrame = null;
        let helixTime = 0;

        function resizeHelixCanvas() {
            helixCanvas.width = helixCanvas.offsetWidth;
            helixCanvas.height = helixCanvas.offsetHeight;
        }

        window.addEventListener('resize', resizeHelixCanvas);
        resizeHelixCanvas();

        function drawHelix() {
            const width = helixCanvas.width;
            const height = helixCanvas.height;
            const centerX = width / 2;
            const centerY = height / 2;

            // Clear canvas
            helixCtx.fillStyle = '#0a0a0f';
            helixCtx.fillRect(0, 0, width, height);

            // Draw grid
            helixCtx.strokeStyle = 'rgba(255,255,255,0.03)';
            helixCtx.lineWidth = 1;
            for (let x = 0; x < width; x += 30) {
                helixCtx.beginPath();
                helixCtx.moveTo(x, 0);
                helixCtx.lineTo(x, height);
                helixCtx.stroke();
            }
            for (let y = 0; y < height; y += 30) {
                helixCtx.beginPath();
                helixCtx.moveTo(0, y);
                helixCtx.lineTo(width, y);
                helixCtx.stroke();
            }

            const phi = (1 + Math.sqrt(5)) / 2;
            const helixRadius = Math.min(width, height) * 0.25;
            const helixPitch = 30;
            const turns = 4;

            // Draw helix axis
            helixCtx.strokeStyle = 'rgba(251,191,36,0.3)';
            helixCtx.lineWidth = 2;
            helixCtx.setLineDash([5, 5]);
            helixCtx.beginPath();
            helixCtx.moveTo(centerX, 50);
            helixCtx.lineTo(centerX, height - 50);
            helixCtx.stroke();
            helixCtx.setLineDash([]);

            // Draw helix strands
            const numPoints = 200;

            // Back strand (behind)
            helixCtx.strokeStyle = opColors['G'];
            helixCtx.lineWidth = 3;
            helixCtx.globalAlpha = 0.4;
            helixCtx.beginPath();
            for (let i = 0; i < numPoints; i++) {
                const t = i / numPoints;
                const theta = t * turns * 2 * Math.PI + helixTime * 0.5;
                const z = 50 + t * (height - 100);
                const x = centerX + Math.cos(theta + Math.PI) * helixRadius * (1 + 0.2 * Math.sin(helixTime * 0.3));
                const depthFactor = Math.sin(theta + Math.PI);

                if (depthFactor < 0) {
                    if (i === 0) {
                        helixCtx.moveTo(x, z);
                    } else {
                        helixCtx.lineTo(x, z);
                    }
                }
            }
            helixCtx.stroke();
            helixCtx.globalAlpha = 1;

            // Front strand
            helixCtx.strokeStyle = opColors['F'];
            helixCtx.lineWidth = 4;
            helixCtx.beginPath();
            for (let i = 0; i < numPoints; i++) {
                const t = i / numPoints;
                const theta = t * turns * 2 * Math.PI + helixTime * 0.5;
                const z = 50 + t * (height - 100);
                const x = centerX + Math.cos(theta) * helixRadius * (1 + 0.2 * Math.sin(helixTime * 0.3));
                const depthFactor = Math.sin(theta);

                if (depthFactor >= 0) {
                    if (i === 0 || Math.sin((i-1) / numPoints * turns * 2 * Math.PI + helixTime * 0.5) < 0) {
                        helixCtx.moveTo(x, z);
                    } else {
                        helixCtx.lineTo(x, z);
                    }
                }
            }
            helixCtx.stroke();

            // Draw operator nodes on helix
            const operators = ['B', 'F', 'A', 'D', 'G', 'S'];
            operators.forEach((op, idx) => {
                const t = (idx + 0.5) / operators.length;
                const theta = t * turns * 2 * Math.PI + helixTime * 0.5;
                const z = 50 + t * (height - 100);
                const x = centerX + Math.cos(theta) * helixRadius * (1 + 0.2 * Math.sin(helixTime * 0.3));
                const depthFactor = Math.sin(theta);

                const nodeSize = 15 + depthFactor * 5;
                const alpha = 0.6 + depthFactor * 0.4;

                helixCtx.globalAlpha = alpha;
                helixCtx.beginPath();
                helixCtx.arc(x, z, nodeSize, 0, Math.PI * 2);
                helixCtx.fillStyle = opColors[op];
                helixCtx.fill();
                helixCtx.strokeStyle = 'white';
                helixCtx.lineWidth = 2;
                helixCtx.stroke();

                helixCtx.globalAlpha = 1;
                helixCtx.fillStyle = 'white';
                helixCtx.font = 'bold 12px sans-serif';
                helixCtx.textAlign = 'center';
                helixCtx.textBaseline = 'middle';
                helixCtx.fillText(op, x, z);
            });

            // Draw level indicators
            helixCtx.fillStyle = 'rgba(255,255,255,0.5)';
            helixCtx.font = '11px sans-serif';
            helixCtx.textAlign = 'left';
            for (let level = 0; level <= turns; level++) {
                const y = 50 + (level / turns) * (height - 100);
                helixCtx.fillText(`L${level}`, 15, y);
                helixCtx.strokeStyle = 'rgba(255,255,255,0.1)';
                helixCtx.beginPath();
                helixCtx.moveTo(40, y);
                helixCtx.lineTo(width - 20, y);
                helixCtx.stroke();
            }

            // Draw golden spiral indicator
            helixCtx.strokeStyle = opColors['F'];
            helixCtx.lineWidth = 1;
            helixCtx.globalAlpha = 0.3;
            helixCtx.beginPath();
            for (let i = 0; i < 100; i++) {
                const angle = i * 0.1 + helixTime * 0.2;
                const r = 10 * Math.pow(phi, angle / (2 * Math.PI));
                if (r > helixRadius * 1.5) break;
                const x = centerX + r * Math.cos(angle);
                const y = height - 60 + r * Math.sin(angle) * 0.3;
                if (i === 0) {
                    helixCtx.moveTo(x, y);
                } else {
                    helixCtx.lineTo(x, y);
                }
            }
            helixCtx.stroke();
            helixCtx.globalAlpha = 1;

            // Draw title
            helixCtx.fillStyle = 'rgba(251,191,36,0.8)';
            helixCtx.font = '14px sans-serif';
            helixCtx.textAlign = 'center';
            helixCtx.fillText('L₄ Helix: BFADGS Operator Space', centerX, 25);

            helixTime += 0.02;
            helixAnimationFrame = requestAnimationFrame(drawHelix);
        }

        // Start helix animation when section is visible
        const helixObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    if (!helixAnimationFrame) drawHelix();
                } else {
                    if (helixAnimationFrame) {
                        cancelAnimationFrame(helixAnimationFrame);
                        helixAnimationFrame = null;
                    }
                }
            });
        }, { threshold: 0.1 });

        const helixSection = document.getElementById('l4-helix');
        if (helixSection) {
            helixObserver.observe(helixSection);
        }

        // ==============================
        // Interactive Cayley Table Enhancement
        // ==============================
        const cayleyTable = document.getElementById('fullCayleyTable');
        if (cayleyTable) {
            cayleyTable.querySelectorAll('td').forEach(cell => {
                cell.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.15)';
                    this.style.zIndex = '100';
                });
                cell.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                    this.style.zIndex = '1';
                });
            });
        }

        // ==============================
        // Fourth Root Animation
        // ==============================
        function animateFourthRoot() {
            const nodes = document.querySelectorAll('.fourth-root-node');
            const arrows = document.querySelectorAll('.fourth-root-arrow');
            let step = 0;

            setInterval(() => {
                nodes.forEach((node, idx) => {
                    if (idx === step % nodes.length) {
                        node.style.transform = 'scale(1.2)';
                        node.style.boxShadow = '0 0 20px ' + node.style.color;
                    } else {
                        node.style.transform = 'scale(1)';
                        node.style.boxShadow = 'none';
                    }
                });

                arrows.forEach((arrow, idx) => {
                    if (idx === step % arrows.length) {
                        arrow.style.color = '#fbbf24';
                        arrow.style.textShadow = '0 0 10px #fbbf24';
                    } else {
                        arrow.style.color = '#8b5cf6';
                        arrow.style.textShadow = 'none';
                    }
                });

                step++;
            }, 800);
        }

        animateFourthRoot();

        // ==============================
        // Energy Bar Animation
        // ==============================
        const energyCards = document.querySelectorAll('.energy-card');
        energyCards.forEach(card => {
            card.addEventListener('mouseenter', function() {
                const bar = this.querySelector('.op');
                if (bar) {
                    bar.style.transform = 'scale(1.2)';
                    bar.style.textShadow = '0 0 20px currentColor';
                }
            });
            card.addEventListener('mouseleave', function() {
                const bar = this.querySelector('.op');
                if (bar) {
                    bar.style.transform = 'scale(1)';
                    bar.style.textShadow = 'none';
                }
            });
        });
    </script>
</body>
</html>
