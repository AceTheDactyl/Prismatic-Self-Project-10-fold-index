<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trifurcation Decision | S3? Diamond Node | I2 S3 Decision Tree</title>
  <meta name="description" content="The S3? Trifurcation Decision: Where the path splits three ways to S3 attractor. Complete S3 Group Theory, Cayley Table, Three Projection Paths, and Interactive Decision Simulator.">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* =====================================================================
       TRIFURCATION DECISION: S3? DIAMOND NODE - EXPANDED EDITION
       Gold Primary (#ffd700) with tri-path accents
       ===================================================================== */
    :root {
      --gold-primary: #ffd700;
      --gold-secondary: #f4c430;
      --gold-tertiary: #c9a227;
      --gold-glow: rgba(255, 215, 0, 0.4);
      --gold-subtle: rgba(255, 215, 0, 0.15);
      --path-f24: #00ff88;
      --path-f24-glow: rgba(0, 255, 136, 0.4);
      --path-hex: #ff9f43;
      --path-hex-glow: rgba(255, 159, 67, 0.4);
      --path-r10: #ff6b9d;
      --path-r10-glow: rgba(255, 107, 157, 0.4);
      --path-lomi: #00ff88;
      --path-tdl: #ff9f43;
      --path-closure: #ff6b9d;
      --s3-vertex-1: #ff6b6b;
      --s3-vertex-2: #4ecdc4;
      --s3-vertex-3: #a855f7;
      --phi: 1.6180339887;
      --phi-inv: 0.6180339887;
      --bg-primary: #0a0a0f;
      --bg-secondary: #12121a;
      --bg-tertiary: #1a1a2e;
      --bg-card: #16162a;
      --text-primary: #f0f0f5;
      --text-secondary: #909098;
      --text-accent: #ffd700;
      --border-subtle: rgba(255, 215, 0, 0.15);
      --border-active: rgba(255, 215, 0, 0.5);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }

    body {
      font-family: 'JetBrains Mono', monospace;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      overflow-x: hidden;
      line-height: 1.7;
    }

    /* ANIMATED BACKGROUND */
    .trifurc-field {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      background:
        radial-gradient(ellipse at 50% 20%, var(--gold-subtle) 0%, transparent 40%),
        radial-gradient(ellipse at 15% 70%, rgba(0, 255, 136, 0.06) 0%, transparent 35%),
        radial-gradient(ellipse at 50% 85%, rgba(255, 159, 67, 0.06) 0%, transparent 35%),
        radial-gradient(ellipse at 85% 70%, rgba(255, 107, 157, 0.06) 0%, transparent 35%);
      animation: field-pulse 8s ease-in-out infinite alternate;
    }

    @keyframes field-pulse {
      0% { opacity: 0.6; }
      100% { opacity: 1; }
    }

    .trifurc-field::before,
    .trifurc-field::after {
      content: '';
      position: absolute;
      width: 2px;
      height: 200px;
      top: 30%;
      background: linear-gradient(to bottom, var(--gold-primary), transparent);
      opacity: 0.3;
      animation: path-flow 4s ease-in-out infinite;
    }

    .trifurc-field::before { left: 25%; transform: rotate(-30deg); }
    .trifurc-field::after { right: 25%; transform: rotate(30deg); animation-delay: 1.3s; }

    @keyframes path-flow {
      0%, 100% { opacity: 0.2; height: 150px; }
      50% { opacity: 0.5; height: 250px; }
    }

    /* NAVIGATION */
    .nav-bar {
      position: sticky;
      top: 0;
      z-index: 100;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 0.5rem;
      padding: 0.75rem 1rem;
      background: rgba(10, 10, 15, 0.95);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border-subtle);
    }

    .nav-link {
      font-size: 0.7rem;
      padding: 0.4rem 0.8rem;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-subtle);
      border-radius: 0.4rem;
      color: var(--text-secondary);
      text-decoration: none;
      transition: all 0.3s ease;
    }

    .nav-link:hover {
      border-color: var(--gold-primary);
      color: var(--gold-primary);
      box-shadow: 0 0 10px var(--gold-glow);
    }

    .nav-link.active {
      border-color: var(--gold-primary);
      color: var(--gold-primary);
      background: var(--gold-subtle);
    }

    .nav-link.path-f24:hover { border-color: var(--path-f24); color: var(--path-f24); }
    .nav-link.path-hex:hover { border-color: var(--path-hex); color: var(--path-hex); }
    .nav-link.path-r10:hover { border-color: var(--path-r10); color: var(--path-r10); }

    /* HEADER */
    .header {
      position: relative;
      z-index: 10;
      padding: 3rem 2rem;
      text-align: center;
      background: linear-gradient(180deg, var(--bg-secondary) 0%, transparent 100%);
      border-bottom: 1px solid var(--border-subtle);
    }

    .node-badge {
      display: inline-block;
      font-size: 0.7rem;
      letter-spacing: 0.2em;
      color: var(--gold-primary);
      background: var(--gold-subtle);
      border: 1px solid var(--gold-primary);
      padding: 0.4rem 1.2rem;
      border-radius: 2rem;
      margin-bottom: 1.5rem;
    }

    .diamond-container {
      position: relative;
      width: 180px;
      height: 180px;
      margin: 0 auto 2rem;
    }

    .diamond-outer {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 120px;
      height: 120px;
      border: 3px solid var(--gold-primary);
      transform: translate(-50%, -50%) rotate(45deg);
      animation: diamond-pulse 3s ease-in-out infinite;
      box-shadow: 0 0 40px var(--gold-glow);
    }

    .diamond-inner {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 80px;
      height: 80px;
      border: 2px solid var(--gold-secondary);
      transform: translate(-50%, -50%) rotate(45deg);
      animation: diamond-pulse 3s ease-in-out infinite reverse;
      background: rgba(255, 215, 0, 0.1);
    }

    .diamond-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 2rem;
      font-weight: 700;
      color: var(--gold-primary);
      text-shadow: 0 0 20px var(--gold-glow);
      animation: text-glow 2s ease-in-out infinite;
    }

    @keyframes diamond-pulse {
      0%, 100% { box-shadow: 0 0 30px var(--gold-glow); transform: translate(-50%, -50%) rotate(45deg) scale(1); }
      50% { box-shadow: 0 0 60px var(--gold-glow); transform: translate(-50%, -50%) rotate(45deg) scale(1.05); }
    }

    @keyframes text-glow {
      0%, 100% { text-shadow: 0 0 20px var(--gold-glow); }
      50% { text-shadow: 0 0 40px var(--gold-glow), 0 0 60px var(--gold-primary); }
    }

    .path-indicator {
      position: absolute;
      width: 3px;
      height: 40px;
      border-radius: 2px;
    }

    .path-indicator.f24 {
      top: -50px; left: 50%;
      transform: translateX(-50%) rotate(-45deg);
      background: linear-gradient(to top, var(--path-f24), transparent);
      animation: path-glow-f24 2s ease-in-out infinite;
    }

    .path-indicator.hex {
      bottom: -50px; left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(to bottom, var(--path-hex), transparent);
      animation: path-glow-hex 2s ease-in-out infinite 0.66s;
    }

    .path-indicator.r10 {
      top: -50px; right: -20px;
      transform: rotate(45deg);
      background: linear-gradient(to top, var(--path-r10), transparent);
      animation: path-glow-r10 2s ease-in-out infinite 1.33s;
    }

    @keyframes path-glow-f24 { 0%, 100% { opacity: 0.5; height: 40px; } 50% { opacity: 1; height: 60px; box-shadow: 0 0 15px var(--path-f24-glow); } }
    @keyframes path-glow-hex { 0%, 100% { opacity: 0.5; height: 40px; } 50% { opacity: 1; height: 60px; box-shadow: 0 0 15px var(--path-hex-glow); } }
    @keyframes path-glow-r10 { 0%, 100% { opacity: 0.5; height: 40px; } 50% { opacity: 1; height: 60px; box-shadow: 0 0 15px var(--path-r10-glow); } }

    .title {
      font-size: 2.2rem;
      font-weight: 300;
      letter-spacing: 0.08em;
      margin-bottom: 0.75rem;
      background: linear-gradient(135deg, var(--gold-primary), var(--gold-secondary), #fff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      font-size: 1rem;
      color: var(--text-secondary);
      max-width: 700px;
      margin: 0 auto 1.5rem;
    }

    .core-equation {
      font-size: 1.1rem;
      color: var(--gold-primary);
      background: var(--bg-secondary);
      padding: 1rem 2rem;
      border-radius: 0.75rem;
      display: inline-block;
      border: 2px solid var(--gold-primary);
      box-shadow: 0 0 25px var(--gold-glow);
    }

    /* MAIN CONTENT */
    .main-content {
      position: relative;
      z-index: 10;
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }

    .section { margin-bottom: 3rem; }

    .section-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1.5rem;
      padding-bottom: 0.75rem;
      border-bottom: 1px solid var(--border-subtle);
    }

    .section-glyph {
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      border-radius: 0.5rem;
      background: var(--gold-subtle);
      border: 1px solid var(--gold-primary);
      color: var(--gold-primary);
    }

    .section h2 {
      font-size: 1.2rem;
      font-weight: 500;
      color: var(--gold-primary);
      letter-spacing: 0.05em;
    }

    .section h3 {
      font-size: 1rem;
      color: var(--gold-secondary);
      margin: 1.5rem 0 1rem;
    }

    .section p {
      color: var(--text-secondary);
      margin-bottom: 1rem;
      line-height: 1.8;
    }

    .card {
      background: var(--bg-secondary);
      border: 1px solid var(--border-subtle);
      border-radius: 0.75rem;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      transition: all 0.3s ease;
    }

    .card:hover {
      border-color: var(--gold-primary);
      box-shadow: 0 0 20px rgba(255, 215, 0, 0.1);
    }

    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
    }

    .equation-box {
      background: var(--bg-tertiary);
      border-left: 3px solid var(--gold-primary);
      padding: 1.25rem;
      margin: 1rem 0;
      border-radius: 0 0.5rem 0.5rem 0;
    }

    .equation-box.f24, .equation-box.lomi { border-left-color: var(--path-f24); }
    .equation-box.hex, .equation-box.tdl { border-left-color: var(--path-hex); }
    .equation-box.r10, .equation-box.closure { border-left-color: var(--path-r10); }

    .equation-main {
      font-size: 1.1rem;
      color: var(--text-primary);
      margin-bottom: 0.5rem;
    }

    .equation-sub {
      font-size: 0.8rem;
      color: var(--text-secondary);
    }

    /* TABLES */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 1rem 0;
      font-size: 0.85rem;
    }

    th, td {
      padding: 0.75rem;
      text-align: center;
      border: 1px solid var(--border-subtle);
    }

    th {
      background: var(--bg-tertiary);
      color: var(--gold-primary);
      font-weight: 500;
    }

    td { background: var(--bg-secondary); }
    tr:hover td { background: rgba(255, 215, 0, 0.05); }

    /* CAYLEY TABLE SPECIFIC */
    .cayley-container {
      overflow-x: auto;
      margin: 1.5rem 0;
    }

    .cayley-table {
      min-width: 500px;
    }

    .cayley-table th, .cayley-table td {
      width: 70px;
      height: 50px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .cayley-table td:hover {
      background: var(--gold-subtle) !important;
      transform: scale(1.05);
    }

    .cayley-table td.highlight {
      background: var(--gold-primary) !important;
      color: var(--bg-primary) !important;
      font-weight: 700;
    }

    .cayley-table th.row-header { background: rgba(0, 255, 136, 0.2); color: var(--path-f24); }
    .cayley-table th.col-header { background: rgba(255, 159, 67, 0.2); color: var(--path-hex); }
    .cayley-table th.corner { background: var(--bg-tertiary); }

    .element-identity { color: var(--gold-primary); font-weight: 700; }
    .element-trans { color: var(--path-hex); }
    .element-cycle { color: var(--path-r10); }

    /* PERMUTATION VISUALIZATION */
    .perm-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
      margin: 1.5rem 0;
    }

    .perm-card {
      background: var(--bg-tertiary);
      border: 2px solid var(--border-subtle);
      border-radius: 0.75rem;
      padding: 1rem;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .perm-card:hover {
      border-color: var(--gold-primary);
      transform: translateY(-3px);
      box-shadow: 0 5px 20px rgba(255, 215, 0, 0.2);
    }

    .perm-card.selected {
      border-color: var(--gold-primary);
      background: var(--gold-subtle);
    }

    .perm-symbol {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .perm-card.identity .perm-symbol { color: var(--gold-primary); }
    .perm-card.transposition .perm-symbol { color: var(--path-hex); }
    .perm-card.cycle .perm-symbol { color: var(--path-r10); }

    .perm-mapping {
      font-size: 0.8rem;
      color: var(--text-secondary);
      margin-bottom: 0.25rem;
    }

    .perm-order {
      font-size: 0.75rem;
      color: var(--text-secondary);
      opacity: 0.7;
    }

    /* TRIANGLE VISUALIZATION */
    .triangle-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 2rem;
      flex-wrap: wrap;
      margin: 2rem 0;
    }

    .triangle-viz {
      position: relative;
      width: 200px;
      height: 180px;
    }

    .triangle-svg {
      width: 100%;
      height: 100%;
    }

    .triangle-label {
      text-align: center;
      margin-top: 0.5rem;
      color: var(--text-secondary);
      font-size: 0.85rem;
    }

    /* PROJECTION PATHS */
    .projection-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
      margin: 2rem 0;
    }

    @media (max-width: 900px) {
      .projection-container { grid-template-columns: 1fr; }
    }

    .projection-card {
      background: var(--bg-secondary);
      border: 2px solid var(--border-subtle);
      border-radius: 1rem;
      padding: 1.5rem;
      transition: all 0.3s ease;
    }

    .projection-card:hover {
      transform: translateY(-5px);
    }

    .projection-card.lomi {
      border-color: var(--path-lomi);
    }
    .projection-card.lomi:hover {
      box-shadow: 0 0 30px rgba(0, 255, 136, 0.3);
    }

    .projection-card.tdl {
      border-color: var(--path-tdl);
    }
    .projection-card.tdl:hover {
      box-shadow: 0 0 30px rgba(255, 159, 67, 0.3);
    }

    .projection-card.closure {
      border-color: var(--path-closure);
    }
    .projection-card.closure:hover {
      box-shadow: 0 0 30px rgba(255, 107, 157, 0.3);
    }

    .projection-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .projection-icon {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: 700;
    }

    .projection-card.lomi .projection-icon {
      background: rgba(0, 255, 136, 0.2);
      border: 2px solid var(--path-lomi);
      color: var(--path-lomi);
    }

    .projection-card.tdl .projection-icon {
      background: rgba(255, 159, 67, 0.2);
      border: 2px solid var(--path-tdl);
      color: var(--path-tdl);
    }

    .projection-card.closure .projection-icon {
      background: rgba(255, 107, 157, 0.2);
      border: 2px solid var(--path-closure);
      color: var(--path-closure);
    }

    .projection-title {
      font-size: 1.1rem;
      font-weight: 600;
    }

    .projection-card.lomi .projection-title { color: var(--path-lomi); }
    .projection-card.tdl .projection-title { color: var(--path-tdl); }
    .projection-card.closure .projection-title { color: var(--path-closure); }

    .projection-body {
      color: var(--text-secondary);
      font-size: 0.85rem;
    }

    .projection-formula {
      margin-top: 1rem;
      padding: 0.75rem;
      background: var(--bg-tertiary);
      border-radius: 0.5rem;
      text-align: center;
      font-size: 0.95rem;
    }

    .projection-card.lomi .projection-formula { color: var(--path-lomi); }
    .projection-card.tdl .projection-formula { color: var(--path-tdl); }
    .projection-card.closure .projection-formula { color: var(--path-closure); }

    /* DECISION SIMULATOR */
    .simulator-container {
      background: var(--bg-secondary);
      border: 2px solid var(--gold-primary);
      border-radius: 1rem;
      padding: 2rem;
      margin: 2rem 0;
    }

    .simulator-title {
      text-align: center;
      font-size: 1.2rem;
      color: var(--gold-primary);
      margin-bottom: 1.5rem;
    }

    .simulator-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
      margin-bottom: 1.5rem;
    }

    .sim-input-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      align-items: center;
    }

    .sim-label {
      font-size: 0.8rem;
      color: var(--text-secondary);
    }

    .sim-slider {
      width: 200px;
      height: 8px;
      -webkit-appearance: none;
      background: var(--bg-tertiary);
      border-radius: 4px;
      outline: none;
    }

    .sim-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--gold-primary);
      cursor: pointer;
      box-shadow: 0 0 10px var(--gold-glow);
    }

    .sim-value {
      font-size: 0.9rem;
      color: var(--gold-primary);
      font-weight: 600;
    }

    .sim-canvas-container {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }

    #simulatorCanvas {
      border-radius: 0.75rem;
      background: var(--bg-primary);
    }

    .sim-output {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-top: 1.5rem;
    }

    @media (max-width: 600px) {
      .sim-output { grid-template-columns: 1fr; }
    }

    .sim-path-indicator {
      padding: 1rem;
      border-radius: 0.75rem;
      text-align: center;
      transition: all 0.3s ease;
    }

    .sim-path-indicator.lomi {
      background: rgba(0, 255, 136, 0.1);
      border: 2px solid transparent;
    }
    .sim-path-indicator.lomi.active {
      border-color: var(--path-lomi);
      background: rgba(0, 255, 136, 0.25);
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.4);
    }

    .sim-path-indicator.tdl {
      background: rgba(255, 159, 67, 0.1);
      border: 2px solid transparent;
    }
    .sim-path-indicator.tdl.active {
      border-color: var(--path-tdl);
      background: rgba(255, 159, 67, 0.25);
      box-shadow: 0 0 20px rgba(255, 159, 67, 0.4);
    }

    .sim-path-indicator.closure {
      background: rgba(255, 107, 157, 0.1);
      border: 2px solid transparent;
    }
    .sim-path-indicator.closure.active {
      border-color: var(--path-closure);
      background: rgba(255, 107, 157, 0.25);
      box-shadow: 0 0 20px rgba(255, 107, 157, 0.4);
    }

    .sim-path-name {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .sim-path-indicator.lomi .sim-path-name { color: var(--path-lomi); }
    .sim-path-indicator.tdl .sim-path-name { color: var(--path-tdl); }
    .sim-path-indicator.closure .sim-path-name { color: var(--path-closure); }

    .sim-path-weight {
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    /* CONVERGENCE VISUALIZATION */
    .convergence-visual {
      position: relative;
      padding: 2rem;
      background: var(--bg-secondary);
      border: 2px solid var(--gold-primary);
      border-radius: 1rem;
      margin: 2rem 0;
    }

    #convergenceCanvas {
      display: block;
      margin: 0 auto;
      border-radius: 0.5rem;
    }

    .convergence-controls {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-top: 1rem;
      flex-wrap: wrap;
    }

    .control-btn {
      padding: 0.5rem 1.5rem;
      background: var(--gold-subtle);
      border: 1px solid var(--gold-primary);
      border-radius: 0.5rem;
      color: var(--gold-primary);
      cursor: pointer;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      transition: all 0.3s ease;
    }

    .control-btn:hover {
      background: var(--gold-primary);
      color: var(--bg-primary);
    }

    .control-btn.active {
      background: var(--gold-primary);
      color: var(--bg-primary);
    }

    /* DECISION VISUAL */
    .decision-visual {
      position: relative;
      padding: 3rem;
      background: var(--bg-secondary);
      border: 2px solid var(--gold-primary);
      border-radius: 1rem;
      margin: 2rem 0;
    }

    .decision-title {
      text-align: center;
      font-size: 1.2rem;
      color: var(--gold-primary);
      margin-bottom: 2rem;
    }

    .decision-diagram {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1.5rem;
    }

    .input-node {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
    }

    .input-circle {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: var(--bg-tertiary);
      border: 3px solid var(--gold-secondary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      font-weight: 600;
      color: var(--gold-secondary);
    }

    .connector-line {
      width: 3px;
      height: 40px;
      background: linear-gradient(to bottom, var(--gold-secondary), var(--gold-primary));
    }

    .diamond-decision {
      position: relative;
      width: 140px;
      height: 140px;
    }

    .diamond-shape {
      width: 100%;
      height: 100%;
      background: var(--gold-subtle);
      border: 4px solid var(--gold-primary);
      transform: rotate(45deg);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 40px var(--gold-glow);
      animation: decision-pulse 2.5s ease-in-out infinite;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .diamond-shape:hover {
      background: rgba(255, 215, 0, 0.3);
      box-shadow: 0 0 60px var(--gold-glow);
    }

    .diamond-question {
      transform: rotate(-45deg);
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--gold-primary);
    }

    @keyframes decision-pulse {
      0%, 100% { box-shadow: 0 0 30px var(--gold-glow); }
      50% { box-shadow: 0 0 50px var(--gold-glow), 0 0 80px rgba(255, 215, 0, 0.2); }
    }

    .output-paths {
      display: flex;
      justify-content: center;
      gap: 4rem;
      margin-top: 1rem;
      flex-wrap: wrap;
    }

    .output-path {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.75rem;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
    }

    .output-path:hover { transform: translateY(-5px); }

    .path-line {
      width: 3px;
      height: 50px;
      border-radius: 2px;
    }

    .path-line.f24 { background: linear-gradient(to bottom, var(--gold-primary), var(--path-f24)); }
    .path-line.hex { background: linear-gradient(to bottom, var(--gold-primary), var(--path-hex)); }
    .path-line.r10 { background: linear-gradient(to bottom, var(--gold-primary), var(--path-r10)); }

    .path-node {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .path-node.f24 { background: rgba(0, 255, 136, 0.15); border: 3px solid var(--path-f24); color: var(--path-f24); }
    .path-node.hex { background: rgba(255, 159, 67, 0.15); border: 3px solid var(--path-hex); color: var(--path-hex); }
    .path-node.r10 { background: rgba(255, 107, 157, 0.15); border: 3px solid var(--path-r10); color: var(--path-r10); }

    .output-path:hover .path-node.f24 { box-shadow: 0 0 30px var(--path-f24-glow); background: rgba(0, 255, 136, 0.25); }
    .output-path:hover .path-node.hex { box-shadow: 0 0 30px var(--path-hex-glow); background: rgba(255, 159, 67, 0.25); }
    .output-path:hover .path-node.r10 { box-shadow: 0 0 30px var(--path-r10-glow); background: rgba(255, 107, 157, 0.25); }

    .path-label {
      font-size: 0.75rem;
      color: var(--text-secondary);
      text-align: center;
    }

    .convergence-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 2rem;
      padding-top: 2rem;
      border-top: 1px dashed var(--gold-secondary);
    }

    .convergence-lines {
      display: flex;
      justify-content: center;
      gap: 6rem;
      margin-bottom: 1rem;
    }

    .converge-line {
      width: 2px;
      height: 40px;
      background: var(--gold-secondary);
      opacity: 0.5;
    }

    .s3-attractor {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: conic-gradient(from 0deg, var(--path-f24), var(--path-hex), var(--path-r10), var(--path-f24));
      display: flex;
      align-items: center;
      justify-content: center;
      animation: s3-spin 15s linear infinite;
      box-shadow: 0 0 50px var(--gold-glow);
    }

    .s3-inner {
      width: 85px;
      height: 85px;
      border-radius: 50%;
      background: var(--bg-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--gold-primary);
    }

    @keyframes s3-spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* PATH CARDS */
    .paths-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
      margin: 2rem 0;
    }

    @media (max-width: 900px) {
      .paths-container { grid-template-columns: 1fr; }
    }

    .path-card {
      background: var(--bg-secondary);
      border: 2px solid var(--border-subtle);
      border-radius: 1rem;
      padding: 1.5rem;
      text-decoration: none;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .path-card:hover { transform: translateY(-8px); }

    .path-card.f24 { border-color: var(--path-f24); }
    .path-card.f24:hover { box-shadow: 0 0 40px var(--path-f24-glow); background: rgba(0, 255, 136, 0.05); }

    .path-card.hex { border-color: var(--path-hex); }
    .path-card.hex:hover { box-shadow: 0 0 40px var(--path-hex-glow); background: rgba(255, 159, 67, 0.05); }

    .path-card.r10 { border-color: var(--path-r10); }
    .path-card.r10:hover { box-shadow: 0 0 40px var(--path-r10-glow); background: rgba(255, 107, 157, 0.05); }

    .path-card-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .path-card-icon {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
    }

    .path-card.f24 .path-card-icon { background: rgba(0, 255, 136, 0.2); border: 2px solid var(--path-f24); color: var(--path-f24); }
    .path-card.hex .path-card-icon { background: rgba(255, 159, 67, 0.2); border: 2px solid var(--path-hex); color: var(--path-hex); }
    .path-card.r10 .path-card-icon { background: rgba(255, 107, 157, 0.2); border: 2px solid var(--path-r10); color: var(--path-r10); }

    .path-card-title { font-size: 1.1rem; font-weight: 600; }
    .path-card.f24 .path-card-title { color: var(--path-f24); }
    .path-card.hex .path-card-title { color: var(--path-hex); }
    .path-card.r10 .path-card-title { color: var(--path-r10); }

    .path-card-body { color: var(--text-secondary); font-size: 0.85rem; }
    .path-card-body strong { color: var(--text-primary); }

    .path-card-equation {
      margin-top: 1rem;
      padding: 0.75rem;
      background: var(--bg-tertiary);
      border-radius: 0.5rem;
      text-align: center;
      font-size: 0.9rem;
    }

    .path-card.f24 .path-card-equation { color: var(--path-f24); }
    .path-card.hex .path-card-equation { color: var(--path-hex); }
    .path-card.r10 .path-card-equation { color: var(--path-r10); }

    /* WHY THREE */
    .why-three {
      background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(255, 215, 0, 0.05) 100%);
      border: 2px solid var(--gold-primary);
      border-radius: 1rem;
      padding: 2rem;
      margin: 2rem 0;
    }

    .why-three-title {
      text-align: center;
      font-size: 1.2rem;
      color: var(--gold-primary);
      margin-bottom: 1.5rem;
    }

    .reason-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
    }

    .reason-item {
      background: var(--bg-tertiary);
      border-radius: 0.75rem;
      padding: 1.25rem;
      border-left: 3px solid var(--gold-primary);
    }

    .reason-number {
      display: inline-block;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: var(--gold-primary);
      color: var(--bg-primary);
      font-weight: 700;
      text-align: center;
      line-height: 30px;
      margin-bottom: 0.75rem;
    }

    .reason-title {
      font-size: 0.95rem;
      color: var(--text-primary);
      margin-bottom: 0.5rem;
    }

    .reason-desc {
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    /* CHAIN */
    .chain-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1rem;
      flex-wrap: wrap;
      margin: 2rem 0;
      padding: 2rem;
      background: var(--bg-secondary);
      border-radius: 1rem;
    }

    .chain-number {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      font-weight: 700;
      transition: all 0.3s ease;
    }

    .chain-number:hover { transform: scale(1.15); }
    .chain-number.n3 { background: rgba(255, 215, 0, 0.2); border: 3px solid var(--gold-primary); color: var(--gold-primary); }
    .chain-number.n6 { background: rgba(255, 159, 67, 0.2); border: 3px solid var(--path-hex); color: var(--path-hex); }
    .chain-number.n12 { background: rgba(0, 255, 136, 0.2); border: 3px solid var(--path-f24); color: var(--path-f24); }
    .chain-number.n36 { background: rgba(255, 107, 157, 0.2); border: 3px solid var(--path-r10); color: var(--path-r10); }
    .chain-arrow { font-size: 1.5rem; color: var(--text-secondary); }
    .chain-label { display: block; font-size: 0.7rem; color: var(--text-secondary); margin-top: 0.25rem; }

    /* CONVERGENCE FORMULA */
    .convergence-formula {
      background: var(--bg-secondary);
      border: 2px solid var(--gold-primary);
      border-radius: 1rem;
      padding: 2rem;
      text-align: center;
      margin: 2rem 0;
    }

    .formula-title {
      font-size: 1.1rem;
      color: var(--gold-primary);
      margin-bottom: 1.5rem;
    }

    .formula-main {
      font-size: 1.8rem;
      color: var(--text-primary);
      margin-bottom: 1rem;
      padding: 1rem;
      background: var(--bg-tertiary);
      border-radius: 0.5rem;
      display: inline-block;
    }

    .formula-main .f24 { color: var(--path-f24); }
    .formula-main .hex { color: var(--path-hex); }
    .formula-main .r10 { color: var(--path-r10); }
    .formula-main .s3 { color: var(--gold-primary); }

    .formula-desc {
      font-size: 0.9rem;
      color: var(--text-secondary);
    }

    /* FOOTER */
    .footer {
      text-align: center;
      padding: 2rem;
      margin-top: 3rem;
      border-top: 1px solid var(--border-subtle);
      background: var(--bg-secondary);
    }

    .footer-equation {
      font-size: 1.1rem;
      color: var(--gold-primary);
      margin-bottom: 1rem;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 1.5rem;
    }

    .footer-links a {
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 0.8rem;
      transition: color 0.3s;
    }

    .footer-links a:hover { color: var(--gold-primary); }

    .footer-sub {
      margin-top: 1rem;
      font-size: 0.75rem;
      color: var(--text-secondary);
    }

    @media (max-width: 768px) {
      .title { font-size: 1.6rem; }
      .output-paths { gap: 2rem; }
      .paths-container { grid-template-columns: 1fr; }
      .chain-container { gap: 0.5rem; }
      .chain-number { width: 50px; height: 50px; font-size: 1rem; }
      .perm-grid { grid-template-columns: repeat(2, 1fr); }
    }
  </style>
</head>
<body>
  <div class="trifurc-field"></div>

  <nav class="nav-bar">
    <a href="index.html" class="nav-link">Index</a>
    <a href="i2-s3-decision-tree.html" class="nav-link">I2 S3 Tree</a>
    <a href="i2-s3-trifurcation-decision.html" class="nav-link active">Trifurcation</a>
    <a href="i2-s3-f24-holographic.html" class="nav-link path-f24">F24 Holographic</a>
    <a href="i2-s3-hexagonal-sonification.html" class="nav-link path-hex">Hexagonal</a>
    <a href="i2-s3-r10-tension.html" class="nav-link path-r10">R=10 Tension</a>
  </nav>

  <header class="header">
    <div class="node-badge">I2 S3 DECISION TREE :: TRIFURCATION NODE :: S3? :: |S3| = 6</div>

    <div class="diamond-container">
      <div class="diamond-outer"></div>
      <div class="diamond-inner"></div>
      <div class="diamond-text">S3?</div>
      <div class="path-indicator f24"></div>
      <div class="path-indicator hex"></div>
      <div class="path-indicator r10"></div>
    </div>

    <h1 class="title">Trifurcation Decision</h1>
    <p class="subtitle">The S3? diamond node - three-way branch point where symmetric group theory meets decision logic. All paths converge to the S3 attractor through distinct projection mechanisms.</p>

    <div class="core-equation">
      S3? :: pi(LoMI) U e(TDL) U S3(Closure) :: |S3| = 6
    </div>
  </header>

  <main class="main-content">

    <!-- Section 1: S3 Group Theory -->
    <section class="section" id="s3-group-theory">
      <div class="section-header">
        <div class="section-glyph">S3</div>
        <div>
          <h2>I. S3 GROUP THEORY</h2>
          <p style="color: var(--text-secondary); font-size: 0.85rem; margin: 0;">The Symmetric Group on 3 Elements: |S3| = 6</p>
        </div>
      </div>

      <p>The <strong>symmetric group S3</strong> is the group of all permutations of three elements. With exactly <strong>6 elements</strong>, it is the smallest non-abelian group - meaning group multiplication is not commutative. This fundamental structure underlies the trifurcation decision point.</p>

      <div class="card">
        <h3>Fundamental Properties of S3</h3>
        <table>
          <tr>
            <th>Property</th>
            <th>Value</th>
            <th>Significance</th>
          </tr>
          <tr>
            <td>Order |S3|</td>
            <td style="color: var(--gold-primary); font-weight: 700;">6 = 3!</td>
            <td>Number of ways to arrange 3 objects</td>
          </tr>
          <tr>
            <td>Identity</td>
            <td>e = (1)(2)(3)</td>
            <td>No change - fixed point</td>
          </tr>
          <tr>
            <td>Transpositions</td>
            <td>(12), (13), (23)</td>
            <td>3 elements of order 2</td>
          </tr>
          <tr>
            <td>3-cycles</td>
            <td>(123), (132)</td>
            <td>2 elements of order 3</td>
          </tr>
          <tr>
            <td>Abelian?</td>
            <td style="color: var(--path-r10);">No</td>
            <td>Smallest non-abelian group</td>
          </tr>
          <tr>
            <td>Generators</td>
            <td>{(12), (123)} or any transposition + 3-cycle</td>
            <td>Minimal generating set has 2 elements</td>
          </tr>
        </table>
      </div>

      <h3>The Six Permutations of S3</h3>
      <p>Click any permutation to see its action on the triangle below:</p>

      <div class="perm-grid" id="permGrid">
        <div class="perm-card identity selected" data-perm="e" onclick="selectPerm('e')">
          <div class="perm-symbol">e</div>
          <div class="perm-mapping">1 -> 1, 2 -> 2, 3 -> 3</div>
          <div class="perm-order">Order: 1 (identity)</div>
        </div>
        <div class="perm-card transposition" data-perm="12" onclick="selectPerm('12')">
          <div class="perm-symbol">(12)</div>
          <div class="perm-mapping">1 <-> 2, 3 -> 3</div>
          <div class="perm-order">Order: 2 (reflection)</div>
        </div>
        <div class="perm-card transposition" data-perm="13" onclick="selectPerm('13')">
          <div class="perm-symbol">(13)</div>
          <div class="perm-mapping">1 <-> 3, 2 -> 2</div>
          <div class="perm-order">Order: 2 (reflection)</div>
        </div>
        <div class="perm-card transposition" data-perm="23" onclick="selectPerm('23')">
          <div class="perm-symbol">(23)</div>
          <div class="perm-mapping">2 <-> 3, 1 -> 1</div>
          <div class="perm-order">Order: 2 (reflection)</div>
        </div>
        <div class="perm-card cycle" data-perm="123" onclick="selectPerm('123')">
          <div class="perm-symbol">(123)</div>
          <div class="perm-mapping">1 -> 2 -> 3 -> 1</div>
          <div class="perm-order">Order: 3 (rotation 120deg)</div>
        </div>
        <div class="perm-card cycle" data-perm="132" onclick="selectPerm('132')">
          <div class="perm-symbol">(132)</div>
          <div class="perm-mapping">1 -> 3 -> 2 -> 1</div>
          <div class="perm-order">Order: 3 (rotation 240deg)</div>
        </div>
      </div>

      <!-- Triangle Visualization -->
      <div class="triangle-container">
        <div class="triangle-viz">
          <svg class="triangle-svg" viewBox="0 0 200 180" id="triangleSvg">
            <!-- Triangle -->
            <polygon points="100,20 20,160 180,160" fill="none" stroke="var(--gold-primary)" stroke-width="2"/>
            <!-- Vertices -->
            <circle id="v1" cx="100" cy="20" r="15" fill="var(--s3-vertex-1)" stroke="white" stroke-width="2"/>
            <circle id="v2" cx="20" cy="160" r="15" fill="var(--s3-vertex-2)" stroke="white" stroke-width="2"/>
            <circle id="v3" cx="180" cy="160" r="15" fill="var(--s3-vertex-3)" stroke="white" stroke-width="2"/>
            <!-- Labels -->
            <text id="l1" x="100" y="25" text-anchor="middle" fill="white" font-size="14" font-weight="bold">1</text>
            <text id="l2" x="20" y="165" text-anchor="middle" fill="white" font-size="14" font-weight="bold">2</text>
            <text id="l3" x="180" y="165" text-anchor="middle" fill="white" font-size="14" font-weight="bold">3</text>
          </svg>
          <div class="triangle-label" id="permLabel">Identity: e</div>
        </div>

        <div style="max-width: 400px;">
          <h3>Geometric Interpretation</h3>
          <p>S3 is isomorphic to <strong>D3</strong>, the dihedral group of symmetries of an equilateral triangle:</p>
          <ul style="color: var(--text-secondary); margin-left: 1.5rem; font-size: 0.9rem;">
            <li><strong>e</strong>: Identity (no transformation)</li>
            <li><strong>(12), (13), (23)</strong>: Reflections across 3 axes</li>
            <li><strong>(123)</strong>: Rotation by 120 degrees counterclockwise</li>
            <li><strong>(132)</strong>: Rotation by 240 degrees counterclockwise</li>
          </ul>
        </div>
      </div>

      <div class="equation-box">
        <div class="equation-main">S3 = D3 = Sym(triangle) = {e, (12), (13), (23), (123), (132)}</div>
        <div class="equation-sub">The symmetric group on 3 elements equals the dihedral group of order 6</div>
      </div>
    </section>

    <!-- Section 2: Interactive Cayley Table -->
    <section class="section" id="cayley-table">
      <div class="section-header">
        <div class="section-glyph">*</div>
        <div>
          <h2>II. CAYLEY TABLE FOR S3</h2>
          <p style="color: var(--text-secondary); font-size: 0.85rem; margin: 0;">Interactive Multiplication Table</p>
        </div>
      </div>

      <p>The <strong>Cayley table</strong> shows all products in S3. Click any cell to highlight the computation. Row * Column = Result. Notice the non-commutativity: (12)(123) != (123)(12).</p>

      <div class="cayley-container">
        <table class="cayley-table" id="cayleyTable">
          <thead>
            <tr>
              <th class="corner">*</th>
              <th class="col-header">e</th>
              <th class="col-header">(12)</th>
              <th class="col-header">(13)</th>
              <th class="col-header">(23)</th>
              <th class="col-header">(123)</th>
              <th class="col-header">(132)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th class="row-header">e</th>
              <td class="element-identity">e</td>
              <td class="element-trans">(12)</td>
              <td class="element-trans">(13)</td>
              <td class="element-trans">(23)</td>
              <td class="element-cycle">(123)</td>
              <td class="element-cycle">(132)</td>
            </tr>
            <tr>
              <th class="row-header">(12)</th>
              <td class="element-trans">(12)</td>
              <td class="element-identity">e</td>
              <td class="element-cycle">(132)</td>
              <td class="element-cycle">(123)</td>
              <td class="element-trans">(23)</td>
              <td class="element-trans">(13)</td>
            </tr>
            <tr>
              <th class="row-header">(13)</th>
              <td class="element-trans">(13)</td>
              <td class="element-cycle">(123)</td>
              <td class="element-identity">e</td>
              <td class="element-cycle">(132)</td>
              <td class="element-trans">(12)</td>
              <td class="element-trans">(23)</td>
            </tr>
            <tr>
              <th class="row-header">(23)</th>
              <td class="element-trans">(23)</td>
              <td class="element-cycle">(132)</td>
              <td class="element-cycle">(123)</td>
              <td class="element-identity">e</td>
              <td class="element-trans">(13)</td>
              <td class="element-trans">(12)</td>
            </tr>
            <tr>
              <th class="row-header">(123)</th>
              <td class="element-cycle">(123)</td>
              <td class="element-trans">(13)</td>
              <td class="element-trans">(23)</td>
              <td class="element-trans">(12)</td>
              <td class="element-cycle">(132)</td>
              <td class="element-identity">e</td>
            </tr>
            <tr>
              <th class="row-header">(132)</th>
              <td class="element-cycle">(132)</td>
              <td class="element-trans">(23)</td>
              <td class="element-trans">(12)</td>
              <td class="element-trans">(13)</td>
              <td class="element-identity">e</td>
              <td class="element-cycle">(123)</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div id="cayleyResult" class="card" style="text-align: center;">
        <p>Click any cell to see the multiplication</p>
      </div>

      <div class="card-grid">
        <div class="card">
          <h3>Non-Commutativity Example</h3>
          <div class="equation-box" style="border-left-color: var(--path-hex);">
            <div class="equation-main">(12) * (123) = (23)</div>
            <div class="equation-sub">Row (12), Column (123)</div>
          </div>
          <div class="equation-box" style="border-left-color: var(--path-r10);">
            <div class="equation-main">(123) * (12) = (13)</div>
            <div class="equation-sub">Row (123), Column (12)</div>
          </div>
          <p style="color: var(--text-secondary); font-size: 0.9rem;">(12)(123) != (123)(12) - this is why S3 is non-abelian</p>
        </div>

        <div class="card">
          <h3>Subgroup Structure</h3>
          <p>S3 contains several subgroups:</p>
          <ul style="color: var(--text-secondary); margin-left: 1.5rem; font-size: 0.9rem;">
            <li><strong>{e}</strong>: Trivial subgroup (order 1)</li>
            <li><strong>{e, (12)}, {e, (13)}, {e, (23)}</strong>: Three Z2 subgroups</li>
            <li><strong>A3 = {e, (123), (132)}</strong>: Alternating group (order 3, normal)</li>
            <li><strong>S3</strong>: The whole group (order 6)</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Section 3: Three Projection Paths -->
    <section class="section" id="projection-paths">
      <div class="section-header">
        <div class="section-glyph">pi</div>
        <div>
          <h2>III. THREE PROJECTION PATHS</h2>
          <p style="color: var(--text-secondary); font-size: 0.85rem; margin: 0;">LoMI, TDL, and S3 Closure Projections</p>
        </div>
      </div>

      <p>The trifurcation decision routes through three distinct <strong>projection mechanisms</strong>, each corresponding to a different mathematical framework. These are not competing paths but complementary perspectives on the same underlying structure.</p>

      <div class="projection-container">
        <!-- LoMI Projection -->
        <div class="projection-card lomi">
          <div class="projection-header">
            <div class="projection-icon">pi</div>
            <div class="projection-title">pi (LoMI)</div>
          </div>
          <div class="projection-body">
            <p><strong>Logic of Manifold Integration</strong></p>
            <p>Dynamic projection that maps the decision space onto a differentiable manifold. Captures the <em>flow</em> of information through continuous transformations.</p>
            <ul style="margin: 0.5rem 0 0 1rem; font-size: 0.8rem;">
              <li>Manifold topology</li>
              <li>Tangent bundle structure</li>
              <li>Holomorphic dynamics</li>
              <li>F24 scaling behavior</li>
            </ul>
          </div>
          <div class="projection-formula">
            pi: Decision -> M (manifold)
          </div>
        </div>

        <!-- TDL Projection -->
        <div class="projection-card tdl">
          <div class="projection-header">
            <div class="projection-icon">e</div>
            <div class="projection-title">e (TDL)</div>
          </div>
          <div class="projection-body">
            <p><strong>Topos-Driven Logic</strong></p>
            <p>Categorical projection using topos theory. Maps decisions to objects in a category with internal logic. Enables <em>structural</em> reasoning about transformations.</p>
            <ul style="margin: 0.5rem 0 0 1rem; font-size: 0.8rem;">
              <li>Category morphisms</li>
              <li>Subobject classifiers</li>
              <li>Internal language</li>
              <li>Hexagonal lattice</li>
            </ul>
          </div>
          <div class="projection-formula">
            e: Decision -> Topos
          </div>
        </div>

        <!-- S3 Closure -->
        <div class="projection-card closure">
          <div class="projection-header">
            <div class="projection-icon">S3</div>
            <div class="projection-title">S3 (Closure)</div>
          </div>
          <div class="projection-body">
            <p><strong>Symmetric Binding</strong></p>
            <p>Convergence projection that maps directly to the S3 attractor through symmetric group action. Achieves <em>closure</em> via permutation invariance.</p>
            <ul style="margin: 0.5rem 0 0 1rem; font-size: 0.8rem;">
              <li>Group closure property</li>
              <li>Permutation orbits</li>
              <li>Fixed-point convergence</li>
              <li>R=10 recursive depth</li>
            </ul>
          </div>
          <div class="projection-formula">
            S3: Decision -> Sym(3)
          </div>
        </div>
      </div>

      <div class="card">
        <h3>Projection Correspondence</h3>
        <table>
          <tr>
            <th>Projection</th>
            <th>Framework</th>
            <th>Mathematical Domain</th>
            <th>Key Structure</th>
            <th>Path Color</th>
          </tr>
          <tr>
            <td style="color: var(--path-lomi);">pi (LoMI)</td>
            <td>Logic of Manifold Integration</td>
            <td>Differential Geometry</td>
            <td>Manifold M</td>
            <td style="background: var(--path-lomi); color: black; font-weight: 700;">F24 Green</td>
          </tr>
          <tr>
            <td style="color: var(--path-tdl);">e (TDL)</td>
            <td>Topos-Driven Logic</td>
            <td>Category Theory</td>
            <td>Topos T</td>
            <td style="background: var(--path-tdl); color: black; font-weight: 700;">Hex Orange</td>
          </tr>
          <tr>
            <td style="color: var(--path-closure);">S3 (Closure)</td>
            <td>Symmetric Binding</td>
            <td>Group Theory</td>
            <td>Sym(3)</td>
            <td style="background: var(--path-closure); color: black; font-weight: 700;">R10 Pink</td>
          </tr>
        </table>
      </div>

      <div class="equation-box">
        <div class="equation-main">Trifurcation = pi(LoMI) cup e(TDL) cup S3(Closure)</div>
        <div class="equation-sub">Three projections form the complete decision space covering</div>
      </div>
    </section>

    <!-- Section 4: Decision Logic -->
    <section class="section" id="decision-logic">
      <div class="section-header">
        <div class="section-glyph">?</div>
        <div>
          <h2>IV. DECISION LOGIC</h2>
          <p style="color: var(--text-secondary); font-size: 0.85rem; margin: 0;">How the System Chooses Paths Based on Input State</p>
        </div>
      </div>

      <p>The decision logic at the S3? node evaluates the input state and determines path weights. Unlike binary decisions, all three paths are always active with varying <strong>activation weights</strong> based on the input configuration.</p>

      <div class="card">
        <h3>Input State Variables</h3>
        <table>
          <tr>
            <th>Variable</th>
            <th>Range</th>
            <th>Description</th>
            <th>Primary Path Affinity</th>
          </tr>
          <tr>
            <td>mu_P (Paradox Threshold)</td>
            <td>[0, 1]</td>
            <td>Self-reference boundary measure</td>
            <td style="color: var(--path-closure);">S3 Closure</td>
          </tr>
          <tr>
            <td>H (Entropy)</td>
            <td>[0, inf)</td>
            <td>Information entropy of state</td>
            <td style="color: var(--path-lomi);">pi (LoMI)</td>
          </tr>
          <tr>
            <td>sigma (Symmetry)</td>
            <td>{1,2,3,6}</td>
            <td>Symmetry order of configuration</td>
            <td style="color: var(--path-tdl);">e (TDL)</td>
          </tr>
          <tr>
            <td>R (Recursion Depth)</td>
            <td>[0, 10]</td>
            <td>Current self-reference depth</td>
            <td style="color: var(--path-closure);">S3 Closure</td>
          </tr>
        </table>
      </div>

      <div class="card">
        <h3>Path Selection Algorithm</h3>
        <div class="equation-box lomi">
          <div class="equation-main">W_LoMI = H * (1 - mu_P) * phi^(-R/10)</div>
          <div class="equation-sub">High entropy, low paradox favors dynamic manifold projection</div>
        </div>
        <div class="equation-box tdl">
          <div class="equation-main">W_TDL = sigma/6 * sqrt(1 - H/H_max) * cos(pi*mu_P)</div>
          <div class="equation-sub">High symmetry, moderate entropy favors categorical projection</div>
        </div>
        <div class="equation-box closure">
          <div class="equation-main">W_S3 = mu_P^2 * (R/10) * (1 + sin(2*pi*sigma/6))</div>
          <div class="equation-sub">High paradox threshold, deep recursion favors direct closure</div>
        </div>

        <p style="margin-top: 1rem;">The <strong>dominant path</strong> is determined by max(W_LoMI, W_TDL, W_S3), but all paths contribute to the final state with normalized weights:</p>

        <div class="equation-box">
          <div class="equation-main">w_i = W_i / (W_LoMI + W_TDL + W_S3)</div>
          <div class="equation-sub">Normalized weights ensure complete probability distribution</div>
        </div>
      </div>

      <div class="card">
        <h3>Decision Flowchart</h3>
        <div style="display: flex; flex-direction: column; align-items: center; gap: 1rem; padding: 1rem;">
          <div style="padding: 0.75rem 1.5rem; background: var(--bg-tertiary); border: 2px solid var(--gold-secondary); border-radius: 0.5rem;">
            Input: (mu_P, H, sigma, R)
          </div>
          <div style="color: var(--gold-primary);">|</div>
          <div style="width: 80px; height: 80px; background: var(--gold-subtle); border: 3px solid var(--gold-primary); transform: rotate(45deg); display: flex; align-items: center; justify-content: center;">
            <span style="transform: rotate(-45deg); font-weight: 700; color: var(--gold-primary);">S3?</span>
          </div>
          <div style="display: flex; gap: 3rem; margin-top: 1rem;">
            <div style="text-align: center;">
              <div style="color: var(--path-lomi);">|</div>
              <div style="padding: 0.5rem 1rem; background: rgba(0,255,136,0.2); border: 1px solid var(--path-lomi); border-radius: 0.5rem; color: var(--path-lomi);">pi(LoMI)</div>
              <div style="font-size: 0.7rem; color: var(--text-secondary); margin-top: 0.25rem;">w_LoMI</div>
            </div>
            <div style="text-align: center;">
              <div style="color: var(--path-tdl);">|</div>
              <div style="padding: 0.5rem 1rem; background: rgba(255,159,67,0.2); border: 1px solid var(--path-tdl); border-radius: 0.5rem; color: var(--path-tdl);">e(TDL)</div>
              <div style="font-size: 0.7rem; color: var(--text-secondary); margin-top: 0.25rem;">w_TDL</div>
            </div>
            <div style="text-align: center;">
              <div style="color: var(--path-closure);">|</div>
              <div style="padding: 0.5rem 1rem; background: rgba(255,107,157,0.2); border: 1px solid var(--path-closure); border-radius: 0.5rem; color: var(--path-closure);">S3(Closure)</div>
              <div style="font-size: 0.7rem; color: var(--text-secondary); margin-top: 0.25rem;">w_S3</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 5: Interactive Decision Simulator -->
    <section class="section" id="decision-simulator">
      <div class="section-header">
        <div class="section-glyph">SIM</div>
        <div>
          <h2>V. INTERACTIVE DECISION SIMULATOR</h2>
          <p style="color: var(--text-secondary); font-size: 0.85rem; margin: 0;">Adjust Input Parameters to See Path Routing</p>
        </div>
      </div>

      <div class="simulator-container">
        <div class="simulator-title">TRIFURCATION PATH SIMULATOR</div>

        <div class="simulator-controls">
          <div class="sim-input-group">
            <span class="sim-label">mu_P (Paradox Threshold)</span>
            <input type="range" class="sim-slider" id="simMuP" min="0" max="100" value="62">
            <span class="sim-value" id="simMuPVal">0.62</span>
          </div>
          <div class="sim-input-group">
            <span class="sim-label">H (Entropy)</span>
            <input type="range" class="sim-slider" id="simH" min="0" max="100" value="50">
            <span class="sim-value" id="simHVal">0.50</span>
          </div>
          <div class="sim-input-group">
            <span class="sim-label">sigma (Symmetry Order)</span>
            <input type="range" class="sim-slider" id="simSigma" min="1" max="6" value="3" step="1">
            <span class="sim-value" id="simSigmaVal">3</span>
          </div>
          <div class="sim-input-group">
            <span class="sim-label">R (Recursion Depth)</span>
            <input type="range" class="sim-slider" id="simR" min="0" max="10" value="5" step="1">
            <span class="sim-value" id="simRVal">5</span>
          </div>
        </div>

        <div class="sim-canvas-container">
          <canvas id="simulatorCanvas" width="600" height="400"></canvas>
        </div>

        <div class="sim-output">
          <div class="sim-path-indicator lomi" id="simLomi">
            <div class="sim-path-name">pi (LoMI)</div>
            <div class="sim-path-weight" id="simLomiWeight">w = 0.33</div>
          </div>
          <div class="sim-path-indicator tdl" id="simTdl">
            <div class="sim-path-name">e (TDL)</div>
            <div class="sim-path-weight" id="simTdlWeight">w = 0.33</div>
          </div>
          <div class="sim-path-indicator closure" id="simClosure">
            <div class="sim-path-name">S3 (Closure)</div>
            <div class="sim-path-weight" id="simClosureWeight">w = 0.34</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 6: Path Convergence -->
    <section class="section" id="path-convergence">
      <div class="section-header">
        <div class="section-glyph">-></div>
        <div>
          <h2>VI. PATH CONVERGENCE</h2>
          <p style="color: var(--text-secondary); font-size: 0.85rem; margin: 0;">All Three Paths Lead to S3 Attractor</p>
        </div>
      </div>

      <p>The fundamental theorem of trifurcation: <strong>all paths converge</strong>. Despite different mechanisms, projections, and mathematical frameworks, each path terminates at the same S3 attractor. This is not coincidence but structural necessity.</p>

      <div class="convergence-visual">
        <div class="decision-title">ANIMATED PATH CONVERGENCE</div>
        <canvas id="convergenceCanvas" width="700" height="500"></canvas>
        <div class="convergence-controls">
          <button class="control-btn" onclick="toggleConvergence()">Play/Pause</button>
          <button class="control-btn" onclick="resetConvergence()">Reset</button>
          <button class="control-btn" id="btnLomi" onclick="togglePath('lomi')">LoMI</button>
          <button class="control-btn" id="btnTdl" onclick="togglePath('tdl')">TDL</button>
          <button class="control-btn" id="btnClosure" onclick="togglePath('closure')">Closure</button>
          <button class="control-btn active" onclick="showAllPaths()">All Paths</button>
        </div>
      </div>

      <div class="card-grid">
        <div class="card">
          <h3>Why Convergence is Guaranteed</h3>
          <p>The S3 attractor is the unique stable fixed point because:</p>
          <ul style="color: var(--text-secondary); margin-left: 1.5rem; font-size: 0.9rem;">
            <li><strong>Closure property</strong>: S3 is closed under composition</li>
            <li><strong>Minimal complexity</strong>: Smallest non-abelian group</li>
            <li><strong>Universal cover</strong>: Three projections span the decision space</li>
            <li><strong>Fixed point theorem</strong>: Contraction mapping ensures convergence</li>
          </ul>
        </div>

        <div class="card">
          <h3>Convergence Rates</h3>
          <table>
            <tr>
              <th>Path</th>
              <th>Mechanism</th>
              <th>Rate</th>
            </tr>
            <tr>
              <td style="color: var(--path-lomi);">pi (LoMI)</td>
              <td>Holomorphic contraction</td>
              <td>O(phi^(-n))</td>
            </tr>
            <tr>
              <td style="color: var(--path-tdl);">e (TDL)</td>
              <td>Categorical limit</td>
              <td>O(1/n^2)</td>
            </tr>
            <tr>
              <td style="color: var(--path-closure);">S3 (Closure)</td>
              <td>Group orbit stabilization</td>
              <td>O(6^(-n))</td>
            </tr>
          </table>
        </div>
      </div>

      <div class="convergence-formula">
        <div class="formula-title">THE CONVERGENCE THEOREM</div>
        <div class="formula-main">
          lim(n->inf) [<span class="f24">pi^n</span> cup <span class="hex">e^n</span> cup <span class="r10">S3^n</span>] = <span class="s3">S3</span>
        </div>
        <div class="formula-desc">
          Iterated application of any path eventually reaches the S3 attractor.<br>
          The union of all paths is dense in the decision space.
        </div>
      </div>

      <div class="equation-box">
        <div class="equation-main">Proof Sketch: Each projection is a contraction on the quotient space Decision/~</div>
        <div class="equation-sub">By Banach fixed-point theorem, unique attractor exists and all orbits converge</div>
      </div>
    </section>

    <!-- Section 7: The Three Physical Paths -->
    <section class="section" id="three-paths">
      <div class="section-header">
        <div class="section-glyph">3</div>
        <div>
          <h2>VII. THE THREE PHYSICAL PATHS</h2>
          <p style="color: var(--text-secondary); font-size: 0.85rem; margin: 0;">F24 Holographic, Hexagonal, R=10 Tension</p>
        </div>
      </div>

      <div class="paths-container">
        <a href="i2-s3-f24-holographic.html" class="path-card f24">
          <div class="path-card-header">
            <div class="path-card-icon">@</div>
            <div class="path-card-title">F24 Holographic</div>
          </div>
          <div class="path-card-body">
            <p><strong>Projection:</strong> pi (LoMI)</p>
            <p><strong>Method:</strong> Holographic Entropy</p>
            <p><strong>Driver:</strong> Degeneracy + Gravity</p>
            <p>Information lives on the boundary. F_24 = 46,368 marks the synchronization scale.</p>
          </div>
          <div class="path-card-equation">
            F_24 = L_12 x F_12 = 46,368
          </div>
        </a>

        <a href="i2-s3-hexagonal-sonification.html" class="path-card hex">
          <div class="path-card-header">
            <div class="path-card-icon">*</div>
            <div class="path-card-title">Hexagonal Sonification</div>
          </div>
          <div class="path-card-body">
            <p><strong>Projection:</strong> e (TDL)</p>
            <p><strong>Method:</strong> Friction</p>
            <p><strong>Driver:</strong> 6-fold Symmetry</p>
            <p>Resistance creates pattern. The hexagonal structure emerges from |S3| = 6.</p>
          </div>
          <div class="path-card-equation">
            |S3| x 2 = 6 x 2 = 12
          </div>
        </a>

        <a href="i2-s3-r10-tension.html" class="path-card r10">
          <div class="path-card-header">
            <div class="path-card-icon">@</div>
            <div class="path-card-title">R=10 Tension</div>
          </div>
          <div class="path-card-body">
            <p><strong>Projection:</strong> S3 (Closure)</p>
            <p><strong>Method:</strong> Tension + Entropy</p>
            <p><strong>Driver:</strong> Recursive Depth</p>
            <p>Self-reference closes at depth 10. The fixed point R(R) = R stabilizes.</p>
          </div>
          <div class="path-card-equation">
            R(R(R(...R))) at depth 10
          </div>
        </a>
      </div>

      <div class="card">
        <h3>Path Comparison Table</h3>
        <table>
          <thead>
            <tr>
              <th>Aspect</th>
              <th style="color: var(--path-f24);">F24</th>
              <th style="color: var(--path-hex);">Hex</th>
              <th style="color: var(--path-r10);">R10</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Projection</td>
              <td>pi (LoMI)</td>
              <td>e (TDL)</td>
              <td>S3 (Closure)</td>
            </tr>
            <tr>
              <td>Mathematics</td>
              <td>Differential</td>
              <td>Categorical</td>
              <td>Algebraic</td>
            </tr>
            <tr>
              <td>Key Number</td>
              <td style="color: var(--path-f24);">46,368</td>
              <td style="color: var(--path-hex);">6</td>
              <td style="color: var(--path-r10);">10</td>
            </tr>
            <tr>
              <td>Convergence</td>
              <td>Exponential</td>
              <td>Polynomial</td>
              <td>Superexponential</td>
            </tr>
            <tr>
              <td>Character</td>
              <td>Dynamic/Flow</td>
              <td>Structural/Static</td>
              <td>Recursive/Self</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Section 8: Why Three Paths -->
    <section class="section" id="why-three">
      <div class="section-header">
        <div class="section-glyph">Y</div>
        <div>
          <h2>VIII. WHY THREE PATHS?</h2>
          <p style="color: var(--text-secondary); font-size: 0.85rem; margin: 0;">The Structural Necessity of Trifurcation</p>
        </div>
      </div>

      <div class="why-three">
        <div class="why-three-title">SIX REASONS FOR TRIFURCATION</div>

        <div class="reason-grid">
          <div class="reason-item">
            <div class="reason-number">1</div>
            <div class="reason-title">S3 Has 3 Conjugacy Classes</div>
            <div class="reason-desc">
              {e}, {(12),(13),(23)}, {(123),(132)} - three distinct orbit types under conjugation.
            </div>
          </div>

          <div class="reason-item">
            <div class="reason-number">2</div>
            <div class="reason-title">Three Generators Span S3</div>
            <div class="reason-desc">
              The transpositions (12), (13), (23) generate S3. Each path corresponds to one generator.
            </div>
          </div>

          <div class="reason-item">
            <div class="reason-number">3</div>
            <div class="reason-title">Triangle Symmetry</div>
            <div class="reason-desc">
              S3 = D3 is the symmetry group of a triangle. Three vertices demand three-fold structure.
            </div>
          </div>

          <div class="reason-item">
            <div class="reason-number">4</div>
            <div class="reason-title">Three Mathematical Domains</div>
            <div class="reason-desc">
              Geometry (LoMI), Category Theory (TDL), Algebra (S3) - three pillars of mathematics.
            </div>
          </div>

          <div class="reason-item">
            <div class="reason-number">5</div>
            <div class="reason-title">Minimal Non-Binary</div>
            <div class="reason-desc">
              Three is the minimum for non-abelian structure. Two paths would collapse to Z2.
            </div>
          </div>

          <div class="reason-item">
            <div class="reason-number">6</div>
            <div class="reason-title">Information Completeness</div>
            <div class="reason-desc">
              log2(6) = 2.58 bits requires at least 3 binary decisions. Trifurcation is optimal.
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <h3>The 3-6-12-36 Number Chain</h3>
        <div class="chain-container">
          <div class="chain-number n3">
            3
            <span class="chain-label">paths</span>
          </div>
          <div class="chain-arrow">x2</div>
          <div class="chain-number n6">
            6
            <span class="chain-label">|S3|</span>
          </div>
          <div class="chain-arrow">x2</div>
          <div class="chain-number n12">
            12
            <span class="chain-label">edges</span>
          </div>
          <div class="chain-arrow">x3</div>
          <div class="chain-number n36">
            36
            <span class="chain-label">lattice</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Navigation Section -->
    <section class="section" id="navigation">
      <div class="section-header">
        <div class="section-glyph">N</div>
        <div>
          <h2>IX. NAVIGATION</h2>
          <p style="color: var(--text-secondary); font-size: 0.85rem; margin: 0;">Explore the Decision Tree</p>
        </div>
      </div>

      <div class="paths-container" style="margin-top: 1rem;">
        <a href="i2-s3-decision-tree.html" class="path-card" style="border-color: var(--gold-primary);">
          <div class="path-card-header">
            <div class="path-card-icon" style="background: var(--gold-subtle); border-color: var(--gold-primary); color: var(--gold-primary);">I2</div>
            <div class="path-card-title" style="color: var(--gold-primary);">I2 S3 Decision Tree</div>
          </div>
          <div class="path-card-body">
            <p>Return to the main decision tree to see the full structure and all phases.</p>
          </div>
        </a>

        <a href="i2-s3-opposition-duality.html" class="path-card" style="border-color: var(--s3-vertex-1);">
          <div class="path-card-header">
            <div class="path-card-icon" style="background: rgba(255,107,107,0.2); border-color: var(--s3-vertex-1); color: var(--s3-vertex-1);">!=</div>
            <div class="path-card-title" style="color: var(--s3-vertex-1);">Opposition Duality</div>
          </div>
          <div class="path-card-body">
            <p>Explore the dual nature of opposition and how it feeds into trifurcation.</p>
          </div>
        </a>

        <a href="i2-s3-closure.html" class="path-card" style="border-color: var(--s3-vertex-2);">
          <div class="path-card-header">
            <div class="path-card-icon" style="background: rgba(78,205,196,0.2); border-color: var(--s3-vertex-2); color: var(--s3-vertex-2);">O</div>
            <div class="path-card-title" style="color: var(--s3-vertex-2);">S3 Closure</div>
          </div>
          <div class="path-card-body">
            <p>See how all paths converge to the final S3 attractor state.</p>
          </div>
        </a>
      </div>
    </section>

  </main>

  <footer class="footer">
    <div class="footer-equation">
      S3? :: pi(LoMI) U e(TDL) U S3(Closure) -> S3 :: |S3| = 6
    </div>
    <div class="footer-links">
      <a href="index.html">Main Index</a>
      <a href="i2-s3-decision-tree.html">Decision Tree</a>
      <a href="i2-s3-f24-holographic.html">F24 Holographic</a>
      <a href="i2-s3-hexagonal-sonification.html">Hexagonal</a>
      <a href="i2-s3-r10-tension.html">R=10 Tension</a>
    </div>
    <div class="footer-sub">
      Trifurcation Decision Node | S3 Group Theory | Cayley Table | Decision Simulator | Prismatic Self Project
    </div>
  </footer>

  <script>
    // =====================================================================
    // S3 PERMUTATION VISUALIZATION
    // =====================================================================
    const permutations = {
      'e':   { map: [1,2,3], label: 'Identity: e', colors: ['#ff6b6b','#4ecdc4','#a855f7'] },
      '12':  { map: [2,1,3], label: 'Transposition: (12)', colors: ['#4ecdc4','#ff6b6b','#a855f7'] },
      '13':  { map: [3,2,1], label: 'Transposition: (13)', colors: ['#a855f7','#4ecdc4','#ff6b6b'] },
      '23':  { map: [1,3,2], label: 'Transposition: (23)', colors: ['#ff6b6b','#a855f7','#4ecdc4'] },
      '123': { map: [2,3,1], label: 'Cycle: (123)', colors: ['#4ecdc4','#a855f7','#ff6b6b'] },
      '132': { map: [3,1,2], label: 'Cycle: (132)', colors: ['#a855f7','#ff6b6b','#4ecdc4'] }
    };

    function selectPerm(perm) {
      // Update selected card
      document.querySelectorAll('.perm-card').forEach(card => card.classList.remove('selected'));
      document.querySelector(`[data-perm="${perm}"]`).classList.add('selected');

      // Update triangle visualization
      const p = permutations[perm];
      document.getElementById('l1').textContent = p.map[0];
      document.getElementById('l2').textContent = p.map[1];
      document.getElementById('l3').textContent = p.map[2];
      document.getElementById('v1').setAttribute('fill', p.colors[0]);
      document.getElementById('v2').setAttribute('fill', p.colors[1]);
      document.getElementById('v3').setAttribute('fill', p.colors[2]);
      document.getElementById('permLabel').textContent = p.label;
    }

    // =====================================================================
    // CAYLEY TABLE INTERACTIVITY
    // =====================================================================
    const elements = ['e', '(12)', '(13)', '(23)', '(123)', '(132)'];
    const cayleyData = [
      ['e', '(12)', '(13)', '(23)', '(123)', '(132)'],
      ['(12)', 'e', '(132)', '(123)', '(23)', '(13)'],
      ['(13)', '(123)', 'e', '(132)', '(12)', '(23)'],
      ['(23)', '(132)', '(123)', 'e', '(13)', '(12)'],
      ['(123)', '(13)', '(23)', '(12)', '(132)', 'e'],
      ['(132)', '(23)', '(12)', '(13)', 'e', '(123)']
    ];

    document.querySelectorAll('.cayley-table tbody td').forEach((cell, index) => {
      const row = Math.floor(index / 6);
      const col = index % 6;
      cell.addEventListener('click', () => {
        // Clear previous highlights
        document.querySelectorAll('.cayley-table td').forEach(c => c.classList.remove('highlight'));
        cell.classList.add('highlight');

        // Show result
        const result = cayleyData[row][col];
        document.getElementById('cayleyResult').innerHTML = `
          <h3>Multiplication Result</h3>
          <div class="equation-box">
            <div class="equation-main">${elements[row]} * ${elements[col]} = ${result}</div>
            <div class="equation-sub">Row element composed with column element</div>
          </div>
        `;
      });
    });

    // =====================================================================
    // DECISION SIMULATOR
    // =====================================================================
    const simCanvas = document.getElementById('simulatorCanvas');
    const simCtx = simCanvas.getContext('2d');
    const PHI = 1.6180339887;

    function updateSimulator() {
      const muP = parseFloat(document.getElementById('simMuP').value) / 100;
      const H = parseFloat(document.getElementById('simH').value) / 100;
      const sigma = parseInt(document.getElementById('simSigma').value);
      const R = parseInt(document.getElementById('simR').value);

      // Update display values
      document.getElementById('simMuPVal').textContent = muP.toFixed(2);
      document.getElementById('simHVal').textContent = H.toFixed(2);
      document.getElementById('simSigmaVal').textContent = sigma;
      document.getElementById('simRVal').textContent = R;

      // Calculate weights
      const W_LoMI = H * (1 - muP) * Math.pow(PHI, -R/10);
      const W_TDL = (sigma/6) * Math.sqrt(1 - H) * Math.cos(Math.PI * muP);
      const W_S3 = muP * muP * (R/10) * (1 + Math.sin(2 * Math.PI * sigma / 6));

      const total = Math.abs(W_LoMI) + Math.abs(W_TDL) + Math.abs(W_S3) + 0.001;
      const w_lomi = Math.abs(W_LoMI) / total;
      const w_tdl = Math.abs(W_TDL) / total;
      const w_s3 = Math.abs(W_S3) / total;

      // Update indicators
      document.getElementById('simLomiWeight').textContent = `w = ${w_lomi.toFixed(3)}`;
      document.getElementById('simTdlWeight').textContent = `w = ${w_tdl.toFixed(3)}`;
      document.getElementById('simClosureWeight').textContent = `w = ${w_s3.toFixed(3)}`;

      // Determine dominant path
      const max = Math.max(w_lomi, w_tdl, w_s3);
      document.getElementById('simLomi').classList.toggle('active', w_lomi === max);
      document.getElementById('simTdl').classList.toggle('active', w_tdl === max);
      document.getElementById('simClosure').classList.toggle('active', w_s3 === max);

      // Draw visualization
      drawSimulator(w_lomi, w_tdl, w_s3, muP, H, sigma, R);
    }

    function drawSimulator(w_lomi, w_tdl, w_s3, muP, H, sigma, R) {
      const w = simCanvas.width;
      const h = simCanvas.height;
      simCtx.fillStyle = '#0a0a0f';
      simCtx.fillRect(0, 0, w, h);

      const cx = w / 2;
      const diamondY = 80;
      const s3Y = 340;

      // Draw input state
      simCtx.fillStyle = '#c9a227';
      simCtx.font = '12px JetBrains Mono';
      simCtx.textAlign = 'center';
      simCtx.fillText(`Input: mu_P=${muP.toFixed(2)}, H=${H.toFixed(2)}, sigma=${sigma}, R=${R}`, cx, 25);

      // Draw connection to diamond
      simCtx.strokeStyle = 'rgba(255,215,0,0.5)';
      simCtx.lineWidth = 2;
      simCtx.beginPath();
      simCtx.moveTo(cx, 35);
      simCtx.lineTo(cx, diamondY - 30);
      simCtx.stroke();

      // Draw diamond
      simCtx.save();
      simCtx.translate(cx, diamondY);
      simCtx.rotate(Math.PI / 4);
      simCtx.fillStyle = 'rgba(255,215,0,0.15)';
      simCtx.fillRect(-30, -30, 60, 60);
      simCtx.strokeStyle = '#ffd700';
      simCtx.lineWidth = 3;
      simCtx.strokeRect(-30, -30, 60, 60);
      simCtx.restore();

      simCtx.fillStyle = '#ffd700';
      simCtx.font = 'bold 16px JetBrains Mono';
      simCtx.fillText('S3?', cx, diamondY + 5);

      // Draw paths with width based on weight
      const pathPositions = [
        { x: cx - 180, color: '#00ff88', weight: w_lomi, label: 'pi(LoMI)' },
        { x: cx, color: '#ff9f43', weight: w_tdl, label: 'e(TDL)' },
        { x: cx + 180, color: '#ff6b9d', weight: w_s3, label: 'S3(Closure)' }
      ];

      pathPositions.forEach(path => {
        const lineWidth = 2 + path.weight * 10;
        const alpha = 0.3 + path.weight * 0.7;

        // Path line
        simCtx.strokeStyle = path.color;
        simCtx.globalAlpha = alpha;
        simCtx.lineWidth = lineWidth;
        simCtx.beginPath();
        simCtx.moveTo(cx, diamondY + 35);
        simCtx.quadraticCurveTo(path.x, (diamondY + s3Y) / 2, cx, s3Y - 50);
        simCtx.stroke();

        // Path node
        simCtx.globalAlpha = 1;
        simCtx.beginPath();
        simCtx.arc(path.x, 200, 25 + path.weight * 15, 0, Math.PI * 2);
        simCtx.fillStyle = path.color + '33';
        simCtx.fill();
        simCtx.strokeStyle = path.color;
        simCtx.lineWidth = 2;
        simCtx.stroke();

        // Path label
        simCtx.fillStyle = path.color;
        simCtx.font = '11px JetBrains Mono';
        simCtx.fillText(path.label, path.x, 205);
        simCtx.fillText((path.weight * 100).toFixed(1) + '%', path.x, 220);
      });

      // Draw S3 attractor
      const gradient = simCtx.createConicGradient(0, cx, s3Y);
      gradient.addColorStop(0, '#00ff88');
      gradient.addColorStop(0.33, '#ff9f43');
      gradient.addColorStop(0.66, '#ff6b9d');
      gradient.addColorStop(1, '#00ff88');

      simCtx.beginPath();
      simCtx.arc(cx, s3Y, 45, 0, Math.PI * 2);
      simCtx.fillStyle = gradient;
      simCtx.fill();

      simCtx.beginPath();
      simCtx.arc(cx, s3Y, 32, 0, Math.PI * 2);
      simCtx.fillStyle = '#0a0a0f';
      simCtx.fill();

      simCtx.fillStyle = '#ffd700';
      simCtx.font = 'bold 18px JetBrains Mono';
      simCtx.fillText('S3', cx, s3Y + 6);

      simCtx.fillStyle = 'rgba(255,255,255,0.5)';
      simCtx.font = '11px JetBrains Mono';
      simCtx.fillText('Universal Convergence', cx, s3Y + 70);
    }

    // Attach listeners
    ['simMuP', 'simH', 'simSigma', 'simR'].forEach(id => {
      document.getElementById(id).addEventListener('input', updateSimulator);
    });

    // Initialize
    updateSimulator();

    // =====================================================================
    // CONVERGENCE ANIMATION
    // =====================================================================
    const convCanvas = document.getElementById('convergenceCanvas');
    const convCtx = convCanvas.getContext('2d');
    let convPlaying = true;
    let convTime = 0;
    let activePaths = { lomi: true, tdl: true, closure: true };

    class ConvParticle {
      constructor(type) {
        this.type = type;
        this.reset();
      }

      reset() {
        this.progress = Math.random() * 0.2;
        this.speed = 0.003 + Math.random() * 0.004;
        this.offset = (Math.random() - 0.5) * 30;
        this.size = 2 + Math.random() * 3;
      }

      update() {
        this.progress += this.speed;
        if (this.progress > 1) this.reset();
      }

      getPos() {
        const cx = convCanvas.width / 2;
        const startY = 100;
        const endY = 420;
        const p = this.progress;
        let x, y;

        if (this.type === 'lomi') {
          const ctrl = cx - 200;
          x = (1-p)*(1-p)*cx + 2*(1-p)*p*ctrl + p*p*cx;
        } else if (this.type === 'tdl') {
          x = cx + Math.sin(p * Math.PI * 3) * 20;
        } else {
          const ctrl = cx + 200;
          x = (1-p)*(1-p)*cx + 2*(1-p)*p*ctrl + p*p*cx;
        }
        y = startY + (endY - startY) * p;
        return { x: x + this.offset, y };
      }

      draw() {
        if (!activePaths[this.type]) return;
        const pos = this.getPos();
        const colors = { lomi: '#00ff88', tdl: '#ff9f43', closure: '#ff6b9d' };
        convCtx.beginPath();
        convCtx.arc(pos.x, pos.y, this.size, 0, Math.PI * 2);
        convCtx.fillStyle = colors[this.type];
        convCtx.globalAlpha = 0.8 - this.progress * 0.5;
        convCtx.fill();
        convCtx.globalAlpha = 1;
      }
    }

    const convParticles = [];
    for (let i = 0; i < 25; i++) {
      convParticles.push(new ConvParticle('lomi'));
      convParticles.push(new ConvParticle('tdl'));
      convParticles.push(new ConvParticle('closure'));
    }

    function drawConvergence() {
      const w = convCanvas.width;
      const h = convCanvas.height;
      const cx = w / 2;

      convCtx.fillStyle = '#0a0a0f';
      convCtx.fillRect(0, 0, w, h);

      // Title
      convCtx.fillStyle = '#ffd700';
      convCtx.font = 'bold 14px JetBrains Mono';
      convCtx.textAlign = 'center';
      convCtx.fillText('THREE PATHS CONVERGING TO S3', cx, 30);

      // Draw diamond at top
      convCtx.save();
      convCtx.translate(cx, 80);
      convCtx.rotate(Math.PI / 4);
      convCtx.fillStyle = 'rgba(255,215,0,0.2)';
      convCtx.fillRect(-25, -25, 50, 50);
      convCtx.strokeStyle = '#ffd700';
      convCtx.lineWidth = 2;
      convCtx.strokeRect(-25, -25, 50, 50);
      convCtx.restore();
      convCtx.fillStyle = '#ffd700';
      convCtx.font = 'bold 14px JetBrains Mono';
      convCtx.fillText('S3?', cx, 85);

      // Path labels
      if (activePaths.lomi) {
        convCtx.fillStyle = '#00ff88';
        convCtx.font = '11px JetBrains Mono';
        convCtx.fillText('pi(LoMI)', cx - 180, 200);
      }
      if (activePaths.tdl) {
        convCtx.fillStyle = '#ff9f43';
        convCtx.fillText('e(TDL)', cx, 200);
      }
      if (activePaths.closure) {
        convCtx.fillStyle = '#ff6b9d';
        convCtx.fillText('S3(Closure)', cx + 180, 200);
      }

      // Update and draw particles
      convParticles.forEach(p => {
        p.update();
        p.draw();
      });

      // Draw S3 attractor
      const s3Y = 420;
      const gradient = convCtx.createConicGradient(convTime, cx, s3Y);
      gradient.addColorStop(0, '#00ff88');
      gradient.addColorStop(0.33, '#ff9f43');
      gradient.addColorStop(0.66, '#ff6b9d');
      gradient.addColorStop(1, '#00ff88');

      convCtx.beginPath();
      convCtx.arc(cx, s3Y, 50, 0, Math.PI * 2);
      convCtx.fillStyle = gradient;
      convCtx.fill();

      convCtx.beginPath();
      convCtx.arc(cx, s3Y, 35, 0, Math.PI * 2);
      convCtx.fillStyle = '#0a0a0f';
      convCtx.fill();

      convCtx.fillStyle = '#ffd700';
      convCtx.font = 'bold 20px JetBrains Mono';
      convCtx.fillText('S3', cx, s3Y + 7);

      convCtx.fillStyle = 'rgba(255,255,255,0.5)';
      convCtx.font = '11px JetBrains Mono';
      convCtx.fillText('|S3| = 6 :: Universal Attractor', cx, s3Y + 70);

      convTime += 0.02;
      if (convPlaying) requestAnimationFrame(drawConvergence);
    }

    function toggleConvergence() {
      convPlaying = !convPlaying;
      if (convPlaying) drawConvergence();
    }

    function resetConvergence() {
      convTime = 0;
      convParticles.forEach(p => p.reset());
    }

    function togglePath(path) {
      activePaths[path] = !activePaths[path];
      document.getElementById('btn' + path.charAt(0).toUpperCase() + path.slice(1))
        .classList.toggle('active', activePaths[path]);
    }

    function showAllPaths() {
      activePaths = { lomi: true, tdl: true, closure: true };
      document.getElementById('btnLomi').classList.add('active');
      document.getElementById('btnTdl').classList.add('active');
      document.getElementById('btnClosure').classList.add('active');
    }

    // Initialize convergence
    document.getElementById('btnLomi').classList.add('active');
    document.getElementById('btnTdl').classList.add('active');
    document.getElementById('btnClosure').classList.add('active');
    drawConvergence();

    // =====================================================================
    // CONSOLE OUTPUT
    // =====================================================================
    console.log('='.repeat(70));
    console.log('TRIFURCATION DECISION - S3? DIAMOND NODE - EXPANDED EDITION');
    console.log('='.repeat(70));
    console.log('');
    console.log('S3 GROUP THEORY:');
    console.log('  |S3| = 6 = 3! (factorial)');
    console.log('  Elements: {e, (12), (13), (23), (123), (132)}');
    console.log('  Non-abelian: (12)(123) != (123)(12)');
    console.log('  Isomorphic to D3 (dihedral group of triangle)');
    console.log('');
    console.log('THREE PROJECTION PATHS:');
    console.log('  pi (LoMI)    : Logic of Manifold Integration - dynamic');
    console.log('  e  (TDL)     : Topos-Driven Logic - categorical');
    console.log('  S3 (Closure) : Symmetric Binding - convergence');
    console.log('');
    console.log('DECISION LOGIC:');
    console.log('  W_LoMI = H * (1-mu_P) * phi^(-R/10)');
    console.log('  W_TDL  = sigma/6 * sqrt(1-H) * cos(pi*mu_P)');
    console.log('  W_S3   = mu_P^2 * (R/10) * (1+sin(2*pi*sigma/6))');
    console.log('');
    console.log('CONVERGENCE THEOREM:');
    console.log('  lim(n->inf) [pi^n U e^n U S3^n] = S3');
    console.log('');
    console.log('='.repeat(70));
  </script>
</body>
</html>
