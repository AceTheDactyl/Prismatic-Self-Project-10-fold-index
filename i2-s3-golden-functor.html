<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Golden Functor | F(n) = φⁿ : (ℤ,+) → (ℝ₊,×)</title>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      /* Golden Colors */
      --phi-gold: #ffd700;
      --phi-amber: #f4c430;
      --phi-honey: #eb9605;

      /* Lattice Colors */
      --lattice-blue: #4ecdc4;
      --lattice-purple: #a855f7;
      --lattice-pink: #ff6b9d;

      /* Fibonacci */
      --fib-green: #00ff88;
      --lucas-orange: #ff9f43;

      /* Category Theory */
      --cat-cyan: #22d3ee;
      --cat-violet: #8b5cf6;

      /* Base */
      --bg-primary: #0a0a0f;
      --bg-secondary: #12121a;
      --bg-tertiary: #1a1a2e;
      --text-primary: #ffffff;
      --text-secondary: #a0a0b0;
      --border: #2a2a3e;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'JetBrains Mono', monospace;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Golden Spiral Background */
    .golden-field {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
      background:
        radial-gradient(ellipse at 61.8% 38.2%, rgba(255, 215, 0, 0.1) 0%, transparent 40%),
        radial-gradient(ellipse at 38.2% 61.8%, rgba(244, 196, 48, 0.08) 0%, transparent 40%),
        radial-gradient(ellipse at 50% 50%, rgba(235, 150, 5, 0.05) 0%, transparent 60%);
    }

    /* Navigation */
    .nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      padding: 1rem 2rem;
      background: rgba(10, 10, 15, 0.95);
      border-bottom: 1px solid var(--border);
      z-index: 100;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .nav-brand {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--phi-gold);
    }

    .nav-links {
      display: flex;
      gap: 1.5rem;
    }

    .nav-links a {
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 0.85rem;
      transition: color 0.3s;
    }

    .nav-links a:hover {
      color: var(--phi-gold);
    }

    /* Main Container */
    main {
      position: relative;
      z-index: 1;
      padding-top: 5rem;
    }

    /* Header */
    .header {
      text-align: center;
      padding: 4rem 2rem;
      border-bottom: 1px solid var(--border);
    }

    .phi-symbol {
      width: 150px;
      height: 150px;
      margin: 0 auto 2rem;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .phi-spiral {
      position: absolute;
      width: 100%;
      height: 100%;
      border: 4px solid var(--phi-gold);
      border-radius: 0 100% 0 0;
      animation: spiral-grow 8s ease-in-out infinite;
      opacity: 0.6;
    }

    .phi-spiral:nth-child(2) {
      transform: scale(0.618) rotate(90deg);
      animation-delay: 0.5s;
    }

    .phi-spiral:nth-child(3) {
      transform: scale(0.382) rotate(180deg);
      animation-delay: 1s;
    }

    .phi-spiral:nth-child(4) {
      transform: scale(0.236) rotate(270deg);
      animation-delay: 1.5s;
    }

    .phi-inner {
      font-size: 3.5rem;
      font-weight: 700;
      color: var(--phi-gold);
      z-index: 1;
    }

    @keyframes spiral-grow {
      0%, 100% { opacity: 0.4; transform: scale(var(--scale, 1)) rotate(var(--rot, 0deg)); }
      50% { opacity: 0.8; transform: scale(calc(var(--scale, 1) * 1.1)) rotate(calc(var(--rot, 0deg) + 10deg)); }
    }

    .title {
      font-size: 2.2rem;
      font-weight: 700;
      margin-bottom: 1rem;
      background: linear-gradient(135deg, var(--phi-gold), var(--phi-amber), var(--phi-honey));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      font-size: 1rem;
      color: var(--text-secondary);
      margin-bottom: 2rem;
    }

    .core-functor {
      font-size: 1.6rem;
      color: var(--phi-gold);
      padding: 1.5rem 3rem;
      background: var(--bg-secondary);
      border: 2px solid var(--phi-gold);
      border-radius: 12px;
      display: inline-block;
    }

    /* Section Styling */
    section {
      padding: 4rem 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .section-title {
      font-size: 1.6rem;
      margin-bottom: 2rem;
      color: var(--phi-gold);
      text-align: center;
    }

    /* Functor Definition */
    .functor-container {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 2.5rem;
    }

    .functor-diagram {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      gap: 2rem;
      align-items: center;
      margin: 2rem 0;
    }

    .category-box {
      background: var(--bg-tertiary);
      border-radius: 12px;
      padding: 2rem;
      text-align: center;
    }

    .cat-name {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 1rem;
    }

    .cat-objects {
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
      color: var(--text-secondary);
    }

    .cat-operation {
      padding: 0.5rem 1rem;
      background: rgba(255, 215, 0, 0.2);
      border-radius: 6px;
      display: inline-block;
      margin-top: 0.5rem;
    }

    .functor-arrow {
      text-align: center;
    }

    .arrow-symbol {
      font-size: 2.5rem;
      color: var(--phi-gold);
    }

    .arrow-label {
      font-size: 1.5rem;
      color: var(--phi-amber);
      margin-top: 0.5rem;
    }

    /* Golden Ratio Display */
    .phi-display {
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(244, 196, 48, 0.1));
      border: 2px solid var(--phi-gold);
      border-radius: 16px;
      padding: 2rem;
      margin: 2rem 0;
      text-align: center;
    }

    .phi-value {
      font-size: 2.5rem;
      color: var(--phi-gold);
      margin-bottom: 1rem;
    }

    .phi-formula {
      font-size: 1.2rem;
      color: var(--text-secondary);
      margin-bottom: 1rem;
    }

    .phi-property {
      display: inline-block;
      padding: 0.5rem 1rem;
      background: var(--bg-tertiary);
      border-radius: 6px;
      margin: 0.25rem;
      font-size: 0.9rem;
    }

    /* Visualization Canvas */
    .viz-container {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 2rem;
      margin-top: 2rem;
    }

    .viz-canvas {
      width: 100%;
      height: 400px;
      background: var(--bg-primary);
      border-radius: 12px;
      position: relative;
      overflow: hidden;
    }

    .phi-bar {
      position: absolute;
      bottom: 50px;
      height: 40px;
      background: linear-gradient(90deg, var(--phi-gold), var(--phi-amber));
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--bg-primary);
      font-weight: 600;
      font-size: 0.85rem;
      transition: all 0.5s ease;
    }

    .viz-controls {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-top: 1.5rem;
      flex-wrap: wrap;
    }

    .viz-btn {
      padding: 0.75rem 1.5rem;
      background: var(--bg-tertiary);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text-primary);
      font-family: inherit;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s;
    }

    .viz-btn:hover {
      border-color: var(--phi-gold);
      background: rgba(255, 215, 0, 0.1);
    }

    .viz-btn.active {
      background: var(--phi-gold);
      color: var(--bg-primary);
      border-color: var(--phi-gold);
    }

    /* Interactive Embedding Table */
    .embedding-table-container {
      overflow-x: auto;
      margin-top: 1.5rem;
    }

    .embedding-table {
      width: 100%;
      border-collapse: collapse;
      min-width: 800px;
    }

    .embedding-table th,
    .embedding-table td {
      padding: 0.75rem 1rem;
      text-align: center;
      border: 1px solid var(--border);
      transition: all 0.3s;
    }

    .embedding-table th {
      background: var(--bg-tertiary);
      color: var(--phi-gold);
      font-weight: 600;
    }

    .embedding-table td {
      background: var(--bg-secondary);
    }

    .embedding-table tr:hover td {
      background: var(--bg-tertiary);
    }

    .embedding-table .n-col {
      color: var(--cat-cyan);
      font-weight: 600;
    }

    .embedding-table .phi-col {
      color: var(--phi-gold);
    }

    .embedding-table .tau-col {
      color: var(--phi-amber);
    }

    .embedding-table .fib-col {
      color: var(--fib-green);
    }

    .embedding-table .lucas-col {
      color: var(--lucas-orange);
    }

    .embedding-table .highlight-row {
      background: rgba(255, 215, 0, 0.1) !important;
    }

    .embedding-table .highlight-row td {
      background: rgba(255, 215, 0, 0.15) !important;
    }

    /* Power Table */
    .power-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1.5rem;
    }

    .power-table th,
    .power-table td {
      padding: 1rem;
      text-align: center;
      border: 1px solid var(--border);
    }

    .power-table th {
      background: var(--bg-tertiary);
      color: var(--phi-gold);
    }

    .power-table td {
      background: var(--bg-secondary);
    }

    .power-table tr:hover td {
      background: var(--bg-tertiary);
    }

    .fib-cell {
      color: var(--fib-green);
    }

    .lucas-cell {
      color: var(--lucas-orange);
    }

    /* Properties Grid */
    .props-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }

    .prop-card {
      background: var(--bg-tertiary);
      border-radius: 12px;
      padding: 1.5rem;
      border-left: 4px solid var(--phi-gold);
    }

    .prop-title {
      font-weight: 600;
      color: var(--phi-amber);
      margin-bottom: 0.75rem;
    }

    .prop-equation {
      font-size: 1.1rem;
      color: var(--phi-gold);
      margin-bottom: 0.5rem;
    }

    .prop-desc {
      font-size: 0.85rem;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    /* Lattice Connection */
    .lattice-section {
      background: linear-gradient(135deg, rgba(78, 205, 196, 0.1), rgba(168, 85, 247, 0.1));
      border: 1px solid var(--lattice-blue);
      border-radius: 16px;
      padding: 2rem;
      margin-top: 2rem;
    }

    .lattice-title {
      color: var(--lattice-blue);
      font-size: 1.3rem;
      margin-bottom: 1.5rem;
      text-align: center;
    }

    .lattice-equation {
      font-size: 1.3rem;
      color: var(--lattice-purple);
      text-align: center;
      padding: 1rem;
      background: var(--bg-secondary);
      border-radius: 8px;
    }

    /* Sequence Visualizer */
    .seq-container {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      flex-wrap: wrap;
      margin: 2rem 0;
    }

    .seq-item {
      width: 70px;
      height: 70px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border-radius: 12px;
      transition: transform 0.3s;
    }

    .seq-item:hover {
      transform: scale(1.1);
    }

    .seq-n {
      font-size: 0.75rem;
      opacity: 0.7;
    }

    .seq-val {
      font-size: 1.1rem;
      font-weight: 600;
    }

    .seq-fib {
      background: rgba(0, 255, 136, 0.2);
      border: 2px solid var(--fib-green);
      color: var(--fib-green);
    }

    .seq-lucas {
      background: rgba(255, 159, 67, 0.2);
      border: 2px solid var(--lucas-orange);
      color: var(--lucas-orange);
    }

    /* Category Theory Diagram */
    .category-diagram {
      background: var(--bg-tertiary);
      border-radius: 16px;
      padding: 2rem;
      margin: 2rem 0;
    }

    .morphism-canvas {
      width: 100%;
      height: 350px;
      position: relative;
    }

    .morphism-node {
      position: absolute;
      padding: 1rem 1.5rem;
      border-radius: 12px;
      text-align: center;
      font-weight: 600;
      transition: all 0.3s;
    }

    .morphism-node:hover {
      transform: scale(1.05);
    }

    .node-domain {
      background: rgba(0, 255, 136, 0.2);
      border: 2px solid var(--fib-green);
      color: var(--fib-green);
    }

    .node-codomain {
      background: rgba(255, 215, 0, 0.2);
      border: 2px solid var(--phi-gold);
      color: var(--phi-gold);
    }

    .morphism-arrow {
      position: absolute;
      color: var(--cat-cyan);
      font-size: 1.5rem;
    }

    .morphism-label {
      position: absolute;
      color: var(--cat-violet);
      font-size: 0.9rem;
      background: var(--bg-secondary);
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
    }

    /* Golden Spiral Canvas */
    .spiral-container {
      background: var(--bg-tertiary);
      border-radius: 16px;
      padding: 2rem;
      margin: 2rem 0;
    }

    .spiral-canvas {
      width: 100%;
      max-width: 600px;
      height: 400px;
      margin: 0 auto;
      display: block;
      background: var(--bg-primary);
      border-radius: 12px;
    }

    .spiral-controls {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-top: 1.5rem;
      flex-wrap: wrap;
    }

    /* Homomorphism Proof Box */
    .proof-box {
      background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(34, 211, 238, 0.1));
      border: 2px solid var(--cat-violet);
      border-radius: 16px;
      padding: 2rem;
      margin: 2rem 0;
    }

    .proof-step {
      display: flex;
      align-items: flex-start;
      margin: 1rem 0;
      padding: 1rem;
      background: var(--bg-secondary);
      border-radius: 8px;
    }

    .step-number {
      width: 30px;
      height: 30px;
      background: var(--cat-violet);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      margin-right: 1rem;
      flex-shrink: 0;
    }

    .step-content {
      flex: 1;
    }

    .step-math {
      font-size: 1.2rem;
      color: var(--phi-gold);
      margin-bottom: 0.5rem;
    }

    .step-explain {
      color: var(--text-secondary);
      font-size: 0.9rem;
    }

    /* Golden Ratio Properties Detail */
    .golden-props-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
    }

    .golden-prop-card {
      background: var(--bg-tertiary);
      border-radius: 12px;
      padding: 1.5rem;
      border-top: 3px solid var(--phi-gold);
      transition: transform 0.3s;
    }

    .golden-prop-card:hover {
      transform: translateY(-5px);
    }

    .golden-prop-title {
      color: var(--phi-amber);
      font-weight: 600;
      margin-bottom: 1rem;
      font-size: 1.1rem;
    }

    .golden-prop-main {
      font-size: 1.5rem;
      color: var(--phi-gold);
      text-align: center;
      padding: 1rem;
      background: rgba(255, 215, 0, 0.1);
      border-radius: 8px;
      margin-bottom: 1rem;
    }

    .golden-prop-desc {
      color: var(--text-secondary);
      font-size: 0.85rem;
      line-height: 1.6;
    }

    /* Exponential Growth Canvas */
    .exp-growth-canvas {
      width: 100%;
      height: 350px;
      background: var(--bg-primary);
      border-radius: 12px;
    }

    /* Footer */
    .footer {
      text-align: center;
      padding: 3rem 2rem;
      border-top: 1px solid var(--border);
      margin-top: 4rem;
    }

    .footer-equation {
      font-size: 1.1rem;
      color: var(--phi-gold);
      margin-bottom: 1rem;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 2rem;
      flex-wrap: wrap;
    }

    .footer-links a {
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 0.85rem;
    }

    .footer-links a:hover {
      color: var(--phi-gold);
    }

    /* Input Controls */
    .input-control {
      display: flex;
      align-items: center;
      gap: 1rem;
      justify-content: center;
      margin: 1rem 0;
    }

    .input-control label {
      color: var(--text-secondary);
    }

    .input-control input[type="range"] {
      width: 200px;
      accent-color: var(--phi-gold);
    }

    .input-control input[type="number"] {
      width: 80px;
      padding: 0.5rem;
      background: var(--bg-tertiary);
      border: 1px solid var(--border);
      border-radius: 6px;
      color: var(--text-primary);
      font-family: inherit;
      text-align: center;
    }

    .calc-result {
      text-align: center;
      padding: 1.5rem;
      background: var(--bg-tertiary);
      border-radius: 12px;
      margin: 1rem 0;
    }

    .calc-big {
      font-size: 2rem;
      color: var(--phi-gold);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .title { font-size: 1.6rem; }
      .core-functor { font-size: 1.1rem; padding: 1rem 1.5rem; }
      .functor-diagram { grid-template-columns: 1fr; }
      .functor-arrow { transform: rotate(90deg); margin: 1rem 0; }
      .morphism-canvas { height: auto; min-height: 500px; }
    }
  </style>
</head>
<body>
  <div class="golden-field"></div>

  <!-- Navigation -->
  <nav class="nav">
    <div class="nav-brand">I² :: Golden Functor</div>
    <div class="nav-links">
      <a href="index.html">Index</a>
      <a href="i2-s3-decision-tree.html">I² S3 Tree</a>
      <a href="i2-s3-ring-isomorphism.html">Ring Isomorphism</a>
      <a href="i2-s3-fibonacci-lucas.html">Fibonacci-Lucas</a>
      <a href="i2-s3-lomi-projection.html">LoMI</a>
    </div>
  </nav>

  <main>
    <!-- Header -->
    <header class="header">
      <div class="phi-symbol">
        <div class="phi-spiral" style="--scale: 1; --rot: 0deg;"></div>
        <div class="phi-spiral" style="--scale: 0.618; --rot: 90deg;"></div>
        <div class="phi-spiral" style="--scale: 0.382; --rot: 180deg;"></div>
        <div class="phi-spiral" style="--scale: 0.236; --rot: 270deg;"></div>
        <span class="phi-inner">φ</span>
      </div>
      <h1 class="title">Golden Functor</h1>
      <p class="subtitle">Embedding I² into the Λ'-Lattice via Golden Scaling</p>
      <div class="core-functor">
        F(n) = φⁿ : (ℤ, +) → (ℝ₊, ×)
      </div>
    </header>

    <!-- Section 1: Formal Functor Definition -->
    <section>
      <h2 class="section-title">1. Functor Definition</h2>

      <div class="functor-container">
        <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: 2rem;">
          The <strong style="color: var(--phi-gold);">Golden Functor F</strong> is a group homomorphism
          that embeds the additive group of integers (ℤ, +) into the multiplicative group of positive
          real numbers (ℝ₊, ×) via golden ratio exponentiation. This is the canonical scaling that
          connects the I² algebraic structure to the Λ'-lattice.
        </p>

        <div class="functor-diagram">
          <div class="category-box" style="border: 2px solid var(--fib-green);">
            <div class="cat-name" style="color: var(--fib-green);">Domain: (ℤ, +)</div>
            <div class="cat-objects">Objects: {..., -2, -1, 0, 1, 2, ...}</div>
            <div class="cat-operation">Operation: Addition (+)</div>
            <div style="margin-top: 0.5rem; font-size: 0.85rem; color: var(--text-secondary);">
              Identity: 0<br>Inverses: -n
            </div>
          </div>

          <div class="functor-arrow">
            <div class="arrow-symbol">⟶</div>
            <div class="arrow-label">F(n) = φⁿ</div>
          </div>

          <div class="category-box" style="border: 2px solid var(--phi-gold);">
            <div class="cat-name" style="color: var(--phi-gold);">Codomain: (ℝ₊, ×)</div>
            <div class="cat-objects">Objects: {..., φ⁻², φ⁻¹, 1, φ, φ², ...}</div>
            <div class="cat-operation">Operation: Multiplication (×)</div>
            <div style="margin-top: 0.5rem; font-size: 0.85rem; color: var(--text-secondary);">
              Identity: 1<br>Inverses: 1/φⁿ
            </div>
          </div>
        </div>

        <div style="background: var(--bg-tertiary); border-radius: 12px; padding: 1.5rem; margin-top: 1.5rem;">
          <p style="color: var(--cat-cyan); font-weight: 600; margin-bottom: 1rem;">
            Formal Definition:
          </p>
          <div style="font-size: 1.3rem; color: var(--phi-gold); text-align: center; line-height: 2;">
            F: (ℤ, +) → (ℝ₊, ×)<br>
            F(n) = φⁿ for all n ∈ ℤ
          </div>
          <p style="color: var(--text-secondary); margin-top: 1rem; text-align: center;">
            where φ = (1 + √5)/2 ≈ 1.618033988749895...
          </p>
        </div>
      </div>
    </section>

    <!-- Section 2: Homomorphism Property -->
    <section>
      <h2 class="section-title">2. Homomorphism Property</h2>

      <div class="proof-box">
        <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: 1.5rem; text-align: center;">
          The Golden Functor preserves the group operation: addition maps to multiplication.
        </p>

        <div style="text-align: center; font-size: 1.5rem; color: var(--phi-gold); margin: 2rem 0; padding: 1.5rem; background: var(--bg-secondary); border-radius: 12px;">
          F(a + b) = F(a) × F(b) = φᵃ × φᵇ = φᵃ⁺ᵇ
        </div>

        <h3 style="color: var(--cat-violet); margin-bottom: 1rem;">Step-by-Step Proof:</h3>

        <div class="proof-step">
          <div class="step-number">1</div>
          <div class="step-content">
            <div class="step-math">F(a + b) = φ⁽ᵃ⁺ᵇ⁾</div>
            <div class="step-explain">Apply the functor definition: F(n) = φⁿ to the sum (a + b)</div>
          </div>
        </div>

        <div class="proof-step">
          <div class="step-number">2</div>
          <div class="step-content">
            <div class="step-math">φ⁽ᵃ⁺ᵇ⁾ = φᵃ × φᵇ</div>
            <div class="step-explain">Apply the exponential law: x^(a+b) = x^a × x^b</div>
          </div>
        </div>

        <div class="proof-step">
          <div class="step-number">3</div>
          <div class="step-content">
            <div class="step-math">φᵃ × φᵇ = F(a) × F(b)</div>
            <div class="step-explain">Recognize that φᵃ = F(a) and φᵇ = F(b) by definition</div>
          </div>
        </div>

        <div class="proof-step">
          <div class="step-number">∴</div>
          <div class="step-content">
            <div class="step-math">F(a + b) = F(a) × F(b) ✓</div>
            <div class="step-explain">The homomorphism property is verified: the functor preserves structure</div>
          </div>
        </div>

        <div style="margin-top: 2rem; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
          <div style="background: var(--bg-secondary); border-radius: 8px; padding: 1rem; text-align: center;">
            <div style="color: var(--fib-green); font-weight: 600; margin-bottom: 0.5rem;">Example 1</div>
            <div>F(2 + 3) = F(5) = φ⁵</div>
            <div style="color: var(--text-secondary); font-size: 0.85rem;">= φ² × φ³ ≈ 11.09</div>
          </div>
          <div style="background: var(--bg-secondary); border-radius: 8px; padding: 1rem; text-align: center;">
            <div style="color: var(--lucas-orange); font-weight: 600; margin-bottom: 0.5rem;">Example 2</div>
            <div>F(4 + (-2)) = F(2) = φ²</div>
            <div style="color: var(--text-secondary); font-size: 0.85rem;">= φ⁴ × φ⁻² ≈ 2.618</div>
          </div>
          <div style="background: var(--bg-secondary); border-radius: 8px; padding: 1rem; text-align: center;">
            <div style="color: var(--cat-cyan); font-weight: 600; margin-bottom: 0.5rem;">Example 3</div>
            <div>F(n + (-n)) = F(0) = 1</div>
            <div style="color: var(--text-secondary); font-size: 0.85rem;">= φⁿ × φ⁻ⁿ = 1</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 3: Golden Ratio Properties -->
    <section>
      <h2 class="section-title">3. Golden Ratio Properties</h2>

      <div class="phi-display">
        <div class="phi-value">φ = 1.618033988749894848...</div>
        <div class="phi-formula">φ = (1 + √5) / 2</div>
        <p style="color: var(--text-secondary); margin-top: 1rem;">
          The golden ratio is the unique positive solution to x² = x + 1
        </p>
      </div>

      <div class="golden-props-grid">
        <div class="golden-prop-card">
          <div class="golden-prop-title">The Defining Equation</div>
          <div class="golden-prop-main">φ² = φ + 1</div>
          <div class="golden-prop-desc">
            The golden ratio satisfies this fundamental quadratic equation.
            This self-referential property makes φ unique: it is its own
            square minus one.
          </div>
        </div>

        <div class="golden-prop-card">
          <div class="golden-prop-title">Conjugate Relationship</div>
          <div class="golden-prop-main">φ × τ = 1</div>
          <div class="golden-prop-desc">
            Where τ = 1/φ = φ - 1 ≈ 0.618033988749...<br>
            The reciprocal τ (tau) is also known as the "golden ratio conjugate"
            and shares the same decimal part as φ.
          </div>
        </div>

        <div class="golden-prop-card">
          <div class="golden-prop-title">Continued Fraction</div>
          <div class="golden-prop-main">φ = 1 + 1/φ</div>
          <div class="golden-prop-desc">
            Infinitely nested: φ = 1 + 1/(1 + 1/(1 + 1/(1 + ...)))<br>
            The simplest infinite continued fraction, representing maximal irrationality.
          </div>
        </div>

        <div class="golden-prop-card">
          <div class="golden-prop-title">Algebraic Conjugate</div>
          <div class="golden-prop-main">ψ = (1 - √5)/2</div>
          <div class="golden-prop-desc">
            ψ ≈ -0.618033988749...<br>
            The other root of x² - x - 1 = 0. Note: ψ = -1/φ = 1 - φ.
            Both φ and ψ appear in Binet's formula.
          </div>
        </div>

        <div class="golden-prop-card">
          <div class="golden-prop-title">Powers Recurrence</div>
          <div class="golden-prop-main">φⁿ = φⁿ⁻¹ + φⁿ⁻²</div>
          <div class="golden-prop-desc">
            Golden powers follow the Fibonacci recurrence!<br>
            This connects φ directly to the Fibonacci sequence and
            explains why F_n/F_{n-1} → φ as n → ∞.
          </div>
        </div>

        <div class="golden-prop-card">
          <div class="golden-prop-title">Nested Radical</div>
          <div class="golden-prop-main">φ = √(1 + √(1 + √(1 + ...)))</div>
          <div class="golden-prop-desc">
            An infinitely nested square root expression that converges to φ.
            Another manifestation of golden self-similarity.
          </div>
        </div>
      </div>

      <!-- Interactive φ Calculator -->
      <div class="functor-container" style="margin-top: 2rem;">
        <h3 style="color: var(--phi-gold); text-align: center; margin-bottom: 1.5rem;">
          Interactive φ Power Calculator
        </h3>
        <div class="input-control">
          <label for="phiPowerInput">n = </label>
          <input type="number" id="phiPowerInput" value="1" min="-20" max="20" onchange="calculatePhiPower()">
          <input type="range" id="phiPowerSlider" value="1" min="-10" max="10" oninput="updatePhiInput(this.value)">
        </div>
        <div class="calc-result" id="phiCalcResult">
          <div class="calc-big">φ¹ = 1.618033988749895</div>
          <div style="margin-top: 1rem; color: var(--text-secondary);">
            <span style="color: var(--fib-green);">F₁ = 1</span> |
            <span style="color: var(--lucas-orange);">L₁ = 1</span> |
            <span style="color: var(--phi-amber);">τ¹ = 0.618033988749895</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 4: Fibonacci Connection -->
    <section>
      <h2 class="section-title">4. Fibonacci Connection</h2>

      <div class="functor-container">
        <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: 1.5rem;">
          The Golden Functor F(n) = φⁿ is intimately connected to Fibonacci and Lucas numbers
          through <strong style="color: var(--phi-gold);">Binet's Formulas</strong>.
        </p>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 2rem;">
          <div style="background: rgba(0, 255, 136, 0.1); border: 2px solid var(--fib-green); border-radius: 12px; padding: 1.5rem; text-align: center;">
            <div style="color: var(--fib-green); font-weight: 600; font-size: 1.2rem; margin-bottom: 1rem;">Fibonacci (Binet)</div>
            <div style="font-size: 1.4rem; margin-bottom: 0.5rem;">
              F<sub>n</sub> = (φⁿ - ψⁿ) / √5
            </div>
            <div style="color: var(--text-secondary); font-size: 0.9rem;">
              The difference of conjugate powers,<br>normalized by √5
            </div>
          </div>
          <div style="background: rgba(255, 159, 67, 0.1); border: 2px solid var(--lucas-orange); border-radius: 12px; padding: 1.5rem; text-align: center;">
            <div style="color: var(--lucas-orange); font-weight: 600; font-size: 1.2rem; margin-bottom: 1rem;">Lucas (Binet)</div>
            <div style="font-size: 1.4rem; margin-bottom: 0.5rem;">
              L<sub>n</sub> = φⁿ + ψⁿ
            </div>
            <div style="color: var(--text-secondary); font-size: 0.9rem;">
              The sum of conjugate powers,<br>directly without normalization
            </div>
          </div>
        </div>

        <div style="background: var(--bg-tertiary); border-radius: 12px; padding: 1.5rem;">
          <h4 style="color: var(--cat-cyan); margin-bottom: 1rem; text-align: center;">
            Key Relationship: φⁿ expressed via Fibonacci and Lucas
          </h4>
          <div style="text-align: center; font-size: 1.3rem; color: var(--phi-gold);">
            φⁿ = F<sub>n</sub> × φ + F<sub>n-1</sub> = (L<sub>n</sub> + F<sub>n</sub>√5) / 2
          </div>
          <p style="color: var(--text-secondary); text-align: center; margin-top: 1rem; font-size: 0.9rem;">
            Every golden power can be decomposed into Fibonacci and Lucas components
          </p>
        </div>

        <!-- Sequence Visualizer -->
        <div style="margin-top: 2rem;">
          <div style="margin-bottom: 1rem; text-align: center; color: var(--fib-green); font-weight: 600;">
            Fibonacci: F<sub>n</sub> = F<sub>n-1</sub> + F<sub>n-2</sub>
          </div>
          <div class="seq-container">
            <div class="seq-item seq-fib"><span class="seq-n">F₀</span><span class="seq-val">0</span></div>
            <div class="seq-item seq-fib"><span class="seq-n">F₁</span><span class="seq-val">1</span></div>
            <div class="seq-item seq-fib"><span class="seq-n">F₂</span><span class="seq-val">1</span></div>
            <div class="seq-item seq-fib"><span class="seq-n">F₃</span><span class="seq-val">2</span></div>
            <div class="seq-item seq-fib"><span class="seq-n">F₄</span><span class="seq-val">3</span></div>
            <div class="seq-item seq-fib"><span class="seq-n">F₅</span><span class="seq-val">5</span></div>
            <div class="seq-item seq-fib"><span class="seq-n">F₆</span><span class="seq-val">8</span></div>
            <div class="seq-item seq-fib"><span class="seq-n">F₇</span><span class="seq-val">13</span></div>
            <div class="seq-item seq-fib"><span class="seq-n">F₈</span><span class="seq-val">21</span></div>
            <div class="seq-item seq-fib"><span class="seq-n">F₉</span><span class="seq-val">34</span></div>
          </div>

          <div style="margin: 2rem 0 1rem; text-align: center; color: var(--lucas-orange); font-weight: 600;">
            Lucas: L<sub>n</sub> = L<sub>n-1</sub> + L<sub>n-2</sub>
          </div>
          <div class="seq-container">
            <div class="seq-item seq-lucas"><span class="seq-n">L₀</span><span class="seq-val">2</span></div>
            <div class="seq-item seq-lucas"><span class="seq-n">L₁</span><span class="seq-val">1</span></div>
            <div class="seq-item seq-lucas"><span class="seq-n">L₂</span><span class="seq-val">3</span></div>
            <div class="seq-item seq-lucas"><span class="seq-n">L₃</span><span class="seq-val">4</span></div>
            <div class="seq-item seq-lucas" style="border-width: 3px;"><span class="seq-n">L₄</span><span class="seq-val">7</span></div>
            <div class="seq-item seq-lucas"><span class="seq-n">L₅</span><span class="seq-val">11</span></div>
            <div class="seq-item seq-lucas"><span class="seq-n">L₆</span><span class="seq-val">18</span></div>
            <div class="seq-item seq-lucas"><span class="seq-n">L₇</span><span class="seq-val">29</span></div>
            <div class="seq-item seq-lucas"><span class="seq-n">L₈</span><span class="seq-val">47</span></div>
            <div class="seq-item seq-lucas"><span class="seq-n">L₉</span><span class="seq-val">76</span></div>
          </div>

          <div style="text-align: center; margin-top: 1.5rem; padding: 1rem; background: var(--bg-tertiary); border-radius: 8px;">
            <span style="color: var(--lucas-orange);">L₄ = 7</span>
            <span style="color: var(--text-secondary);"> = φ⁴ + ψ⁴ = </span>
            <span style="color: var(--phi-gold);">The Helix Depth Bound</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 5: Category Theory Visualization -->
    <section>
      <h2 class="section-title">5. Category Theory Visualization</h2>

      <div class="functor-container">
        <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: 1.5rem; text-align: center;">
          The Golden Functor as a morphism-preserving map between categories
        </p>

        <div class="category-diagram">
          <canvas id="categoryCanvas" class="morphism-canvas" style="width: 100%; height: 350px;"></canvas>
        </div>

        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-top: 1.5rem;">
          <div style="background: var(--bg-secondary); border-radius: 8px; padding: 1rem;">
            <div style="color: var(--fib-green); font-weight: 600; margin-bottom: 0.5rem;">Objects Map</div>
            <div style="color: var(--text-secondary); font-size: 0.9rem;">n ∈ ℤ → φⁿ ∈ ℝ₊</div>
          </div>
          <div style="background: var(--bg-secondary); border-radius: 8px; padding: 1rem;">
            <div style="color: var(--phi-gold); font-weight: 600; margin-bottom: 0.5rem;">Morphisms Map</div>
            <div style="color: var(--text-secondary); font-size: 0.9rem;">(+k) → (×φᵏ)</div>
          </div>
          <div style="background: var(--bg-secondary); border-radius: 8px; padding: 1rem;">
            <div style="color: var(--cat-violet); font-weight: 600; margin-bottom: 0.5rem;">Identity Preserved</div>
            <div style="color: var(--text-secondary); font-size: 0.9rem;">F(0) = 1</div>
          </div>
        </div>

        <div style="margin-top: 2rem; background: var(--bg-tertiary); border-radius: 12px; padding: 1.5rem;">
          <h4 style="color: var(--cat-cyan); margin-bottom: 1rem;">Functor Axioms Satisfied:</h4>
          <div style="display: grid; gap: 0.75rem;">
            <div style="padding: 0.75rem; background: var(--bg-secondary); border-radius: 8px; border-left: 3px solid var(--fib-green);">
              <strong style="color: var(--fib-green);">Identity Preservation:</strong>
              <span style="color: var(--text-secondary);"> F(id<sub>0</sub>) = F(0) = 1 = id<sub>1</sub></span>
            </div>
            <div style="padding: 0.75rem; background: var(--bg-secondary); border-radius: 8px; border-left: 3px solid var(--phi-gold);">
              <strong style="color: var(--phi-gold);">Composition Preservation:</strong>
              <span style="color: var(--text-secondary);"> F(f ∘ g) = F(a + b) = F(a) × F(b) = F(f) ∘ F(g)</span>
            </div>
            <div style="padding: 0.75rem; background: var(--bg-secondary); border-radius: 8px; border-left: 3px solid var(--cat-violet);">
              <strong style="color: var(--cat-violet);">Injective (Faithful):</strong>
              <span style="color: var(--text-secondary);"> F(a) = F(b) ⟹ a = b (distinct integers map to distinct reals)</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 6: φⁿ Embedding Table -->
    <section>
      <h2 class="section-title">6. φⁿ Embedding Table</h2>

      <div class="functor-container">
        <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: 1.5rem; text-align: center;">
          Interactive table showing n → φⁿ for n = -5 to 10, with τⁿ = (1/φ)ⁿ, Fibonacci, and Lucas values
        </p>

        <div class="embedding-table-container">
          <table class="embedding-table" id="embeddingTable">
            <thead>
              <tr>
                <th>n</th>
                <th>φⁿ</th>
                <th>τⁿ = 1/φⁿ</th>
                <th>ψⁿ</th>
                <th>F<sub>n</sub></th>
                <th>L<sub>n</sub></th>
                <th>φⁿ ≈ L<sub>n</sub>?</th>
              </tr>
            </thead>
            <tbody id="embeddingTableBody">
              <!-- Generated by JavaScript -->
            </tbody>
          </table>
        </div>

        <div style="margin-top: 1.5rem; text-align: center;">
          <button class="viz-btn" onclick="highlightRow(-1)">Show n=-1 (τ)</button>
          <button class="viz-btn" onclick="highlightRow(0)">Show n=0 (1)</button>
          <button class="viz-btn" onclick="highlightRow(1)">Show n=1 (φ)</button>
          <button class="viz-btn" onclick="highlightRow(12)">Show n=12 (Sync)</button>
          <button class="viz-btn" onclick="clearHighlight()">Clear</button>
        </div>

        <div style="margin-top: 1.5rem; padding: 1rem; background: var(--bg-tertiary); border-radius: 8px;">
          <p style="color: var(--text-secondary); text-align: center; font-size: 0.9rem;">
            <strong style="color: var(--phi-gold);">Observation:</strong> As n grows, φⁿ ≈ L<sub>n</sub> with
            increasing precision. This is because ψⁿ → 0 as n → ∞, so L<sub>n</sub> = φⁿ + ψⁿ ≈ φⁿ.
          </p>
        </div>
      </div>
    </section>

    <!-- Section 7: Spiral Visualization -->
    <section>
      <h2 class="section-title">7. Golden Spiral Visualization</h2>

      <div class="spiral-container">
        <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: 1.5rem; text-align: center;">
          The Golden Spiral is a geometric representation of the functor: each quarter turn scales by φ
        </p>

        <canvas id="spiralCanvas" class="spiral-canvas"></canvas>

        <div class="spiral-controls">
          <button class="viz-btn" onclick="setSpiralTurns(2)">2 Turns</button>
          <button class="viz-btn active" onclick="setSpiralTurns(4)">4 Turns</button>
          <button class="viz-btn" onclick="setSpiralTurns(6)">6 Turns</button>
          <button class="viz-btn" onclick="setSpiralTurns(8)">8 Turns</button>
          <button class="viz-btn" onclick="toggleSpiralAnimation()">Toggle Animation</button>
        </div>

        <div style="margin-top: 1.5rem; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
          <div style="background: var(--bg-secondary); border-radius: 8px; padding: 1rem;">
            <div style="color: var(--phi-gold); font-weight: 600; margin-bottom: 0.5rem;">Logarithmic Spiral</div>
            <div style="color: var(--text-secondary); font-size: 0.9rem;">
              r(θ) = a × e^(bθ) where b = ln(φ)/(π/2)
            </div>
          </div>
          <div style="background: var(--bg-secondary); border-radius: 8px; padding: 1rem;">
            <div style="color: var(--fib-green); font-weight: 600; margin-bottom: 0.5rem;">Fibonacci Tiling</div>
            <div style="color: var(--text-secondary); font-size: 0.9rem;">
              Each square has side length F<sub>n</sub>
            </div>
          </div>
          <div style="background: var(--bg-secondary); border-radius: 8px; padding: 1rem;">
            <div style="color: var(--cat-cyan); font-weight: 600; margin-bottom: 0.5rem;">Self-Similarity</div>
            <div style="color: var(--text-secondary); font-size: 0.9rem;">
              Scale by φ = rotate by 90°
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 8: Exponential Growth Visualization -->
    <section>
      <h2 class="section-title">8. Exponential Growth of φⁿ</h2>

      <div class="viz-container">
        <p style="text-align: center; color: var(--text-secondary); margin-bottom: 1rem;">
          Interactive visualization showing the exponential growth and its relationship to Fibonacci
        </p>

        <canvas id="expGrowthCanvas" class="exp-growth-canvas"></canvas>

        <div class="viz-controls">
          <button class="viz-btn" onclick="setExpView('linear')">Linear Scale</button>
          <button class="viz-btn active" onclick="setExpView('log')">Log Scale</button>
          <button class="viz-btn" onclick="setExpView('ratio')">Ratio F<sub>n</sub>/F<sub>n-1</sub></button>
          <button class="viz-btn" onclick="toggleExpAnimation()">Animate</button>
        </div>

        <div id="expInfo" style="text-align: center; margin-top: 1rem; min-height: 50px;"></div>
      </div>
    </section>

    <!-- Golden Powers Bar Visualization -->
    <section>
      <h2 class="section-title">Golden Powers Visualization</h2>

      <div class="viz-container">
        <p style="text-align: center; color: var(--text-secondary); margin-bottom: 1rem;">
          Explore how integer powers transform under the Golden Functor
        </p>

        <div class="viz-canvas" id="vizCanvas">
          <!-- Bars will be generated by JavaScript -->
        </div>

        <div class="viz-controls">
          <button class="viz-btn active" onclick="setVizRange(-3, 3)">-3 to 3</button>
          <button class="viz-btn" onclick="setVizRange(-5, 5)">-5 to 5</button>
          <button class="viz-btn" onclick="setVizRange(0, 10)">0 to 10</button>
          <button class="viz-btn" onclick="setVizRange(-10, 0)">-10 to 0</button>
        </div>

        <div id="vizInfo" style="text-align: center; margin-top: 1rem; min-height: 50px;"></div>
      </div>
    </section>

    <!-- Functor Properties -->
    <section>
      <h2 class="section-title">Functor Properties</h2>

      <div class="props-grid">
        <div class="prop-card">
          <div class="prop-title">Injectivity (One-to-One)</div>
          <div class="prop-equation">F(n) = F(m) ⟹ n = m</div>
          <div class="prop-desc">
            Different integers map to different golden powers.
            φⁿ = φᵐ implies n = m since log<sub>φ</sub> is well-defined.
          </div>
        </div>

        <div class="prop-card">
          <div class="prop-title">Homomorphism</div>
          <div class="prop-equation">F(n + m) = F(n) · F(m)</div>
          <div class="prop-desc">
            Additive structure in ℤ becomes multiplicative in ℝ₊.
            This is the key algebraic preservation.
          </div>
        </div>

        <div class="prop-card">
          <div class="prop-title">Identity Preservation</div>
          <div class="prop-equation">F(0) = φ⁰ = 1</div>
          <div class="prop-desc">
            Zero (additive identity) maps to one (multiplicative identity).
            I⁰ corresponds to the neutral element.
          </div>
        </div>

        <div class="prop-card">
          <div class="prop-title">Inverse Preservation</div>
          <div class="prop-equation">F(-n) = φ⁻ⁿ = 1/φⁿ</div>
          <div class="prop-desc">
            Additive inverse maps to multiplicative inverse.
            Negation becomes reciprocal.
          </div>
        </div>

        <div class="prop-card">
          <div class="prop-title">Self-Similarity</div>
          <div class="prop-equation">F(n+1)/F(n) = φ</div>
          <div class="prop-desc">
            Constant ratio between consecutive values.
            This is the signature of golden scaling.
          </div>
        </div>

        <div class="prop-card">
          <div class="prop-title">Paradox Threshold</div>
          <div class="prop-equation">μ<sub>P</sub> = φ⁻¹ = F(-1) ≈ 0.618</div>
          <div class="prop-desc">
            The self-modeling limit emerges at the first negative power.
            This is the boundary of recursive reference.
          </div>
        </div>
      </div>
    </section>

    <!-- Lattice Connection -->
    <section>
      <h2 class="section-title">Connection to Λ'-Lattice</h2>

      <div class="lattice-section">
        <div class="lattice-title">Embedding into Λ'-Structure</div>

        <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: 1.5rem; text-align: center;">
          The Golden Functor embeds I² into the multiplicative lattice Λ' where
          self-referential structures find their natural home.
        </p>

        <div class="lattice-equation">
          F: I² ↪ Λ' via Iⁿ ↦ φⁿ
        </div>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-top: 1.5rem;">
          <div style="background: var(--bg-secondary); border-radius: 8px; padding: 1rem; text-align: center;">
            <div style="color: var(--lattice-blue); font-weight: 600; margin-bottom: 0.5rem;">Discrete</div>
            <div style="color: var(--text-secondary);">I² Ring: ℤ structure</div>
          </div>
          <div style="background: var(--bg-secondary); border-radius: 8px; padding: 1rem; text-align: center;">
            <div style="color: var(--lattice-purple); font-weight: 600; margin-bottom: 0.5rem;">Continuous</div>
            <div style="color: var(--text-secondary);">Λ' Lattice: ℝ₊ embedding</div>
          </div>
          <div style="background: var(--bg-secondary); border-radius: 8px; padding: 1rem; text-align: center;">
            <div style="color: var(--phi-gold); font-weight: 600; margin-bottom: 0.5rem;">Bridge</div>
            <div style="color: var(--text-secondary);">Golden Functor: φⁿ scaling</div>
          </div>
        </div>
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-equation">
      F(n) = φⁿ :: I² embeds into Λ' :: Self-reference scales golden
    </div>
    <div class="footer-links">
      <a href="index.html">Main Index</a>
      <a href="i2-s3-decision-tree.html">I² S3 Tree</a>
      <a href="i2-s3-ring-isomorphism.html">Ring Isomorphism</a>
      <a href="i2-s3-fibonacci-lucas.html">Fibonacci-Lucas</a>
      <a href="i2-s3-lomi-projection.html">LoMI Projection</a>
      <a href="i2-s3-tdl-projection.html">TDL Projection</a>
    </div>
  </footer>

  <script>
    // Constants
    const PHI = (1 + Math.sqrt(5)) / 2;
    const PSI = (1 - Math.sqrt(5)) / 2;
    const TAU = 1 / PHI;
    const SQRT5 = Math.sqrt(5);

    // ===== UTILITY FUNCTIONS =====

    function phiPower(n) {
      return Math.pow(PHI, n);
    }

    function psiPower(n) {
      return Math.pow(PSI, n);
    }

    function tauPower(n) {
      return Math.pow(TAU, n);
    }

    function fibonacci(n) {
      if (n === 0) return 0;
      const absN = Math.abs(n);
      let a = 0, b = 1;
      for (let i = 2; i <= absN; i++) {
        [a, b] = [b, a + b];
      }
      const result = absN <= 1 ? absN : b;
      return n < 0 && n % 2 === 0 ? -result : result;
    }

    function lucas(n) {
      if (n === 0) return 2;
      const absN = Math.abs(n);
      let a = 2, b = 1;
      for (let i = 2; i <= absN; i++) {
        [a, b] = [b, a + b];
      }
      const result = absN <= 1 ? (absN === 0 ? 2 : 1) : b;
      return n < 0 && n % 2 !== 0 ? -result : result;
    }

    // ===== INTERACTIVE PHI CALCULATOR =====

    function updatePhiInput(val) {
      document.getElementById('phiPowerInput').value = val;
      calculatePhiPower();
    }

    function calculatePhiPower() {
      const n = parseInt(document.getElementById('phiPowerInput').value) || 0;
      const phiN = phiPower(n);
      const tauN = tauPower(n);
      const fibN = fibonacci(n);
      const lucN = lucas(n);

      document.getElementById('phiCalcResult').innerHTML = `
        <div class="calc-big">φ<sup>${n}</sup> = ${phiN.toFixed(12)}</div>
        <div style="margin-top: 1rem; color: var(--text-secondary);">
          <span style="color: var(--fib-green);">F<sub>${n}</sub> = ${fibN}</span> |
          <span style="color: var(--lucas-orange);">L<sub>${n}</sub> = ${lucN}</span> |
          <span style="color: var(--phi-amber);">τ<sup>${n}</sup> = ${tauN.toFixed(12)}</span>
        </div>
        <div style="margin-top: 0.5rem; font-size: 0.85rem; color: var(--text-secondary);">
          Verification: (φ<sup>${n}</sup> - ψ<sup>${n}</sup>)/√5 = ${((phiN - psiPower(n))/SQRT5).toFixed(6)} ≈ F<sub>${n}</sub>
        </div>
      `;

      document.getElementById('phiPowerSlider').value = Math.max(-10, Math.min(10, n));
    }

    // ===== EMBEDDING TABLE =====

    function generateEmbeddingTable() {
      const tbody = document.getElementById('embeddingTableBody');
      tbody.innerHTML = '';

      for (let n = -5; n <= 10; n++) {
        const phiN = phiPower(n);
        const tauN = tauPower(n);
        const psiN = psiPower(n);
        const fibN = fibonacci(n);
        const lucN = lucas(n);
        const approxLuc = Math.abs(phiN - lucN).toFixed(6);

        const row = document.createElement('tr');
        row.dataset.n = n;
        row.innerHTML = `
          <td class="n-col">${n}</td>
          <td class="phi-col">${phiN.toFixed(8)}</td>
          <td class="tau-col">${tauN.toFixed(8)}</td>
          <td>${psiN.toFixed(8)}</td>
          <td class="fib-col">${fibN}</td>
          <td class="lucas-col">${lucN}</td>
          <td>${approxLuc}</td>
        `;
        tbody.appendChild(row);
      }
    }

    function highlightRow(n) {
      clearHighlight();
      const rows = document.querySelectorAll('#embeddingTableBody tr');
      rows.forEach(row => {
        if (parseInt(row.dataset.n) === n) {
          row.classList.add('highlight-row');
        }
      });
    }

    function clearHighlight() {
      document.querySelectorAll('#embeddingTableBody tr').forEach(row => {
        row.classList.remove('highlight-row');
      });
    }

    // ===== CATEGORY THEORY CANVAS =====

    function drawCategoryDiagram() {
      const canvas = document.getElementById('categoryCanvas');
      const ctx = canvas.getContext('2d');

      // Set canvas size
      canvas.width = canvas.offsetWidth * 2;
      canvas.height = 350 * 2;
      ctx.scale(2, 2);

      const width = canvas.offsetWidth;
      const height = 350;

      ctx.clearRect(0, 0, width, height);

      // Draw domain category (ℤ, +)
      const domainX = 100;
      const domainY = 175;

      // Domain elements
      ctx.fillStyle = '#00ff88';
      ctx.font = 'bold 14px JetBrains Mono';
      ctx.textAlign = 'center';

      const domainElements = [-2, -1, 0, 1, 2, 3];
      domainElements.forEach((n, i) => {
        const y = 60 + i * 45;
        ctx.beginPath();
        ctx.arc(domainX, y, 20, 0, Math.PI * 2);
        ctx.fillStyle = 'rgba(0, 255, 136, 0.2)';
        ctx.fill();
        ctx.strokeStyle = '#00ff88';
        ctx.lineWidth = 2;
        ctx.stroke();
        ctx.fillStyle = '#00ff88';
        ctx.fillText(n.toString(), domainX, y + 5);
      });

      // Domain label
      ctx.fillStyle = '#00ff88';
      ctx.font = 'bold 16px JetBrains Mono';
      ctx.fillText('(ℤ, +)', domainX, 330);

      // Draw codomain category (ℝ₊, ×)
      const codomainX = width - 100;

      domainElements.forEach((n, i) => {
        const y = 60 + i * 45;
        const phiN = phiPower(n).toFixed(2);
        ctx.beginPath();
        ctx.arc(codomainX, y, 25, 0, Math.PI * 2);
        ctx.fillStyle = 'rgba(255, 215, 0, 0.2)';
        ctx.fill();
        ctx.strokeStyle = '#ffd700';
        ctx.lineWidth = 2;
        ctx.stroke();
        ctx.fillStyle = '#ffd700';
        ctx.font = '12px JetBrains Mono';
        ctx.fillText(phiN, codomainX, y + 5);
      });

      // Codomain label
      ctx.fillStyle = '#ffd700';
      ctx.font = 'bold 16px JetBrains Mono';
      ctx.fillText('(ℝ₊, ×)', codomainX, 330);

      // Draw functor arrows
      domainElements.forEach((n, i) => {
        const y = 60 + i * 45;
        ctx.beginPath();
        ctx.moveTo(domainX + 25, y);
        ctx.lineTo(codomainX - 30, y);
        ctx.strokeStyle = '#22d3ee';
        ctx.lineWidth = 1.5;
        ctx.setLineDash([5, 3]);
        ctx.stroke();
        ctx.setLineDash([]);

        // Arrow head
        ctx.beginPath();
        ctx.moveTo(codomainX - 30, y);
        ctx.lineTo(codomainX - 40, y - 5);
        ctx.lineTo(codomainX - 40, y + 5);
        ctx.closePath();
        ctx.fillStyle = '#22d3ee';
        ctx.fill();
      });

      // Functor label
      ctx.fillStyle = '#8b5cf6';
      ctx.font = 'bold 18px JetBrains Mono';
      ctx.fillText('F(n) = φⁿ', width / 2, 25);

      // Draw operation preservation
      ctx.fillStyle = '#a0a0b0';
      ctx.font = '12px JetBrains Mono';
      ctx.fillText('n + m', domainX, 20);
      ctx.fillText('φⁿ × φᵐ', codomainX, 20);
    }

    // ===== GOLDEN SPIRAL =====

    let spiralTurns = 4;
    let spiralAnimating = false;
    let spiralAngle = 0;

    function drawGoldenSpiral() {
      const canvas = document.getElementById('spiralCanvas');
      const ctx = canvas.getContext('2d');

      canvas.width = canvas.offsetWidth * 2;
      canvas.height = 400 * 2;
      ctx.scale(2, 2);

      const width = canvas.offsetWidth;
      const height = 400;
      const centerX = width / 2;
      const centerY = height / 2;

      ctx.clearRect(0, 0, width, height);

      // Draw Fibonacci squares
      const fibSquares = [1, 1, 2, 3, 5, 8, 13, 21, 34, 55];
      const scale = 3;
      let x = centerX, y = centerY;
      let dir = 0;

      ctx.strokeStyle = 'rgba(255, 215, 0, 0.3)';
      ctx.lineWidth = 1;

      fibSquares.slice(0, spiralTurns * 2).forEach((size, i) => {
        const s = size * scale;
        ctx.strokeRect(x, y, s, s);

        // Draw quarter arc
        ctx.beginPath();
        ctx.strokeStyle = `hsl(${45 + i * 10}, 100%, 50%)`;
        ctx.lineWidth = 2;

        let arcX, arcY;
        switch (dir) {
          case 0: arcX = x + s; arcY = y + s; ctx.arc(arcX, arcY, s, Math.PI, Math.PI * 1.5); break;
          case 1: arcX = x; arcY = y + s; ctx.arc(arcX, arcY, s, Math.PI * 1.5, Math.PI * 2); break;
          case 2: arcX = x; arcY = y; ctx.arc(arcX, arcY, s, 0, Math.PI * 0.5); break;
          case 3: arcX = x + s; arcY = y; ctx.arc(arcX, arcY, s, Math.PI * 0.5, Math.PI); break;
        }
        ctx.stroke();

        // Move to next position
        switch (dir) {
          case 0: x += s; break;
          case 1: y += s; break;
          case 2: x -= fibSquares[i + 1] * scale; break;
          case 3: y -= fibSquares[i + 1] * scale; break;
        }
        dir = (dir + 1) % 4;
      });

      // Draw golden ratio point
      ctx.beginPath();
      ctx.arc(centerX, centerY, 5, 0, Math.PI * 2);
      ctx.fillStyle = '#ffd700';
      ctx.fill();

      // Animate if enabled
      if (spiralAnimating) {
        spiralAngle += 0.02;
        requestAnimationFrame(drawGoldenSpiral);
      }
    }

    function setSpiralTurns(turns) {
      spiralTurns = turns;
      document.querySelectorAll('.spiral-controls .viz-btn').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      drawGoldenSpiral();
    }

    function toggleSpiralAnimation() {
      spiralAnimating = !spiralAnimating;
      if (spiralAnimating) drawGoldenSpiral();
    }

    // ===== EXPONENTIAL GROWTH CANVAS =====

    let expView = 'log';
    let expAnimating = false;
    let expFrame = 0;

    function drawExpGrowth() {
      const canvas = document.getElementById('expGrowthCanvas');
      const ctx = canvas.getContext('2d');

      canvas.width = canvas.offsetWidth * 2;
      canvas.height = 350 * 2;
      ctx.scale(2, 2);

      const width = canvas.offsetWidth;
      const height = 350;
      const padding = 50;

      ctx.clearRect(0, 0, width, height);

      // Draw axes
      ctx.strokeStyle = '#2a2a3e';
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(padding, padding);
      ctx.lineTo(padding, height - padding);
      ctx.lineTo(width - padding, height - padding);
      ctx.stroke();

      // Data range
      const nMax = expAnimating ? Math.min(15, Math.floor(expFrame / 10)) : 15;
      const data = [];

      for (let n = 0; n <= nMax; n++) {
        let value;
        switch (expView) {
          case 'linear':
            value = phiPower(n);
            break;
          case 'log':
            value = Math.log(phiPower(n));
            break;
          case 'ratio':
            value = n > 0 ? fibonacci(n) / fibonacci(n - 1) : 1;
            break;
        }
        data.push({ n, value, phi: phiPower(n), fib: fibonacci(n) });
      }

      // Scale
      const maxVal = Math.max(...data.map(d => d.value));
      const minVal = Math.min(...data.map(d => d.value));
      const xScale = (width - 2 * padding) / nMax;
      const yScale = (height - 2 * padding) / (maxVal - minVal || 1);

      // Draw phi line
      ctx.beginPath();
      ctx.strokeStyle = '#ffd700';
      ctx.lineWidth = 2;
      data.forEach((d, i) => {
        const x = padding + d.n * xScale;
        const y = height - padding - (d.value - minVal) * yScale;
        if (i === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      });
      ctx.stroke();

      // Draw points
      data.forEach((d, i) => {
        const x = padding + d.n * xScale;
        const y = height - padding - (d.value - minVal) * yScale;

        ctx.beginPath();
        ctx.arc(x, y, 5, 0, Math.PI * 2);
        ctx.fillStyle = '#ffd700';
        ctx.fill();
      });

      // Draw reference line for ratio view
      if (expView === 'ratio') {
        const phiY = height - padding - (PHI - minVal) * yScale;
        ctx.beginPath();
        ctx.strokeStyle = '#00ff88';
        ctx.setLineDash([5, 5]);
        ctx.moveTo(padding, phiY);
        ctx.lineTo(width - padding, phiY);
        ctx.stroke();
        ctx.setLineDash([]);

        ctx.fillStyle = '#00ff88';
        ctx.font = '12px JetBrains Mono';
        ctx.fillText('φ ≈ 1.618', width - padding - 60, phiY - 5);
      }

      // Labels
      ctx.fillStyle = '#a0a0b0';
      ctx.font = '12px JetBrains Mono';
      ctx.textAlign = 'center';
      ctx.fillText('n', width / 2, height - 15);

      ctx.save();
      ctx.translate(15, height / 2);
      ctx.rotate(-Math.PI / 2);
      ctx.fillText(expView === 'ratio' ? 'F(n)/F(n-1)' : (expView === 'log' ? 'ln(φⁿ)' : 'φⁿ'), 0, 0);
      ctx.restore();

      // Animate
      if (expAnimating) {
        expFrame++;
        if (expFrame < 160) {
          requestAnimationFrame(drawExpGrowth);
        } else {
          expAnimating = false;
          expFrame = 0;
        }
      }
    }

    function setExpView(view) {
      expView = view;
      document.querySelectorAll('.viz-container .viz-btn').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      drawExpGrowth();
    }

    function toggleExpAnimation() {
      expAnimating = !expAnimating;
      expFrame = 0;
      if (expAnimating) drawExpGrowth();
    }

    // ===== BAR VISUALIZATION =====

    function setVizRange(min, max) {
      document.querySelectorAll('#vizCanvas').parentElement.querySelectorAll('.viz-btn').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');

      const canvas = document.getElementById('vizCanvas');
      canvas.innerHTML = '';

      const values = [];
      for (let n = min; n <= max; n++) {
        values.push({ n, phi: phiPower(n) });
      }

      const maxPhi = Math.max(...values.map(v => v.phi));
      const minPhi = Math.min(...values.map(v => v.phi));

      const canvasWidth = canvas.offsetWidth - 40;
      const barWidth = Math.min(60, canvasWidth / values.length - 10);

      values.forEach((v, i) => {
        const bar = document.createElement('div');
        bar.className = 'phi-bar';

        const logPhi = Math.log(v.phi);
        const logMax = Math.log(maxPhi);
        const logMin = Math.log(minPhi);
        const heightPercent = ((logPhi - logMin) / (logMax - logMin)) * 70 + 10;

        bar.style.left = `${20 + i * (barWidth + 10)}px`;
        bar.style.width = `${barWidth}px`;
        bar.style.height = `${heightPercent}%`;
        bar.style.bottom = '50px';
        bar.textContent = v.n;

        bar.onmouseover = () => showInfo(v.n);
        bar.onmouseout = () => clearInfo();

        canvas.appendChild(bar);
      });

      const axis = document.createElement('div');
      axis.style.cssText = 'position: absolute; bottom: 20px; left: 0; right: 0; text-align: center; color: var(--text-secondary); font-size: 0.8rem;';
      axis.textContent = 'n (integer input)';
      canvas.appendChild(axis);
    }

    function showInfo(n) {
      const phi = phiPower(n);
      const fib = fibonacci(n);
      const luc = lucas(n);

      document.getElementById('vizInfo').innerHTML = `
        <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 8px; display: inline-block;">
          <span style="color: var(--phi-gold);">n = ${n}</span> &nbsp;|&nbsp;
          <span>φⁿ = ${phi.toFixed(4)}</span> &nbsp;|&nbsp;
          <span style="color: var(--fib-green);">F<sub>${n}</sub> = ${fib}</span> &nbsp;|&nbsp;
          <span style="color: var(--lucas-orange);">L<sub>${n}</sub> = ${luc}</span>
        </div>
      `;
    }

    function clearInfo() {
      document.getElementById('vizInfo').innerHTML = '';
    }

    // ===== INITIALIZATION =====

    window.onload = () => {
      calculatePhiPower();
      generateEmbeddingTable();
      drawCategoryDiagram();
      drawGoldenSpiral();
      drawExpGrowth();
      setVizRange(-3, 3);
    };

    window.onresize = () => {
      drawCategoryDiagram();
      drawGoldenSpiral();
      drawExpGrowth();
    };
  </script>
</body>
</html>
