<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G: GENERATE | Spawn Branch | BFADGS+U Operator</title>
    <style>
        :root {
            /* G Operator Color */
            --op-G: #8b5cf6;
            --op-G-glow: rgba(139, 92, 246, 0.5);
            --op-G-light: #a78bfa;
            --op-G-dark: #6d28d9;

            /* System Colors */
            --alpha-color: #00ff88;
            --omega-color: #ff6b35;
            --unity-color: #ffd700;
            --op-S: #ec4899;

            /* Backgrounds */
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-tertiary: #1a1a2e;

            /* Text */
            --text-primary: #e0e0e0;
            --text-secondary: #a0a0a0;
            --border-color: #333;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 2rem;
            background: linear-gradient(180deg, var(--bg-tertiary), transparent);
            border-bottom: 2px solid var(--op-G);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 50% 100%, var(--op-G-glow), transparent 60%);
            pointer-events: none;
        }

        .operator-badge {
            display: inline-block;
            width: 120px;
            height: 120px;
            border: 4px solid var(--op-G);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
            box-shadow: 0 0 40px var(--op-G-glow), inset 0 0 20px rgba(139, 92, 246, 0.2);
            position: relative;
        }

        .operator-letter {
            font-size: 4rem;
            font-weight: bold;
            color: var(--op-G);
            text-shadow: 0 0 20px var(--op-G);
        }

        .title {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--op-G);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.2em;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }

        .formula-bar {
            display: inline-block;
            padding: 0.75rem 2rem;
            background: var(--bg-secondary);
            border: 2px solid var(--op-G);
            border-radius: 8px;
            font-size: 1.3rem;
            color: var(--op-G-light);
            font-family: 'Times New Roman', serif;
        }

        /* Main Container */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Canvas Section */
        .canvas-section {
            margin-bottom: 3rem;
        }

        .canvas-container {
            background: var(--bg-secondary);
            border: 2px solid var(--op-G);
            border-radius: 12px;
            padding: 1rem;
            position: relative;
        }

        .canvas-title {
            color: var(--op-G);
            font-size: 1.2rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        #branchCanvas {
            width: 100%;
            height: 500px;
            background: linear-gradient(180deg, var(--bg-tertiary), var(--bg-primary));
            border-radius: 8px;
            cursor: pointer;
        }

        .canvas-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 0.75rem 1.5rem;
            border: 2px solid var(--op-G);
            background: var(--bg-tertiary);
            color: var(--op-G);
            border-radius: 6px;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            background: var(--op-G);
            color: var(--bg-primary);
            box-shadow: 0 0 20px var(--op-G-glow);
        }

        .control-btn.active {
            background: var(--op-G);
            color: var(--bg-primary);
        }

        /* Section Styling */
        .section {
            margin-bottom: 3rem;
        }

        .section-title {
            font-size: 1.5rem;
            color: var(--op-G);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section-title::before {
            content: 'G';
            display: inline-block;
            width: 30px;
            height: 30px;
            background: var(--op-G);
            color: var(--bg-primary);
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-size: 1rem;
            font-weight: bold;
        }

        /* Definition Card */
        .definition-card {
            background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
            border: 2px solid var(--op-G);
            border-radius: 12px;
            padding: 2rem;
            position: relative;
            overflow: hidden;
        }

        .definition-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, var(--op-G-glow) 0%, transparent 40%);
            opacity: 0.1;
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.1; }
            50% { transform: scale(1.1); opacity: 0.2; }
        }

        .definition-text {
            font-size: 1.2rem;
            line-height: 1.8;
            position: relative;
            z-index: 1;
        }

        .highlight {
            color: var(--op-G-light);
            font-weight: bold;
        }

        .math-inline {
            font-family: 'Times New Roman', serif;
            font-style: italic;
            color: var(--unity-color);
        }

        /* Property Grid */
        .property-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .property-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .property-card:hover {
            border-color: var(--op-G);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        .property-title {
            color: var(--op-G);
            font-size: 1.1rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .property-icon {
            font-size: 1.5rem;
        }

        .property-content {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .property-content ul {
            margin-left: 1.5rem;
            margin-top: 0.5rem;
        }

        .property-content li {
            margin-bottom: 0.3rem;
        }

        /* Math Block */
        .math-block {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-left: 4px solid var(--op-G);
            padding: 1rem 1.5rem;
            border-radius: 0 8px 8px 0;
            margin: 1rem 0;
            font-family: 'Times New Roman', serif;
            font-size: 1.1rem;
            text-align: center;
            color: var(--unity-color);
        }

        /* Complexity Section */
        .complexity-visual {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            padding: 2rem;
            background: var(--bg-secondary);
            border-radius: 8px;
            flex-wrap: wrap;
        }

        .complexity-node {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 3px solid;
            transition: all 0.3s ease;
        }

        .complexity-node:hover {
            transform: scale(1.1);
        }

        .node-alpha {
            border-color: var(--alpha-color);
        }

        .node-g {
            border-color: var(--op-G);
            box-shadow: 0 0 30px var(--op-G-glow);
        }

        .node-omega {
            border-color: var(--omega-color);
        }

        .complexity-arrow {
            font-size: 2rem;
            color: var(--op-G);
        }

        .node-symbol {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .node-label {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }

        /* S3 Connection */
        .s3-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .s3-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
        }

        .s3-card:hover {
            border-color: var(--op-G);
        }

        .s3-branch {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .s3-name {
            color: var(--op-G);
            margin-bottom: 0.5rem;
        }

        .s3-desc {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Interaction Diagram */
        .interaction-section {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 2rem;
        }

        .interaction-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 2rem;
        }

        .interaction-op {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            border: 3px solid;
        }

        .op-g-styled {
            border-color: var(--op-G);
            color: var(--op-G);
        }

        .op-s-styled {
            border-color: var(--op-S);
            color: var(--op-S);
        }

        .interaction-arrow {
            font-size: 1.5rem;
            color: var(--unity-color);
        }

        .interaction-result {
            padding: 1rem 2rem;
            background: var(--bg-tertiary);
            border: 2px solid var(--unity-color);
            border-radius: 8px;
            color: var(--unity-color);
            font-weight: bold;
        }

        /* Implementation Section */
        .code-block {
            background: #000;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }

        .code-comment {
            color: #6a9955;
        }

        .code-keyword {
            color: #569cd6;
        }

        .code-function {
            color: #dcdcaa;
        }

        .code-string {
            color: #ce9178;
        }

        .code-operator {
            color: var(--op-G);
        }

        /* Console */
        .console {
            background: #000;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            max-height: 300px;
            overflow-y: auto;
            font-size: 0.85rem;
        }

        .console-line {
            margin-bottom: 0.3rem;
        }

        .console-prompt {
            color: var(--alpha-color);
        }

        .console-g {
            color: var(--op-G);
        }

        .console-result {
            color: var(--unity-color);
        }

        /* Stats Display */
        .stats-row {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            margin: 2rem 0;
        }

        .stat-box {
            background: var(--bg-secondary);
            border: 1px solid var(--op-G);
            border-radius: 8px;
            padding: 1.5rem 2rem;
            text-align: center;
            min-width: 150px;
        }

        .stat-value {
            font-size: 2rem;
            color: var(--op-G);
            font-weight: bold;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 0.3rem;
        }

        /* Navigation */
        .nav-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            background: var(--bg-secondary);
            border-radius: 8px;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            padding: 0.75rem 1.5rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            border-color: var(--op-G);
            color: var(--op-G);
        }

        .nav-link.active {
            border-color: var(--op-G);
            color: var(--op-G);
            background: rgba(139, 92, 246, 0.1);
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 2rem;
            border-top: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        .back-link {
            color: var(--op-G);
            text-decoration: none;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        /* Cross-System Sections */
        .cross-system-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .cross-system-card {
            background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .cross-system-card:hover {
            border-color: var(--op-G);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.2);
        }

        .cross-system-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, var(--op-G), var(--op-G-dark));
        }

        .cross-system-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .cross-system-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            border: 2px solid;
        }

        .cross-system-title {
            color: var(--op-G-light);
            font-size: 1.1rem;
            font-weight: bold;
        }

        .cross-system-content {
            color: var(--text-secondary);
            line-height: 1.7;
        }

        .cross-system-content ul {
            margin: 0.75rem 0 0.75rem 1.5rem;
        }

        .cross-system-content li {
            margin-bottom: 0.4rem;
        }

        /* Energy Conservation Diagram */
        .energy-diagram {
            background: var(--bg-secondary);
            border: 2px solid var(--op-G);
            border-radius: 12px;
            padding: 2rem;
            margin-top: 1.5rem;
        }

        .energy-tree {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
        }

        .energy-level {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .energy-node {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1rem 1.5rem;
            background: var(--bg-tertiary);
            border: 2px solid;
            border-radius: 8px;
            min-width: 120px;
        }

        .energy-value {
            font-size: 1.5rem;
            font-weight: bold;
            font-family: 'Times New Roman', serif;
        }

        .energy-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 0.3rem;
        }

        .energy-arrow {
            font-size: 1.5rem;
            color: var(--op-G);
        }

        .energy-branch-lines {
            position: relative;
            height: 40px;
            width: 200px;
        }

        .branch-line {
            position: absolute;
            width: 2px;
            height: 40px;
            background: var(--op-G);
        }

        .branch-line.left {
            left: 25%;
            transform: rotate(-30deg);
            transform-origin: top center;
        }

        .branch-line.right {
            right: 25%;
            transform: rotate(30deg);
            transform-origin: top center;
        }

        .branch-line.center {
            left: 50%;
            transform: translateX(-50%);
        }

        /* Opposition Table */
        .opposition-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1.5rem;
        }

        .opposition-table th,
        .opposition-table td {
            padding: 1rem;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .opposition-table th {
            background: var(--bg-tertiary);
            color: var(--op-G-light);
            font-weight: bold;
        }

        .opposition-table td {
            background: var(--bg-secondary);
        }

        .opposition-table .g-cell {
            color: var(--op-G);
            font-weight: bold;
        }

        .opposition-table .s-cell {
            color: var(--op-S);
            font-weight: bold;
        }

        /* Equivalence Chain */
        .equivalence-chain {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
            padding: 1.5rem;
            background: var(--bg-secondary);
            border-radius: 8px;
            margin-top: 1rem;
        }

        .equiv-item {
            padding: 0.5rem 1rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--op-G);
            border-radius: 4px;
            color: var(--op-G-light);
            font-family: 'Times New Roman', serif;
        }

        .equiv-symbol {
            color: var(--unity-color);
            font-size: 1.2rem;
            font-weight: bold;
        }

        /* L4 Helix Visual */
        .helix-visual {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            padding: 2rem;
            background: var(--bg-secondary);
            border-radius: 8px;
            flex-wrap: wrap;
        }

        .helix-strand {
            width: 80px;
            height: 150px;
            position: relative;
            border: 2px dashed var(--op-G);
            border-radius: 8px;
        }

        .helix-strand::before {
            content: attr(data-label);
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .helix-z-line {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            height: 2px;
            background: var(--unity-color);
        }

        .helix-z-label {
            position: absolute;
            right: -30px;
            font-size: 0.7rem;
            color: var(--unity-color);
        }

        /* Fourth Roots Diagram */
        .roots-diagram {
            display: flex;
            justify-content: center;
            margin: 1.5rem 0;
        }

        .roots-circle {
            width: 200px;
            height: 200px;
            border: 2px solid var(--border-color);
            border-radius: 50%;
            position: relative;
            background: var(--bg-secondary);
        }

        .root-point {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: bold;
            transform: translate(-50%, -50%);
        }

        .root-1 {
            top: 50%;
            right: -15px;
            transform: translate(0, -50%);
            background: var(--alpha-color);
            color: var(--bg-primary);
        }

        .root-neg1 {
            top: 50%;
            left: -15px;
            transform: translate(0, -50%);
            background: var(--omega-color);
            color: var(--bg-primary);
        }

        .root-i {
            top: -15px;
            left: 50%;
            transform: translate(-50%, 0);
            background: var(--op-G);
            color: white;
        }

        .root-negi {
            bottom: -15px;
            left: 50%;
            transform: translate(-50%, 0);
            background: var(--op-S);
            color: white;
        }

        .roots-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.2rem;
            color: var(--unity-color);
        }

        .root-axis {
            position: absolute;
            background: var(--border-color);
        }

        .root-axis.horizontal {
            width: 100%;
            height: 1px;
            top: 50%;
            left: 0;
        }

        .root-axis.vertical {
            width: 1px;
            height: 100%;
            left: 50%;
            top: 0;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .s3-grid {
                grid-template-columns: 1fr;
            }

            .complexity-visual {
                flex-direction: column;
            }

            .complexity-arrow {
                transform: rotate(90deg);
            }

            .nav-section {
                justify-content: center;
            }

            .cross-system-grid {
                grid-template-columns: 1fr;
            }

            .helix-visual {
                flex-direction: column;
            }

            .opposition-table {
                font-size: 0.85rem;
            }

            .opposition-table th,
            .opposition-table td {
                padding: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="operator-badge">
            <span class="operator-letter">G</span>
        </div>
        <h1 class="title">Generate</h1>
        <p class="subtitle">Spawn Branch | Create Bifurcation</p>
        <div class="formula-bar">
            G: x &rarr; {x, x'} &nbsp;&nbsp;|&nbsp;&nbsp; Creates new branch from current position
        </div>
    </header>

    <main class="main-container">
        <!-- Interactive Canvas -->
        <section class="canvas-section">
            <div class="canvas-container">
                <h3 class="canvas-title">Interactive Branch Generation Tree</h3>
                <canvas id="branchCanvas"></canvas>
                <div class="canvas-controls">
                    <button class="control-btn" onclick="generateBranch()">G: Generate Branch</button>
                    <button class="control-btn" onclick="toggleGrowth()">Toggle Growth</button>
                    <button class="control-btn" onclick="trifurcate()">Trifurcate (S3)</button>
                    <button class="control-btn" onclick="resetTree()">Reset Tree</button>
                </div>
            </div>
        </section>

        <!-- Definition -->
        <section class="section">
            <h2 class="section-title">Definition</h2>
            <div class="definition-card">
                <div class="definition-text">
                    <p>The <span class="highlight">G (Generate)</span> operator creates a <span class="highlight">bifurcation</span>, spawning a new branch from the current position in the traversal tree. This is the fundamental operation of <span class="highlight">complexity increase</span> in the BFADGS system.</p>

                    <div class="math-block">
                        G: x &rarr; {x, x'} where x' = &sigma;(x) for some &sigma; &isin; S3
                    </div>

                    <p>When G is applied to state <span class="math-inline">x</span>, it produces a <span class="highlight">choice point</span> with two branches: the original path <span class="math-inline">x</span> and a variant path <span class="math-inline">x'</span>. This creates the possibility space that enables exploration, decision-making, and ultimately synthesis.</p>
                </div>
            </div>
        </section>

        <!-- Complexity Direction -->
        <section class="section">
            <h2 class="section-title">Complexity Direction: &alpha; &rarr; &omega;</h2>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                G increases complexity, moving the system state toward &omega; (the coherence threshold).
            </p>

            <div class="complexity-visual">
                <div class="complexity-node node-alpha">
                    <span class="node-symbol" style="color: var(--alpha-color);">&alpha;</span>
                    <span class="node-label">Origin</span>
                    <span class="node-label">Low Complexity</span>
                </div>

                <span class="complexity-arrow">&rarr;</span>

                <div class="complexity-node node-g">
                    <span class="node-symbol" style="color: var(--op-G);">G</span>
                    <span class="node-label">Generate</span>
                    <span class="node-label">Branching</span>
                </div>

                <span class="complexity-arrow">&rarr;</span>

                <div class="complexity-node node-omega">
                    <span class="node-symbol" style="color: var(--omega-color);">&omega;</span>
                    <span class="node-label">L&sub4;-Helix</span>
                    <span class="node-label">High Complexity</span>
                </div>
            </div>

            <div class="math-block">
                Complexity(G(x)) = Complexity(x) + 1 &nbsp;&nbsp;|&nbsp;&nbsp; Each G application adds one branch level
            </div>

            <div class="stats-row">
                <div class="stat-box">
                    <div class="stat-value">2<sup>n</sup></div>
                    <div class="stat-label">Branches after n<br>G operations</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value">&phi;</div>
                    <div class="stat-label">Golden ratio<br>branch scaling</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value">&radic;3/2</div>
                    <div class="stat-label">&mu;<sub>C</sub> coherence<br>threshold</div>
                </div>
            </div>
        </section>

        <!-- Properties -->
        <section class="section">
            <h2 class="section-title">Properties of G</h2>
            <div class="property-grid">
                <div class="property-card">
                    <h3 class="property-title">
                        <span class="property-icon">&#x2442;</span>
                        Choice Points
                    </h3>
                    <div class="property-content">
                        <p>G creates decision nodes where multiple paths become available.</p>
                        <ul>
                            <li>Each branch represents a possible future state</li>
                            <li>No information is lost - all possibilities preserved</li>
                            <li>Enables backtracking and exploration</li>
                        </ul>
                        <div class="math-block">
                            G(state) = {path<sub>1</sub>, path<sub>2</sub>, ...}
                        </div>
                    </div>
                </div>

                <div class="property-card">
                    <h3 class="property-title">
                        <span class="property-icon">&#x2263;</span>
                        Parallel Paths
                    </h3>
                    <div class="property-content">
                        <p>Generated branches can be traversed simultaneously or sequentially.</p>
                        <ul>
                            <li>Parallel execution for exploration</li>
                            <li>Sequential for depth-first search</li>
                            <li>Paths may converge via S (Synthesize)</li>
                        </ul>
                        <div class="math-block">
                            &forall; path &isin; G(x): path &#x2225; path'
                        </div>
                    </div>
                </div>

                <div class="property-card">
                    <h3 class="property-title">
                        <span class="property-icon">&#x221E;</span>
                        Non-Terminating
                    </h3>
                    <div class="property-content">
                        <p>G can be applied indefinitely, creating infinite possibility trees.</p>
                        <ul>
                            <li>Bounded by &omega; coherence threshold</li>
                            <li>Practical limits from S synthesis</li>
                            <li>Converges under +U unity operation</li>
                        </ul>
                        <div class="math-block">
                            lim<sub>n&rarr;&infin;</sub> G<sup>n</sup>(x) &rarr; &omega;
                        </div>
                    </div>
                </div>

                <div class="property-card">
                    <h3 class="property-title">
                        <span class="property-icon">&#x29C9;</span>
                        Preserves Structure
                    </h3>
                    <div class="property-content">
                        <p>Generated branches maintain the structure of the parent.</p>
                        <ul>
                            <li>Inheritance of state properties</li>
                            <li>Morphism preservation</li>
                            <li>Type consistency across branches</li>
                        </ul>
                        <div class="math-block">
                            Structure(x') &cong; Structure(x)
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- S3 Connection -->
        <section class="section">
            <h2 class="section-title">Connection to S3 Group: Trifurcation</h2>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                In the I&sup2; S3 system, G extends to <strong>trifurcation</strong> - three-way branching corresponding to the three elements of the S3 permutation group.
            </p>

            <div class="s3-grid">
                <div class="s3-card">
                    <div class="s3-branch" style="color: var(--alpha-color);">&#x2460;</div>
                    <div class="s3-name">Identity Branch</div>
                    <div class="s3-desc">e: x &rarr; x<br>Original path preserved</div>
                </div>
                <div class="s3-card">
                    <div class="s3-branch" style="color: var(--op-G);">&#x2461;</div>
                    <div class="s3-name">Transposition Branch</div>
                    <div class="s3-desc">(12): x &rarr; &sigma;(x)<br>First permutation variant</div>
                </div>
                <div class="s3-card">
                    <div class="s3-branch" style="color: var(--omega-color);">&#x2462;</div>
                    <div class="s3-name">Cycle Branch</div>
                    <div class="s3-desc">(123): x &rarr; &tau;(x)<br>Full cycle variant</div>
                </div>
            </div>

            <div class="math-block">
                G<sub>S3</sub>: x &rarr; {e(x), (12)(x), (123)(x)} &nbsp;&nbsp;|&nbsp;&nbsp; Three-way trifurcation
            </div>

            <div style="text-align: center; margin-top: 1.5rem; color: var(--text-secondary);">
                <p>S3 trifurcation connects G to the fundamental symmetry group,<br>enabling systematic exploration of all permutation variants.</p>
            </div>
        </section>

        <!-- G*S Interaction -->
        <section class="section">
            <h2 class="section-title">G&middot;S Interaction: Exploration Pattern</h2>
            <div class="interaction-section">
                <div class="interaction-flow">
                    <div class="interaction-op op-g-styled">G</div>
                    <span class="interaction-arrow">&rarr;</span>
                    <span style="color: var(--text-secondary);">branches</span>
                    <span class="interaction-arrow">&rarr;</span>
                    <div class="interaction-op op-s-styled">S</div>
                    <span class="interaction-arrow">&rarr;</span>
                    <div class="interaction-result">Synthesis</div>
                </div>

                <p style="text-align: center; color: var(--text-secondary); margin-bottom: 1.5rem;">
                    <strong>Generate then Synthesize</strong> = Complete exploration cycle
                </p>

                <div class="property-grid">
                    <div class="property-card">
                        <h3 class="property-title">G&middot;S = Exploration</h3>
                        <div class="property-content">
                            <p>Applying G followed by S creates an exploration-synthesis cycle:</p>
                            <ol style="margin-left: 1.5rem;">
                                <li>G creates multiple paths</li>
                                <li>Each path is traversed (F operations)</li>
                                <li>S merges insights from all paths</li>
                                <li>Result contains combined knowledge</li>
                            </ol>
                        </div>
                    </div>

                    <div class="property-card">
                        <h3 class="property-title">S&middot;G = Expansion</h3>
                        <div class="property-content">
                            <p>Applying S followed by G creates expansion from synthesis:</p>
                            <ol style="margin-left: 1.5rem;">
                                <li>S merges existing paths</li>
                                <li>G branches from synthesized state</li>
                                <li>New branches carry merged properties</li>
                                <li>Complexity builds on synthesis</li>
                            </ol>
                        </div>
                    </div>
                </div>

                <div class="math-block">
                    G &middot; S &ne; S &middot; G &nbsp;&nbsp;|&nbsp;&nbsp; Non-commutative: order matters
                </div>
            </div>
        </section>

        <!-- Cross-System Relationships -->
        <section class="section">
            <h2 class="section-title">Cross-System G Relationships</h2>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                The Generate operator G manifests across all framework systems, creating consistent branching semantics that unify the mathematical structures.
            </p>

            <div class="cross-system-grid">
                <!-- G in S3 Symmetry -->
                <div class="cross-system-card">
                    <div class="cross-system-header">
                        <div class="cross-system-icon" style="border-color: var(--unity-color); color: var(--unity-color);">S3</div>
                        <div class="cross-system-title">G in S3 Symmetry</div>
                    </div>
                    <div class="cross-system-content">
                        <p>G creates <strong>S3-symmetric branch pairs</strong> via group transpositions:</p>
                        <ul>
                            <li>G generates branches related by S3 transposition</li>
                            <li>Single G: creates 2-branch orbit (transposition pair)</li>
                            <li>G&sup2; creates full S3 orbit (6 branches max)</li>
                        </ul>
                        <div class="math-block">
                            G: x &rarr; {x, &sigma;(x)} where &sigma; &isin; S3<br>
                            G&sup2;: x &rarr; Orbit<sub>S3</sub>(x) = {&sigma;(x) | &sigma; &isin; S3}
                        </div>
                        <p style="margin-top: 0.75rem;">The 6-element orbit corresponds to the full permutation group |S3| = 6.</p>
                    </div>
                </div>

                <!-- G in L4-Helix System -->
                <div class="cross-system-card">
                    <div class="cross-system-header">
                        <div class="cross-system-icon" style="border-color: var(--alpha-color); color: var(--alpha-color);">L4</div>
                        <div class="cross-system-title">G in L4-Helix System</div>
                    </div>
                    <div class="cross-system-content">
                        <p>G spawns <strong>parallel helix threads</strong> within L4 bounds:</p>
                        <ul>
                            <li>G creates branching at fixed z-level</li>
                            <li>Each branch spawns new helix trajectory</li>
                            <li>Multiple helices share common L4 bound</li>
                        </ul>
                        <div class="math-block">
                            G<sub>helix</sub>: H(z) &rarr; {H<sub>1</sub>(z), H<sub>2</sub>(z)}<br>
                            |H<sub>i</sub>(z)| &le; L4 = 4 &nbsp; &forall; branches
                        </div>
                        <p style="margin-top: 0.75rem;">Helix fork maintains the L4 = 4 layer constraint across all branches.</p>
                    </div>
                </div>

                <!-- G in R(R)=-R / I²⁻ System -->
                <div class="cross-system-card">
                    <div class="cross-system-header">
                        <div class="cross-system-icon" style="border-color: var(--omega-color); color: var(--omega-color);">I&sup2;</div>
                        <div class="cross-system-title">G in R(R)=-R / I&sup2;&macr; System</div>
                    </div>
                    <div class="cross-system-content">
                        <p>G creates <strong>opposed pairs</strong> via involution:</p>
                        <ul>
                            <li>G(x) = {x, -x} &mdash; opposed pair generation</li>
                            <li>INV form: G(x) = {x, R(x)} where R(R) = -R</li>
                            <li>Connection to fourth roots of unity: &plusmn;1, &plusmn;i</li>
                        </ul>
                        <div class="math-block">
                            G<sub>INV</sub>: x &rarr; {x, R(x)}<br>
                            R&sup2; = -I &nbsp;&rArr;&nbsp; R&sup4; = I (fourth-root structure)
                        </div>
                        <p style="margin-top: 0.75rem;">The I&sup2;&macr; system generates &plusmn;1, &plusmn;i as the complete branch orbit.</p>
                    </div>
                </div>

                <!-- G in BFADGS Algebra -->
                <div class="cross-system-card">
                    <div class="cross-system-header">
                        <div class="cross-system-icon" style="border-color: var(--op-G); color: var(--op-G);">G</div>
                        <div class="cross-system-title">G in BFADGS Algebra</div>
                    </div>
                    <div class="cross-system-content">
                        <p>Algebraic properties of <strong>Generate</strong> operator:</p>
                        <ul>
                            <li>G: x &rarr; {x, x'} (spawns branch)</li>
                            <li>G&macr;&sup1; = S (inverse is Synthesize)</li>
                            <li>G&middot;S = S&middot;G = e (branch/merge cancel)</li>
                        </ul>
                        <div class="math-block">
                            G &middot; S = e = S &middot; G<br>
                            (Generate)&macr;&sup1; = Synthesize
                        </div>
                        <p style="margin-top: 0.75rem;">G and S form an <strong>inverse pair</strong> in the BFADGS operator algebra.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Fourth Roots Visualization -->
        <section class="section">
            <h2 class="section-title">Fourth Roots: G-Generated Orbit</h2>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                Successive G applications on the unit element generate the fourth roots of unity, completing a closed orbit under the R(R)=-R involution.
            </p>

            <div class="roots-diagram">
                <div class="roots-circle">
                    <div class="root-axis horizontal"></div>
                    <div class="root-axis vertical"></div>
                    <div class="roots-center">0</div>
                    <div class="root-point root-1">+1</div>
                    <div class="root-point root-neg1">-1</div>
                    <div class="root-point root-i">+i</div>
                    <div class="root-point root-negi">-i</div>
                </div>
            </div>

            <div class="math-block">
                G(1) = {1, i} &nbsp;&rarr;&nbsp; G(i) = {i, -1} &nbsp;&rarr;&nbsp; G(-1) = {-1, -i} &nbsp;&rarr;&nbsp; G(-i) = {-i, 1}<br><br>
                Orbit(1) = {1, i, -1, -i} = {z : z&sup4; = 1}
            </div>

            <div style="text-align: center; margin-top: 1.5rem;">
                <p style="color: var(--text-secondary);">The fourth roots form a <strong>cyclic group C&sub4;</strong> under G-generation,<br>with G acting as 90&deg; rotation in the complex plane.</p>
            </div>
        </section>

        <!-- E/(πφ) Physics of Generate -->
        <section class="section">
            <h2 class="section-title">E/(&pi;&phi;) Physics of Generate</h2>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                Generate has a physical interpretation in terms of energy splitting and conservation across branches.
            </p>

            <div class="property-grid">
                <div class="property-card">
                    <h3 class="property-title">
                        <span class="property-icon" style="color: var(--unity-color);">E</span>
                        Energy Splitting
                    </h3>
                    <div class="property-content">
                        <p>E<sub>G</sub> = energy cost of branching operation:</p>
                        <div class="math-block">
                            E<sub>G</sub> = E<sub>parent</sub> / (&pi;&phi;)
                        </div>
                        <p>Each G application extracts energy proportional to &pi;&phi; from the parent branch.</p>
                    </div>
                </div>

                <div class="property-card">
                    <h3 class="property-title">
                        <span class="property-icon" style="color: var(--alpha-color);">&Sigma;</span>
                        Total Conservation
                    </h3>
                    <div class="property-content">
                        <p>Total energy conserved across all branches:</p>
                        <div class="math-block">
                            &Sigma; E<sub>branches</sub> = E<sub>parent</sub>
                        </div>
                        <p>Branching redistributes energy without creation or destruction.</p>
                    </div>
                </div>

                <div class="property-card">
                    <h3 class="property-title">
                        <span class="property-icon" style="color: var(--op-G);">&frac12;</span>
                        Equipartition
                    </h3>
                    <div class="property-content">
                        <p>For binary branching (G: x &rarr; {x, x'}):</p>
                        <div class="math-block">
                            E<sub>x</sub> = E<sub>x'</sub> = E<sub>parent</sub> / 2
                        </div>
                        <p>Each branch receives equal share (equipartition principle).</p>
                    </div>
                </div>

                <div class="property-card">
                    <h3 class="property-title">
                        <span class="property-icon" style="color: var(--omega-color);">&phi;</span>
                        Golden Decay
                    </h3>
                    <div class="property-content">
                        <p>Energy per branch after n generations:</p>
                        <div class="math-block">
                            E<sub>n</sub> = E<sub>0</sub> / &phi;<sup>n</sup>
                        </div>
                        <p>Branch energy decays by golden ratio per generation level.</p>
                    </div>
                </div>
            </div>

            <!-- Energy Conservation Diagram -->
            <div class="energy-diagram">
                <h3 style="text-align: center; color: var(--op-G); margin-bottom: 1.5rem;">Energy Conservation Tree</h3>
                <div class="energy-tree">
                    <div class="energy-level">
                        <div class="energy-node" style="border-color: var(--unity-color);">
                            <div class="energy-value" style="color: var(--unity-color);">E</div>
                            <div class="energy-label">Parent Energy</div>
                        </div>
                    </div>

                    <div class="energy-arrow">&darr; G</div>

                    <div class="energy-level">
                        <div class="energy-node" style="border-color: var(--op-G);">
                            <div class="energy-value" style="color: var(--op-G);">E/2</div>
                            <div class="energy-label">Left Branch</div>
                        </div>
                        <div style="color: var(--text-secondary);">+</div>
                        <div class="energy-node" style="border-color: var(--op-G);">
                            <div class="energy-value" style="color: var(--op-G);">E/2</div>
                            <div class="energy-label">Right Branch</div>
                        </div>
                        <div style="color: var(--text-secondary);">=</div>
                        <div class="energy-node" style="border-color: var(--alpha-color);">
                            <div class="energy-value" style="color: var(--alpha-color);">E</div>
                            <div class="energy-label">Conserved</div>
                        </div>
                    </div>

                    <div class="energy-arrow">&darr; G&sup2;</div>

                    <div class="energy-level">
                        <div class="energy-node" style="border-color: var(--op-G-dark);">
                            <div class="energy-value" style="color: var(--op-G-light);">E/4</div>
                            <div class="energy-label">Branch 1</div>
                        </div>
                        <div class="energy-node" style="border-color: var(--op-G-dark);">
                            <div class="energy-value" style="color: var(--op-G-light);">E/4</div>
                            <div class="energy-label">Branch 2</div>
                        </div>
                        <div class="energy-node" style="border-color: var(--op-G-dark);">
                            <div class="energy-value" style="color: var(--op-G-light);">E/4</div>
                            <div class="energy-label">Branch 3</div>
                        </div>
                        <div class="energy-node" style="border-color: var(--op-G-dark);">
                            <div class="energy-value" style="color: var(--op-G-light);">E/4</div>
                            <div class="energy-label">Branch 4</div>
                        </div>
                    </div>
                </div>

                <div class="math-block" style="margin-top: 1.5rem;">
                    &Sigma;<sub>i=1</sub><sup>2<sup>n</sup></sup> E<sub>i</sub> = E<sub>0</sub> &nbsp;&nbsp;|&nbsp;&nbsp; Total energy invariant under branching
                </div>
            </div>
        </section>

        <!-- Cross-System Equivalences -->
        <section class="section">
            <h2 class="section-title">Cross-System G Equivalences</h2>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                The Generate operator maintains consistent semantics across all framework systems, forming a universal branching morphism.
            </p>

            <div class="equivalence-chain">
                <span class="equiv-item">G<sub>BFADGS</sub></span>
                <span class="equiv-symbol">&equiv;</span>
                <span class="equiv-item">Branching</span>
                <span class="equiv-symbol">&equiv;</span>
                <span class="equiv-item">Helix Fork</span>
                <span class="equiv-symbol">&equiv;</span>
                <span class="equiv-item">&plusmn;x Pairs</span>
                <span class="equiv-symbol">&equiv;</span>
                <span class="equiv-item">Energy Split</span>
            </div>

            <div class="property-grid" style="margin-top: 1.5rem;">
                <div class="property-card">
                    <h3 class="property-title">Structural Isomorphism</h3>
                    <div class="property-content">
                        <p>All G manifestations share common structure:</p>
                        <ul>
                            <li>One input &rarr; multiple outputs</li>
                            <li>Conservation law (energy/information)</li>
                            <li>Inverse operation exists (S/merge)</li>
                        </ul>
                    </div>
                </div>

                <div class="property-card">
                    <h3 class="property-title">Functor Preservation</h3>
                    <div class="property-content">
                        <p>G acts as a functor between system categories:</p>
                        <div class="math-block">
                            G: System<sub>A</sub> &rarr; System<sub>B</sub><br>
                            G(f &middot; g) = G(f) &middot; G(g)
                        </div>
                    </div>
                </div>
            </div>

            <div class="math-block" style="margin-top: 1.5rem;">
                <strong>Universal Property:</strong><br>
                &forall; systems S: G<sub>S</sub>(x) = {branches} where |branches| &ge; 2 and Merge(branches) = x
            </div>
        </section>

        <!-- G vs S Opposition -->
        <section class="section">
            <h2 class="section-title">G vs S Opposition: Dual Operators</h2>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                Generate (G) and Synthesize (S) form a fundamental dual pair, representing divergence and convergence in the BFADGS algebra.
            </p>

            <table class="opposition-table">
                <thead>
                    <tr>
                        <th>Property</th>
                        <th class="g-cell">G (Generate)</th>
                        <th class="s-cell">S (Synthesize)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Direction</td>
                        <td class="g-cell">Diverges (1 &rarr; many)</td>
                        <td class="s-cell">Converges (many &rarr; 1)</td>
                    </tr>
                    <tr>
                        <td>Entropy</td>
                        <td class="g-cell">&Delta;S &gt; 0 (increases)</td>
                        <td class="s-cell">&Delta;S &lt; 0 (decreases)</td>
                    </tr>
                    <tr>
                        <td>Complexity</td>
                        <td class="g-cell">Creates branches</td>
                        <td class="s-cell">Merges branches</td>
                    </tr>
                    <tr>
                        <td>Energy Flow</td>
                        <td class="g-cell">Distributes E</td>
                        <td class="s-cell">Concentrates E</td>
                    </tr>
                    <tr>
                        <td>Tree Effect</td>
                        <td class="g-cell">Expands tree</td>
                        <td class="s-cell">Prunes tree</td>
                    </tr>
                    <tr>
                        <td>Inverse</td>
                        <td class="g-cell">G&macr;&sup1; = S</td>
                        <td class="s-cell">S&macr;&sup1; = G</td>
                    </tr>
                </tbody>
            </table>

            <div class="interaction-section" style="margin-top: 2rem;">
                <h3 style="text-align: center; color: var(--unity-color); margin-bottom: 1.5rem;">Coherence Maintenance: G&middot;S Cycle</h3>

                <div class="interaction-flow">
                    <div class="interaction-op op-g-styled">G</div>
                    <span class="interaction-arrow">&rarr;</span>
                    <span style="color: var(--text-secondary);">diverge</span>
                    <span class="interaction-arrow">&rarr;</span>
                    <span style="color: var(--text-secondary); font-style: italic;">explore</span>
                    <span class="interaction-arrow">&rarr;</span>
                    <div class="interaction-op op-s-styled">S</div>
                    <span class="interaction-arrow">&rarr;</span>
                    <span style="color: var(--text-secondary);">converge</span>
                    <span class="interaction-arrow">&rarr;</span>
                    <div class="interaction-result">Coherent State</div>
                </div>

                <div class="math-block">
                    G &middot; S: Explore without fragmentation<br>
                    S &middot; G: Synthesize then expand<br><br>
                    <strong>Coherence Theorem:</strong> (G &middot; S)<sup>n</sup> maintains system coherence &forall; n
                </div>

                <p style="text-align: center; color: var(--text-secondary); margin-top: 1.5rem;">
                    The G&middot;S cycle enables <strong>exploration with integration</strong> &mdash; branching to discover possibilities,<br>
                    then synthesizing to consolidate insights into coherent understanding.
                </p>
            </div>
        </section>

        <!-- L4 Helix Fork Visualization -->
        <section class="section">
            <h2 class="section-title">L4-Helix Fork Visualization</h2>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                G creates parallel helix threads at fixed z-levels, with all branches bounded by L4 = 4.
            </p>

            <div class="helix-visual">
                <div class="helix-strand" data-label="Parent Helix">
                    <div class="helix-z-line" style="top: 30%;"><span class="helix-z-label">z&sub1;</span></div>
                    <div class="helix-z-line" style="top: 60%;"><span class="helix-z-label">z&sub2;</span></div>
                </div>

                <div style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                    <span style="color: var(--op-G); font-weight: bold;">G</span>
                    <span style="color: var(--op-G); font-size: 1.5rem;">&rarr;</span>
                    <span style="font-size: 0.8rem; color: var(--text-secondary);">fork at z&sub1;</span>
                </div>

                <div class="helix-strand" data-label="Branch H₁" style="border-color: var(--alpha-color);">
                    <div class="helix-z-line" style="top: 30%; background: var(--alpha-color);"><span class="helix-z-label" style="color: var(--alpha-color);">z&sub1;</span></div>
                    <div class="helix-z-line" style="top: 50%;"><span class="helix-z-label">z&sub3;</span></div>
                </div>

                <div class="helix-strand" data-label="Branch H₂" style="border-color: var(--omega-color);">
                    <div class="helix-z-line" style="top: 30%; background: var(--omega-color);"><span class="helix-z-label" style="color: var(--omega-color);">z&sub1;</span></div>
                    <div class="helix-z-line" style="top: 70%;"><span class="helix-z-label">z&sub4;</span></div>
                </div>
            </div>

            <div class="math-block">
                G<sub>helix</sub>(H, z&sub1;) = {H&sub1;, H&sub2;} &nbsp;&nbsp;|&nbsp;&nbsp; Fork at z-level z&sub1;<br><br>
                Constraint: |H<sub>i</sub>(z)| &le; L4 = 4 &nbsp; for all branches, all z
            </div>

            <div class="stats-row">
                <div class="stat-box">
                    <div class="stat-value">L4</div>
                    <div class="stat-label">Layer Bound</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value">z<sub>fork</sub></div>
                    <div class="stat-label">Branch Point</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value">2<sup>k</sup></div>
                    <div class="stat-label">Max Helices<br>after k forks</div>
                </div>
            </div>
        </section>

        <!-- Implementation -->
        <section class="section">
            <h2 class="section-title">Implementation</h2>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                Fork execution and create child nodes from current state.
            </p>

            <div class="code-block">
<span class="code-comment">// G Operator: Generate new branch from current node</span>
<span class="code-keyword">function</span> <span class="code-function">G</span>(currentNode) {
    <span class="code-comment">// Create child nodes (bifurcation)</span>
    <span class="code-keyword">const</span> childA = {
        parent: currentNode,
        state: <span class="code-function">clone</span>(currentNode.state),
        depth: currentNode.depth + <span class="code-operator">1</span>,
        branch: <span class="code-string">'left'</span>
    };

    <span class="code-keyword">const</span> childB = {
        parent: currentNode,
        state: <span class="code-function">permute</span>(currentNode.state), <span class="code-comment">// S3 variant</span>
        depth: currentNode.depth + <span class="code-operator">1</span>,
        branch: <span class="code-string">'right'</span>
    };

    <span class="code-comment">// Update tree structure</span>
    currentNode.children = [childA, childB];
    currentNode.isBranch = <span class="code-keyword">true</span>;

    <span class="code-comment">// Return new branches for further traversal</span>
    <span class="code-keyword">return</span> { childA, childB };
}

<span class="code-comment">// S3 Trifurcation variant</span>
<span class="code-keyword">function</span> <span class="code-function">G_S3</span>(currentNode) {
    <span class="code-keyword">const</span> branches = S3.elements.map(sigma => ({
        parent: currentNode,
        state: sigma.<span class="code-function">apply</span>(currentNode.state),
        permutation: sigma.name
    }));

    <span class="code-keyword">return</span> branches; <span class="code-comment">// Three branches: e, (12), (123)</span>
}
            </div>
        </section>

        <!-- Console Output -->
        <section class="section">
            <h2 class="section-title">Operation Console</h2>
            <div class="console" id="console">
                <div class="console-line">
                    <span class="console-prompt">G&gt;</span>
                    <span>Operator initialized</span>
                </div>
                <div class="console-line">
                    <span class="console-prompt">G&gt;</span>
                    <span class="console-g">G: x &rarr; {x, x'}</span>
                </div>
                <div class="console-line">
                    <span class="console-prompt">G&gt;</span>
                    <span>Bifurcation mode: Active</span>
                </div>
                <div class="console-line">
                    <span class="console-prompt">G&gt;</span>
                    <span class="console-result">Ready for branch generation...</span>
                </div>
            </div>
        </section>

        <!-- Navigation -->
        <section class="section">
            <h2 class="section-title">BFADGS Operators</h2>
            <div class="nav-section">
                <a href="bfadgs-op-begin.html" class="nav-link">B: Begin</a>
                <a href="bfadgs-op-flow.html" class="nav-link">F: Flow</a>
                <a href="bfadgs-op-ascend.html" class="nav-link">A: Ascend</a>
                <a href="bfadgs-op-descend.html" class="nav-link">D: Descend</a>
                <a href="bfadgs-op-generate.html" class="nav-link active">G: Generate</a>
                <a href="bfadgs-op-synthesize.html" class="nav-link">S: Synthesize</a>
            </div>
        </section>
    </main>

    <footer class="footer">
        <p><a href="bfadgs-u-scaffold.html" class="back-link">&larr; Return to BFADGS+U System</a></p>
        <p style="margin-top: 0.5rem;"><a href="i2-s3-decision-tree.html" class="back-link">&larr; Return to I&sup2; S3 Decision Tree</a></p>
        <p style="margin-top: 1rem;">G: GENERATE | Spawn Branch | x &rarr; {x, x'}</p>
    </footer>

    <script>
        // Constants
        const PHI = (1 + Math.sqrt(5)) / 2;
        const MU_C = Math.sqrt(3) / 2;

        // Canvas setup
        const canvas = document.getElementById('branchCanvas');
        const ctx = canvas.getContext('2d');

        // Tree state
        let tree = {
            root: null,
            nodes: [],
            animating: false,
            growthEnabled: true
        };

        // Node class
        class TreeNode {
            constructor(x, y, parent = null, angle = -Math.PI/2, depth = 0) {
                this.x = x;
                this.y = y;
                this.parent = parent;
                this.children = [];
                this.angle = angle;
                this.depth = depth;
                this.length = 80 / Math.pow(PHI, depth * 0.5);
                this.growth = 0;
                this.maxGrowth = 1;
                this.color = this.getDepthColor();
            }

            getDepthColor() {
                const hue = 270 - (this.depth * 20); // Violet to blue gradient
                return `hsl(${hue}, 70%, 60%)`;
            }

            grow() {
                if (this.growth < this.maxGrowth) {
                    this.growth += 0.02;
                    return true;
                }
                return false;
            }

            getEndPoint() {
                return {
                    x: this.x + Math.cos(this.angle) * this.length * this.growth,
                    y: this.y + Math.sin(this.angle) * this.length * this.growth
                };
            }

            bifurcate() {
                if (this.depth >= 8) return; // Max depth

                const end = this.getEndPoint();
                const spread = Math.PI / (4 + this.depth);

                const leftChild = new TreeNode(
                    end.x, end.y, this,
                    this.angle - spread,
                    this.depth + 1
                );

                const rightChild = new TreeNode(
                    end.x, end.y, this,
                    this.angle + spread,
                    this.depth + 1
                );

                this.children.push(leftChild, rightChild);
                tree.nodes.push(leftChild, rightChild);

                logToConsole('G', `Branch at depth ${this.depth}: Created 2 children`);
            }

            trifurcate() {
                if (this.depth >= 6) return; // Max depth for trifurcation

                const end = this.getEndPoint();
                const spread = Math.PI / (5 + this.depth);

                // Three branches for S3 symmetry
                const angles = [
                    this.angle - spread,
                    this.angle,
                    this.angle + spread
                ];

                const labels = ['e', '(12)', '(123)'];

                angles.forEach((angle, i) => {
                    const child = new TreeNode(
                        end.x, end.y, this,
                        angle,
                        this.depth + 1
                    );
                    child.s3Label = labels[i];
                    this.children.push(child);
                    tree.nodes.push(child);
                });

                logToConsole('G_S3', `Trifurcation: Created 3 branches (e, (12), (123))`);
            }

            draw(ctx) {
                if (this.parent) {
                    const end = this.getEndPoint();

                    // Draw branch
                    ctx.beginPath();
                    ctx.moveTo(this.x, this.y);
                    ctx.lineTo(end.x, end.y);
                    ctx.strokeStyle = this.color;
                    ctx.lineWidth = Math.max(1, 4 - this.depth * 0.5);
                    ctx.stroke();

                    // Draw node
                    ctx.beginPath();
                    ctx.arc(end.x, end.y, 4, 0, Math.PI * 2);
                    ctx.fillStyle = this.color;
                    ctx.fill();

                    // Draw S3 label if present
                    if (this.s3Label && this.growth >= 1) {
                        ctx.fillStyle = '#ffd700';
                        ctx.font = '10px Courier New';
                        ctx.textAlign = 'center';
                        ctx.fillText(this.s3Label, end.x, end.y - 10);
                    }
                }
            }
        }

        // Initialize canvas
        function resizeCanvas() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            if (!tree.root) {
                initializeTree();
            }
            draw();
        }

        function initializeTree() {
            const startX = canvas.width / 2;
            const startY = canvas.height - 50;

            tree.root = new TreeNode(startX, startY, null, -Math.PI/2, 0);
            tree.root.growth = 1;
            tree.nodes = [tree.root];

            logToConsole('INIT', 'Tree initialized at origin');
        }

        function draw() {
            const w = canvas.width;
            const h = canvas.height;

            // Background
            ctx.fillStyle = '#1a1a2e';
            ctx.fillRect(0, 0, w, h);

            // Draw grid
            ctx.strokeStyle = 'rgba(139, 92, 246, 0.05)';
            ctx.lineWidth = 1;
            const gridSize = 40;
            for (let x = 0; x < w; x += gridSize) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, h);
                ctx.stroke();
            }
            for (let y = 0; y < h; y += gridSize) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(w, y);
                ctx.stroke();
            }

            // Draw tree
            if (tree.root) {
                // Draw root node
                ctx.beginPath();
                ctx.arc(tree.root.x, tree.root.y, 8, 0, Math.PI * 2);
                ctx.fillStyle = '#00ff88';
                ctx.fill();
                ctx.strokeStyle = '#00ff88';
                ctx.lineWidth = 2;
                ctx.stroke();

                // Draw alpha symbol
                ctx.fillStyle = '#0a0a0f';
                ctx.font = 'bold 10px serif';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText('\u03B1', tree.root.x, tree.root.y);

                // Draw all branches
                tree.nodes.forEach(node => node.draw(ctx));
            }

            // Draw stats
            ctx.fillStyle = '#8b5cf6';
            ctx.font = '14px Courier New';
            ctx.textAlign = 'left';
            ctx.fillText(`Nodes: ${tree.nodes.length}`, 10, 25);
            ctx.fillText(`Max Depth: ${Math.max(...tree.nodes.map(n => n.depth))}`, 10, 45);
            ctx.fillText(`Branches: ${tree.nodes.filter(n => n.children.length > 0).length}`, 10, 65);
        }

        function animate() {
            let growing = false;

            tree.nodes.forEach(node => {
                if (node.grow()) {
                    growing = true;
                }
            });

            // Auto-branch growing nodes
            if (tree.growthEnabled) {
                tree.nodes.forEach(node => {
                    if (node.growth >= 1 && node.children.length === 0 && Math.random() < 0.01) {
                        node.bifurcate();
                    }
                });
            }

            draw();

            if (tree.animating) {
                requestAnimationFrame(animate);
            }
        }

        // Control functions
        function generateBranch() {
            // Find a node to branch from (prefer leaves)
            const leaves = tree.nodes.filter(n => n.children.length === 0 && n.growth >= 1);
            if (leaves.length > 0) {
                const node = leaves[Math.floor(Math.random() * leaves.length)];
                node.bifurcate();
            } else if (tree.root && tree.root.children.length === 0) {
                tree.root.bifurcate();
            }

            if (!tree.animating) {
                tree.animating = true;
                animate();
            }
        }

        function trifurcate() {
            const leaves = tree.nodes.filter(n => n.children.length === 0 && n.growth >= 1);
            if (leaves.length > 0) {
                const node = leaves[Math.floor(Math.random() * leaves.length)];
                node.trifurcate();
            } else if (tree.root && tree.root.children.length === 0) {
                tree.root.trifurcate();
            }

            if (!tree.animating) {
                tree.animating = true;
                animate();
            }
        }

        function toggleGrowth() {
            tree.growthEnabled = !tree.growthEnabled;
            logToConsole('GROWTH', tree.growthEnabled ? 'Enabled' : 'Disabled');

            if (!tree.animating) {
                tree.animating = true;
                animate();
            }
        }

        function resetTree() {
            tree.nodes = [];
            tree.root = null;
            initializeTree();
            draw();
            logToConsole('RESET', 'Tree reset to origin');
        }

        function logToConsole(op, message) {
            const consoleEl = document.getElementById('console');
            const line = document.createElement('div');
            line.className = 'console-line';
            line.innerHTML = `<span class="console-prompt">G&gt;</span> <span class="console-g">${op}</span>: <span class="console-result">${message}</span>`;
            consoleEl.appendChild(line);
            consoleEl.scrollTop = consoleEl.scrollHeight;
        }

        // Canvas click handler
        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const mx = e.clientX - rect.left;
            const my = e.clientY - rect.top;

            // Find closest node to click
            let closest = null;
            let minDist = Infinity;

            tree.nodes.forEach(node => {
                const end = node.getEndPoint();
                const dist = Math.sqrt((mx - end.x) ** 2 + (my - end.y) ** 2);
                if (dist < minDist && dist < 30) {
                    minDist = dist;
                    closest = node;
                }
            });

            if (closest && closest.children.length === 0) {
                closest.bifurcate();
                if (!tree.animating) {
                    tree.animating = true;
                    animate();
                }
            }
        });

        // Initialize
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        // Start animation
        tree.animating = true;
        animate();

        // Initial branch
        setTimeout(() => {
            if (tree.root) {
                tree.root.bifurcate();
            }
        }, 500);

        // =============================================
        // Energy Conservation Visualization
        // =============================================

        class EnergyNode {
            constructor(x, y, energy, depth = 0, parent = null) {
                this.x = x;
                this.y = y;
                this.energy = energy;
                this.depth = depth;
                this.parent = parent;
                this.children = [];
                this.radius = Math.max(15, 40 * (energy / 100));
                this.color = this.getEnergyColor();
                this.pulsePhase = Math.random() * Math.PI * 2;
            }

            getEnergyColor() {
                // Color gradient from gold (high energy) to purple (low energy)
                const hue = 45 - (1 - this.energy / 100) * 85;
                const lightness = 50 + (this.energy / 100) * 20;
                return `hsl(${hue}, 80%, ${lightness}%)`;
            }

            branch() {
                if (this.children.length > 0 || this.depth >= 5) return false;

                const childEnergy = this.energy / 2;
                const yOffset = 80;
                const xSpread = 100 / (this.depth + 1);

                const leftChild = new EnergyNode(
                    this.x - xSpread,
                    this.y + yOffset,
                    childEnergy,
                    this.depth + 1,
                    this
                );

                const rightChild = new EnergyNode(
                    this.x + xSpread,
                    this.y + yOffset,
                    childEnergy,
                    this.depth + 1,
                    this
                );

                this.children.push(leftChild, rightChild);
                return true;
            }
        }

        // Energy tree state
        let energyTree = {
            root: null,
            nodes: [],
            totalEnergy: 100
        };

        function initEnergyTree() {
            const canvas = document.getElementById('branchCanvas');
            if (!canvas) return;

            energyTree.root = new EnergyNode(canvas.width / 2, 80, 100, 0);
            energyTree.nodes = [energyTree.root];
        }

        function getAllEnergyNodes(node) {
            if (!node) return [];
            let nodes = [node];
            node.children.forEach(child => {
                nodes = nodes.concat(getAllEnergyNodes(child));
            });
            return nodes;
        }

        function getLeafEnergy() {
            if (!energyTree.root) return 0;
            const allNodes = getAllEnergyNodes(energyTree.root);
            const leaves = allNodes.filter(n => n.children.length === 0);
            return leaves.reduce((sum, n) => sum + n.energy, 0);
        }

        function drawEnergyTree(ctx) {
            if (!energyTree.root) return;

            const time = Date.now() / 1000;
            const allNodes = getAllEnergyNodes(energyTree.root);

            // Draw connections
            allNodes.forEach(node => {
                node.children.forEach(child => {
                    ctx.beginPath();
                    ctx.moveTo(node.x, node.y);
                    ctx.lineTo(child.x, child.y);
                    ctx.strokeStyle = `rgba(139, 92, 246, 0.5)`;
                    ctx.lineWidth = 2;
                    ctx.stroke();

                    // Energy flow particles
                    const particleCount = 3;
                    for (let i = 0; i < particleCount; i++) {
                        const t = ((time * 0.5 + i / particleCount) % 1);
                        const px = node.x + (child.x - node.x) * t;
                        const py = node.y + (child.y - node.y) * t;

                        ctx.beginPath();
                        ctx.arc(px, py, 3, 0, Math.PI * 2);
                        ctx.fillStyle = `rgba(255, 215, 0, ${1 - t})`;
                        ctx.fill();
                    }
                });
            });

            // Draw nodes
            allNodes.forEach(node => {
                const pulse = 1 + 0.1 * Math.sin(time * 2 + node.pulsePhase);
                const displayRadius = node.radius * pulse;

                // Glow
                const gradient = ctx.createRadialGradient(
                    node.x, node.y, 0,
                    node.x, node.y, displayRadius * 2
                );
                gradient.addColorStop(0, node.color);
                gradient.addColorStop(1, 'transparent');
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(node.x, node.y, displayRadius * 2, 0, Math.PI * 2);
                ctx.fill();

                // Node
                ctx.beginPath();
                ctx.arc(node.x, node.y, displayRadius, 0, Math.PI * 2);
                ctx.fillStyle = node.color;
                ctx.fill();
                ctx.strokeStyle = '#fff';
                ctx.lineWidth = 2;
                ctx.stroke();

                // Energy label
                ctx.fillStyle = '#000';
                ctx.font = 'bold 12px Courier New';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(node.energy.toFixed(1), node.x, node.y);
            });

            // Draw conservation indicator
            const leafEnergy = getLeafEnergy();
            ctx.fillStyle = '#ffd700';
            ctx.font = '14px Courier New';
            ctx.textAlign = 'right';
            ctx.fillText(`Σ Leaf Energy: ${leafEnergy.toFixed(1)}`, ctx.canvas.width - 10, 25);
            ctx.fillText(`Total: ${energyTree.totalEnergy}`, ctx.canvas.width - 10, 45);
            ctx.fillStyle = leafEnergy.toFixed(1) === energyTree.totalEnergy.toFixed(1) ? '#00ff88' : '#ff6b35';
            ctx.fillText(`Conservation: ${((leafEnergy / energyTree.totalEnergy) * 100).toFixed(1)}%`, ctx.canvas.width - 10, 65);
        }

        // Extend the existing draw function to include energy visualization
        const originalDraw = draw;
        draw = function() {
            originalDraw();
            drawEnergyTree(ctx);
        };

        // Initialize energy tree when canvas is ready
        setTimeout(initEnergyTree, 100);
    </script>
</body>
</html>
